<!DOCTYPE html>
<!-- START: inst/pkgdown/templates/layout.html --><!-- Generated by pkgdown: do not edit by hand --><html lang="fr" data-bs-theme="auto">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<title>Analyse et prévisions en temps réel des épidémies avec R: Tout sur une seule page</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="assets/themetoggle.js"></script><link rel="stylesheet" type="text/css" href="assets/styles.css">
<script src="assets/scripts.js" type="text/javascript"></script><!-- Google tag (gtag.js) --><script async src="https://www.googletagmanager.com/gtag/js?id=G-XZ471458FQ"></script><script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-XZ471458FQ');
    </script><!-- mathjax --><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      config: ["MMLorHTML.js"],
      jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML", "output/PreviewHTML"],
      extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
      },
      tex2jax: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
        processEscapes: true
      }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><!-- Responsive Favicon for The Carpentries --><link rel="apple-touch-icon" sizes="180x180" href="favicons/epiverse-trace/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicons/epiverse-trace/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="favicons/epiverse-trace/favicon-16x16.png">
<link rel="manifest" href="favicons/epiverse-trace/site.webmanifest">
<link rel="mask-icon" href="favicons/epiverse-trace/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" media="(prefers-color-scheme: light)" content="white">
<meta name="theme-color" media="(prefers-color-scheme: dark)" content="black">
</head>
<body>
    <header id="top" class="navbar navbar-expand-md top-nav epiverse-trace"><svg xmlns="http://www.w3.org/2000/svg" class="d-none"><symbol id="check2" viewbox="0 0 16 16"><path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"></path></symbol><symbol id="circle-half" viewbox="0 0 16 16"><path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"></path></symbol><symbol id="moon-stars-fill" viewbox="0 0 16 16"><path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"></path><path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"></path></symbol><symbol id="sun-fill" viewbox="0 0 16 16"><path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"></path></symbol></svg><a class="visually-hidden-focusable skip-link" href="#main-content">Passer au contenu principal</a>
  <div class="container-fluid top-nav-container">
    <div class="col-md-8">
      <div class="large-logo">
        <img id="epiverse-trace-logo" alt="epiverse-trace" src="assets/images/epiverse-trace-logo.svg"><span class="badge text-bg-danger" style="background-color: #FF4955; border-radius: 5px">
          <abbr title="Cette leçon est en version pre-alpha, ce qui signifie qu'elle est au début de son développement, mais n'a pas encore été enseignée.">
            <a href="https://docs.carpentries.org/resources/curriculum/lesson-life-cycle.html" class="external-link alert-link">
              <i aria-hidden="true" class="icon" data-feather="alert-octagon" style="border-radius: 5px"></i>
              Pre-Alpha
            </a>
            <span class="visually-hidden">Cette leçon est en version pre-alpha, ce qui signifie qu'elle est au début de son développement, mais n'a pas encore été enseignée.</span>
          </abbr>
        </span>

      </div>
    </div>
    <div class="selector-container">
      <div id="theme-selector">
        <li class="nav-item dropdown" id="theme-button-list">
          <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Changer de thème (auto)">
            <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="bd-theme-text">
<li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                Light
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                Dark
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                Auto
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
          </ul>
</li>
      </div>

      <div class="dropdown" id="instructor-dropdown">
        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
          <i aria-hidden="true" class="icon" data-feather="eye"></i> Vue Apprenti <i data-feather="chevron-down"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
<li><button class="dropdown-item" type="button" onclick="window.location.href='instructor/aio.html';">Vue Instructeur</button></li>
        </ul>
</div>
    </div>
  </div>
  <hr></header><nav class="navbar navbar-expand-xl bottom-nav epiverse-trace" aria-label="Navigation Principale"><div class="container-fluid nav-container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Afficher/cacher la barre de navigation">
      <span class="navbar-toggler-icon"></span>
      <span class="menu-title">Menu</span>
    </button>
    <div class="nav-logo">
      <img class="small-logo" alt="epiverse-trace" src="assets/images/epiverse-trace-logo-sm.svg">
</div>
    <div class="lesson-title-md">
      Analyse et prévisions en temps réel des épidémies avec R
    </div>
    <div class="search-icon-sm">
      <!-- TODO: do not show until we have search
        <i role="img" aria-label="Rechercher dans la page 'All In One'" data-feather="search"></i>
      -->
    </div>
    <div class="desktop-nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
<li class="nav-item">
          <span class="lesson-title">
            Analyse et prévisions en temps réel des épidémies avec R
          </span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="key-points.html">Points clés</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="reference.html#glossary">Glossaire</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="profiles.html">Profils d'apprentissage</a>
        </li>
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            Voir plus <i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
<li><a class="dropdown-item" href="reference.html">Glossary of Terms: Epiverse-TRACE</a></li>
          </ul>
</li>
      </ul>
</div>
    <!--
    <form class="d-flex col-md-2 search-form">
      <fieldset disabled>
      <input class="form-control me-2 searchbox" type="search" placeholder="" aria-label="">
        <button class="btn btn-outline-success tablet-search-button"  type="submit">
          <i class="search-icon" data-feather="search" role="img" aria-label="Rechercher dans la page 'All In One'"></i>
        </button>
      </fieldset>
    </form>
    -->
    <a id="search-button" class="btn btn-primary" href="aio.html" role="button" aria-label="Rechercher dans la page 'All In One'">Rechercher dans la page 'All In One'</a>
  </div>
<!--/div.container-fluid -->
</nav><div class="col-md-12 mobile-title">
  Analyse et prévisions en temps réel des épidémies avec R
</div>

<aside class="col-md-12 lesson-progress"><div style="width: %" class="percentage">
    %
  </div>
  <div class="progress epiverse-trace">
    <div class="progress-bar epiverse-trace" role="progressbar" style="width: %" aria-valuenow="" aria-label="Avancée de la leçon" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</aside><div class="container">
      <div class="row">
        <!-- START: inst/pkgdown/templates/navbar.html -->
<div id="sidebar-col" class="col-lg-4">
  <div id="sidebar" class="sidebar">
      <nav aria-labelledby="flush-headingEleven"><button role="button" aria-label="fermer le menu" alt="fermer le menu" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle" data-collapse="Cacher " data-episodes="Épisodes ">
          <i class="search-icon" data-feather="x" role="img"></i>
        </button>
        <div class="sidebar-inner">
          <div class="row mobile-row" id="theme-row-mobile">
            <div class="col" id="theme-selector">
              <li class="nav-item dropdown" id="theme-button-list">
                <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
                  <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><span class="d-lg-none ms-1" id="bd-theme-text">Toggle Theme</span>
                </button>
                <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="bd-theme-text">
<li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                      Light
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                      Dark
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                      <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                      Auto
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                </ul>
</li>
            </div>
          </div>
          <div class="row mobile-row">
            <div class="col">
              <div class="sidenav-view-selector">
                <div class="accordion accordion-flush" id="accordionFlush9">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingNine">
                      <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                        <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> Vue Apprenti
                      </button>
                    </h2>
                    <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                      <div class="accordion-body">
                        <a href="instructor/aio.html">Vue Instructeur</a>
                      </div>
                    </div>
                  </div>
<!--/div.accordion-item-->
                </div>
<!--/div.accordion-flush-->
              </div>
<!--div.sidenav-view-selector -->
            </div>
<!--/div.col -->

            <hr>
</div>
<!--/div.mobile-row -->

          <div class="accordion accordion-flush" id="accordionFlush11">
            <div class="accordion-item">

              <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                <h2 class="accordion-header chapters" id="flush-headingEleven">
                  ÉPISODES
                </h2>
              </button>
              <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                <div class="accordion-body">
                  <div class="accordion accordion-flush" id="accordionFlush1">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading1">
        <a href="index.html">Résumé et Mise en Place</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush2">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading2">
        <a href="delays-access.html">1. Accéder aux distribution des délais épidémiologiques</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush3">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading3">
        <a href="quantify-transmissibility.html">2. Quantifier la transmission</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush4">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading4">
        <a href="delays-functions.html">3. Utiliser les distributions de délais dans l'analyse</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush5">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading5">
        <a href="create-forecast.html">4. Établir des prévisions à court terme</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush6">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading6">
        <a href="severity-static.html">5. Estimation de la gravité d'une épidémie</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

                </div>
              </div>
            </div>

            <hr class="half-width">
<div class="accordion accordion-flush lesson-resources" id="accordionFlush12">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwelve">
                  <button class="accordion-button collapsed" id="lesson-resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                    RESSOURCES
                  </button>
                </h2>
                <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                  <div class="accordion-body">
                    <ul>
<li>
                        <a href="key-points.html">Points clés</a>
                      </li>
                      <li>
                        <a href="reference.html#glossary">Glossaire</a>
                      </li>
                      <li>
                        <a href="profiles.html">Profils d'apprentissage</a>
                      </li>
                      <li><a href="reference.html">Glossary of Terms: Epiverse-TRACE</a></li>
                    </ul>
</div>
                </div>
              </div>
            </div>
            <hr class="half-width lesson-resources">
<a href="aio.html">Voir tout sur une seule page</a>


            <hr class="d-none d-sm-block d-md-none">
<div class="d-grid gap-1">

            </div>
          </div>
<!-- /div.accordion -->
        </div>
<!-- /div.sidebar-inner -->
      </nav>
</div>
<!-- /div.sidebar -->
  </div>
<!-- /div.sidebar-col -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

        <!-- START: inst/pkgdown/templates/content-extra.html -->
  <div class="col-xl-8 col-lg-12 primary-content">
    <main id="main-content" class="main-content"><div class="container lesson-content">
        
        
<section id="aio-delays-access"><p>Content from <a href="delays-access.html">Accéder aux distribution des délais épidémiologiques</a></p>
<hr>
<p>Dernière mise à jour le 2025-10-13 |

        <a href="https://github.com/epiverse-trace/tutorials-middle-fr/edit/main/episodes/delays-access.Rmd" class="external-link">Modifier cette page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Afficher toutes les solutions " data-collapse="Cacher toutes les solutions "> Afficher toutes les solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Vue d'ensemble</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>Comment accéder aux distributions des délais des maladies à partir
d’une base de données préétablie pour les utiliser dans l’analyse ?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectifs</h3>
<ul>
<li>Obtenez les délais à partir d’une base de données de recherche
documentaire avec <a href="https://github.com/epiverse-trace/epiparameter/" class="external-link">epiparameter</a>.</li>
<li>Obtenez les paramètres de distribution et les statistiques sommaires
des distributions de délais.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div id="conditions-préalables" class="callout prereq">
<div class="callout-square">
<i class="callout-icon" data-feather="check"></i>
</div>
<div id="conditions-préalables" class="callout-inner">
<h3 class="callout-title">Conditions préalables</h3>
<div class="callout-content">
<p>Cet épisode nécessite que vous soyez familier avec :</p>
<p><strong>la science des données</strong> Programmation de base avec
R.</p>
<p><strong>Théorie des épidémies</strong> La théorie des épidémies est
basée sur les paramètres épidémiologiques, les périodes de la maladie,
telles que la période d’incubation, le temps de génération et
l’intervalle sériel.</p>
</div>
</div>
</div>
<section><h2 class="section-heading" id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<hr class="half-width">
<p>Les maladies infectieuses suivent un cycle infectieux qui comprend
généralement les phases suivantes : période présymptomatique, période
symptomatique et période de guérison, comme le décrivent leurs <a href="reference.html#naturalhistory">histoire naturelle</a>. Ces
périodes peuvent être utilisées pour comprendre la dynamique de la
transmission et informer les interventions de prévention et de contrôle
des maladies.</p>
<figure><img src="fig/time-periods.jpg" alt="Définition des périodes clés. A partir de Xiang et al, 2021" class="figure mx-auto d-block"><div class="figcaption">Définition des périodes clés. A partir de <a href="https://www.sciencedirect.com/science/article/pii/S2468042721000038" class="external-link">Xiang
et al, 2021</a>
</div>
</figure><div id="définitions" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="définitions" class="callout-inner">
<h3 class="callout-title">Définitions</h3>
<div class="callout-content">
<p>Regardez le <a href="reference.html">glossaire</a> pour connaître les
définitions de toutes les périodes de la figure ci-dessus !</p>
</div>
</div>
</div>
<p>Toutefois, au début d’une épidémie, les efforts visant à comprendre
l’épidémie et les implications pour la lutte peuvent être retardés par
l’absence d’un moyen facile d’accéder aux paramètres clés de la maladie
en question (<a href="https://mrc-ide.github.io/epireview/" class="external-link">Nash et al.,
2023</a>). Des projets tels que <a href="https://github.com/epiverse-trace/epiparameter/" class="external-link">epiparameter</a> et
<code>{epireview}</code> construisent des catalogues en ligne en suivant
des protocoles de synthèse de la littérature qui peuvent aider à
informer l’analyse et à paramétrer les modèles en fournissant une
bibliothèque de paramètres épidémiologiques précédemment estimés à
partir d’épidémies passées.</p>

<p>Pour illustrer l’utilisation de l’outil <a href="https://github.com/epiverse-trace/epiparameter/" class="external-link">epiparameter</a> R
dans votre pipeline d’analyse, notre objectif dans cet épisode sera
d’accéder à un ensemble spécifique de paramètres épidémiologiques de la
littérature, au lieu d’extraire des articles et de les copier-coller à
la main. Nous les insérerons ensuite dans un <a href="https://epiforecasts.io/EpiNow2/" class="external-link">EpiNow2</a> flux
de travail d’analyse.</p>
<!-- cet épisode, nous allons apprendre comment accéder à un ensemble spécifique de paramètres épidémiologiques à partir de la littérature et ensuite obtenir leurs **statistiques sommaires** en utilisant `{epiparameter}`.  -->
<p>Commençons par charger le fichier <a href="https://github.com/epiverse-trace/epiparameter/" class="external-link">epiparameter</a>
paquetage. Nous utiliserons le tube <code>%&gt;%</code> pour connecter
certaines de ses fonctions, certaines <a href="https://tibble.tidyverse.org/" class="external-link">tibble</a> et
<a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a> donc appelons aussi à la fonction
<a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a> paquetage :</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">epiparameter</span><span class="op">)</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">tidyverse</span><span class="op">)</span></span></code></pre>
</div>
<div id="le-double-point-virgule" class="callout checklist">
<div class="callout-square">
<i class="callout-icon" data-feather="check-square"></i>
</div>
<div id="le-double-point-virgule" class="callout-inner">
<h3 class="callout-title">Le double point-virgule</h3>
<div class="callout-content">
<p>Le double point-virgule <code>::</code> dans R vous permet d’appeler
une fonction spécifique d’un paquetage sans charger l’ensemble du
paquetage dans l’environnement actuel.</p>
<p>Par exemple, vous pouvez appeler une fonction spécifique d’un package
sans charger le package entier dans l’environnement actuel,
<code>dplyr::filter(data, condition)</code> utilise
<code>filter()</code> à partir de l’outil <a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a>
paquet.</p>
<p>Cela nous permet de nous souvenir des fonctions du paquet et d’éviter
les conflits d’espace de noms.</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="le-problème">Le problème<a class="anchor" aria-label="anchor" href="#le-probl%C3%A8me"></a>
</h2>
<hr class="half-width">
<p>Si nous voulons estimer la transmissibilité d’une infection, il est
courant d’utiliser un package tel que <a href="https://github.com/mrc-ide/EpiEstim" class="external-link">EpiEstim</a> ou
<a href="https://epiforecasts.io/EpiNow2/" class="external-link">EpiNow2</a>. Le paquet <a href="https://github.com/mrc-ide/EpiEstim" class="external-link">EpiEstim</a> permet
d’estimer en temps réel le nombre de reproductions à l’aide des données
relatives aux cas dans le temps, reflétant ainsi l’évolution de la
transmission en fonction de la date d’apparition des symptômes. Pour
estimer la transmission en fonction du moment où les personnes ont été
effectivement infectées (plutôt que de l’apparition des symptômes), le
logiciel <a href="https://epiforecasts.io/EpiNow2/" class="external-link">EpiNow2</a> étend cette idée en la combinant avec un
modèle qui tient compte des délais dans les données observées. Les deux
logiciels requièrent certaines informations épidémiologiques en entrée.
Par exemple, dans <a href="https://epiforecasts.io/EpiNow2/" class="external-link">EpiNow2</a> nous utilisons
<code>EpiNow2::Gamma()</code> pour spécifier un <a href="reference.html#generationtime">temps de génération</a> sous la
forme d’une distribution de probabilité ajoutant son <code>mean</code>
l’écart-type (<code>sd</code>) et sa valeur maximale
(<code>max</code>).</p>
<p>Pour spécifier une valeur <code>generation_time</code> qui suit un
<em>Gamma</em> avec une moyenne <span class="math inline">\(\mu =
4\)</span> écart-type <span class="math inline">\(\sigma = 2\)</span> et
une valeur maximale de 20, nous écrivons :</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">generation_time</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu">EpiNow2</span><span class="fu">::</span><span class="fu">Gamma</span><span class="op">(</span></span>
<span>    mean <span class="op">=</span> <span class="fl">4</span>,</span>
<span>    sd <span class="op">=</span> <span class="fl">2</span>,</span>
<span>    max <span class="op">=</span> <span class="fl">20</span></span>
<span>  <span class="op">)</span></span></code></pre>
</div>
<p>Il est courant que les analystes recherchent manuellement la
littérature disponible et copient et collent les résultats de la
recherche. <strong>statistiques sommaires</strong> ou les
<strong>paramètres de distribution</strong> des publications
scientifiques. Une difficulté à laquelle on est souvent confronté est
que la présentation des différentes distributions statistiques n’est pas
cohérente dans la littérature (par exemple, un article peut ne présenter
que la moyenne, plutôt que la distribution sous-jacente complète).
<a href="https://github.com/epiverse-trace/epiparameter/" class="external-link">epiparameter</a> L’objectif du projet est de faciliter
l’accès à des estimations fiables des paramètres de distribution pour
une série de maladies infectieuses, afin qu’elles puissent être
facilement mises en œuvre dans les pipelines d’analyse des
épidémies.</p>
<p>Dans cet épisode, nous allons <em>accéder</em> les statistiques
sommaires du temps de génération pour COVID-19 à partir de la
bibliothèque de paramètres épidémiologiques fournie par l’Agence
européenne pour la sécurité et la santé au travail (ESA).
<a href="https://github.com/epiverse-trace/epiparameter/" class="external-link">epiparameter</a>. Ces paramètres peuvent être utilisés pour
estimer la transmissibilité de cette maladie à l’aide de l’outil
<a href="https://epiforecasts.io/EpiNow2/" class="external-link">EpiNow2</a> dans les épisodes suivants.</p>
<p>Commençons par examiner le nombre d’entrées actuellement disponibles
dans la base de données des <strong>base de données des distributions
épidémiologiques</strong> en <a href="https://github.com/epiverse-trace/epiparameter/" class="external-link">epiparameter</a> en utilisant
<code>epiparameter_db()</code> pour la distribution épidémiologique
<code>epi_name</code> appelé temps de génération avec la chaîne
<code>"generation"</code>:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">epiparameter</span><span class="fu">::</span><span class="fu">epiparameter_db</span><span class="op">(</span></span>
<span>  epi_name <span class="op">=</span> <span class="st">"generation"</span></span>
<span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SORTIE<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Returning 3 results that match the criteria (2 are parameterised).
Use subset to filter by entry variables or single_epiparameter to return a single entry.
To retrieve the citation for each use the 'get_citation' function</code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SORTIE<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># List of 3 &lt;epiparameter&gt; objects
Number of diseases: 2
❯ Chikungunya ❯ Influenza
Number of epi parameters: 1
❯ generation time
[[1]]
Disease: Influenza
Pathogen: Influenza-A-H1N1
Epi Parameter: generation time
Study: Lessler J, Reich N, Cummings D, New York City Department of Health and
Mental Hygiene Swine Influenza Investigation Team (2009). "Outbreak of
2009 Pandemic Influenza A (H1N1) at a New York City School." _The New
England Journal of Medicine_. doi:10.1056/NEJMoa0906089
&lt;https://doi.org/10.1056/NEJMoa0906089&gt;.
Distribution: weibull (days)
Parameters:
  shape: 2.360
  scale: 3.180

[[2]]
Disease: Chikungunya
Pathogen: Chikungunya Virus
Epi Parameter: generation time
Study: Salje H, Cauchemez S, Alera M, Rodriguez-Barraquer I, Thaisomboonsuk B,
Srikiatkhachorn A, Lago C, Villa D, Klungthong C, Tac-An I, Fernandez
S, Velasco J, Roque Jr V, Nisalak A, Macareo L, Levy J, Cummings D,
Yoon I (2015). "Reconstruction of 60 Years of Chikungunya Epidemiology
in the Philippines Demonstrates Episodic and Focal Transmission." _The
Journal of Infectious Diseases_. doi:10.1093/infdis/jiv470
&lt;https://doi.org/10.1093/infdis/jiv470&gt;.
Parameters: &lt;no parameters&gt;
Mean: 14 (days)

[[3]]
Disease: Chikungunya
Pathogen: Chikungunya Virus
Epi Parameter: generation time
Study: Guzzetta G, Vairo F, Mammone A, Lanini S, Poletti P, Manica M, Rosa R,
Caputo B, Solimini A, della Torre A, Scognamiglio P, Zumla A, Ippolito
G, Merler S (2020). "Spatial modes for transmission of chikungunya
virus during a large chikungunya outbreak in Italy: a modeling
analysis." _BMC Medicine_. doi:10.1186/s12916-020-01674-y
&lt;https://doi.org/10.1186/s12916-020-01674-y&gt;.
Distribution: gamma (days)
Parameters:
  shape: 8.633
  scale: 1.447

# ℹ Use `parameter_tbl()` to see a summary table of the parameters.
# ℹ Explore database online at: https://epiverse-trace.github.io/epiparameter/articles/database.html</code></pre>
</div>
<p>Dans la bibliothèque des paramètres épidémiologiques, on peut ne pas
disposer d’un <code>"generation"</code> pour la maladie qui nous
intéresse. À la place, nous pouvons consulter le <code>serial</code>
intervalles pour COVID-19. Voyons ce qu’il faut prendre en compte pour
cela !</p>
<div id="analyse-systématique-des-données-relatives-aux-agents-pathogènes-prioritaires" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="analyse-systématique-des-données-relatives-aux-agents-pathogènes-prioritaires" class="callout-inner">
<h3 class="callout-title">Analyse systématique des données relatives aux agents pathogènes prioritaires</h3>
<div class="callout-content">
<p>Les données de l’examen systématique des pathogènes prioritaires <a href="https://mrc-ide.github.io/epireview/" class="external-link"><code>{epireview}</code>
paquet R</a> contient des paramètres sur Ebola, Marburg et Lassa issus
de revues systématiques récentes. D’autres agents pathogènes
prioritaires sont prévus pour les prochaines versions. Jetez un coup
d’œil à <a href="https://epiverse-trace.github.io/epiparameter/articles/data_from_epireview.html" class="external-link">cette
vignette</a> pour plus d’informations sur l’utilisation de ces
paramètres avec <a href="https://github.com/epiverse-trace/epiparameter/" class="external-link">epiparameter</a>.</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="temps-de-génération-vs-intervalle-série">Temps de génération vs intervalle série<a class="anchor" aria-label="anchor" href="#temps-de-g%C3%A9n%C3%A9ration-vs-intervalle-s%C3%A9rie"></a>
</h2>
<hr class="half-width">
<p>Le temps de génération, conjointement avec le nombre de reproduction
(<span class="math inline">\(R\)</span>), peut fournir des indications
précieuses sur le taux de croissance probable de l’épidémie et, partant,
sur la mise en œuvre de mesuresde lutte. Plus la valeur de <span class="math inline">\(R\)</span> est grande et/ou plus le temps de
génération est court, plus le nombre de nouvelles infections attendues
par jour est élevé, et donc plus l’incidence des cas de maladie
augmentera rapidement.</p>
<figure><img src="fig/reproduction-generation-time.png" alt="Vidéo du MRC Centre for Global Infectious Disease Analysis, Ep 76. Science In Context - Epi Parameter Review Group avec le Dr Anne Cori (27-07-2023) at https://youtu.be/VvpYHhFDIjI?si=XiUyjmSV1gKNdrrL" class="figure mx-auto d-block"><div class="figcaption">Vidéo du MRC Centre for Global Infectious
Disease Analysis, Ep 76. Science In Context - Epi Parameter Review Group
avec le Dr Anne Cori (27-07-2023) at <a href="https://youtu.be/VvpYHhFDIjI?si=XiUyjmSV1gKNdrrL" class="external-link uri">https://youtu.be/VvpYHhFDIjI?si=XiUyjmSV1gKNdrrL</a>
</div>
</figure><p>Pour calculer le nombre effectif de reproduction (<span class="math inline">\(R_{t}\)</span>), le <em>temps de génération</em>
(c’est-à-dire le délai entre une infection et la suivante) est souvent
approximée par la distribution des temps de génération. <a href="reference.html#serialinterval">intervalle sériel</a> (c’est-à-dire
le délai entre l’apparition des symptômes chez l’infecteur et
l’apparition des symptômes chez l’infecté). Cette approximation est
fréquemment utilisée car il est plus facile d’observer et d’enregistrer
l’apparition des symptômes que le moment exact de l’infection.</p>
<figure><img src="fig/serial-interval-observed.jpeg" alt="Schéma de la relation entre les différentes périodes de transmission entre un infecteur et un infecté dans une paire de transmission. La fenêtre d’exposition est définie comme l’intervalle de temps entre l’exposition au virus et la fenêtre de transmission est définie comme l’intervalle de temps pour la transmission ultérieure par rapport à la durée de l’infection (Chung Lau et al., 2021)." class="figure mx-auto d-block"><div class="figcaption">Schéma de la relation entre les différentes
périodes de transmission entre un infecteur et un infecté dans une paire
de transmission. La fenêtre d’exposition est définie comme l’intervalle
de temps entre l’exposition au virus et la fenêtre de transmission est
définie comme l’intervalle de temps pour la transmission ultérieure par
rapport à la durée de l’infection (<a href="https://academic.oup.com/jid/article/224/10/1664/6356465" class="external-link">Chung
Lau et al., 2021</a>).</div>
</figure><p>Cependant, l’utilisation de la <em>intervalle sériel</em> comme
approximation de l’intervalle <em>temps de génération</em> est plus
appropriée pour les maladies dans lesquelles l’infectiosité commence
après l’apparition des symptômes (<a href="https://academic.oup.com/jid/article/224/10/1664/6356465" class="external-link">Chung
Lau et al., 2021</a>). Dans les cas où l’infectiosité commence avant
l’apparition des symptômes, les intervalles sériels peuvent avoir des
valeurs négatives, ce qui se produit lorsque l’infecté développe des
symptômes avant l’infecteur dans une paire de transmission (<a href="https://www.ijidonline.com/article/S1201-9712(20)30119-3/fulltext#gr2" class="external-link">Nishiura
et al., 2020</a>).</p>
<div id="des-délais-moyens-aux-distributions-de-probabilité" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="des-délais-moyens-aux-distributions-de-probabilité" class="callout-inner">
<h3 class="callout-title">Des délais moyens aux distributions de probabilité</h3>
<div class="callout-content">
<p>Si nous mesurons les <em>intervalle sériel</em> dans des données
réelles, nous constatons généralement que toutes les paires de cas n’ont
pas le même délai d’apparition. Nous pouvons également observer cette
variabilité pour d’autres délais épidémiologiques clés, notamment le
délai d’apparition de la maladie. <a href="reference.html#incubation">la
période d’incubation</a> et <a href="reference.html#infectiousness">période infectieuse</a>.</p>
<figure><img src="fig/serial-interval-pairs.jpg" alt="Intervalles sériels des paires de cas possibles dans (a) COVID-19 et (b) MERS-CoV. Les paires représentent un infecteur présumé et son contaminé présumé en fonction de la date d’apparition des symptômes (Althobaity et al., 2022)." class="figure mx-auto d-block"><div class="figcaption">Intervalles sériels des paires de cas possibles
dans (a) COVID-19 et (b) MERS-CoV. Les paires représentent un infecteur
présumé et son contaminé présumé en fonction de la date d’apparition des
symptômes (<a href="https://www.sciencedirect.com/science/article/pii/S2468042722000537#fig6" class="external-link">Althobaity
et al., 2022</a>).</div>
</figure><p>Pour résumer ces données relatives aux périodes individuelles et aux
paires, il est donc utile de quantifier les <strong>distribution
statistique</strong> des délais qui correspondent le mieux aux données,
plutôt que de se concentrer sur la moyenne (<a href="https://www.eurosurveillance.org/content/10.2807/1560-7917.ES.2023.28.27.2200806" class="external-link">McFarland
et al., 2023</a>).</p>
<!-- ajouter une référence sur les bonnes pratiques pour estimer les distributions -->
<figure><img src="fig/seria-interval-fitted-distributions.jpg" alt="Distribution d’intervalles sériels ajustée pour (a) COVID-19 et (b) MERS-CoV sur la base des paires de transmission signalées en Arabie saoudite. Nous avons ajusté trois distributions couramment utilisées, les distributions Log normal, Gamma et Weibull, respectivement (Althobaity et al., 2022)." class="figure mx-auto d-block"><div class="figcaption">Distribution d’intervalles sériels ajustée pour
(a) COVID-19 et (b) MERS-CoV sur la base des paires de transmission
signalées en Arabie saoudite. Nous avons ajusté trois distributions
couramment utilisées, les distributions Log normal, Gamma et Weibull,
respectivement (<a href="https://www.sciencedirect.com/science/article/pii/S2468042722000537#fig5" class="external-link">Althobaity
et al., 2022</a>).</div>
</figure><p>Les distributions statistiques sont résumées en fonction de leur
<strong>statistiques sommaires</strong> comme <em>l’emplacement</em>
(moyenne et percentiles) et <em>l’étendue</em> (variance ou écart-type)
de la distribution, ou avec leur <strong>paramètres de
distribution</strong> qui renseignent sur la <em>forme</em> (forme et
taux/échelle) de la distribution. Ces valeurs estimées peuvent être
rapportées avec leur <strong>incertitude</strong> (intervalles de
confiance à 95 %).</p>
<table class="table">
<thead><tr class="header">
<th align="left">Gamma</th>
<th align="left">moyenne</th>
<th align="left">forme</th>
<th align="left">taux/échelle</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">MERS-CoV</td>
<td align="left">14.13(13.9-14.7)</td>
<td align="left">6.31(4.88-8.52)</td>
<td align="left">0.43(0.33-0.60)</td>
</tr>
<tr class="even">
<td align="left">COVID-19</td>
<td align="left">5.1(5.0-5.5)</td>
<td align="left">2.77(2.09-3.88)</td>
<td align="left">0.53(0.38-0.76)</td>
</tr>
</tbody>
</table>
<table class="table">
<thead><tr class="header">
<th align="left">Weibull</th>
<th align="left">moyenne</th>
<th align="left">forme</th>
<th align="left">taux/échelle</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">MERS-CoV</td>
<td align="left">14.2(13.3-15.2)</td>
<td align="left">3.07(2.64-3.63)</td>
<td align="left">16.1(15.0-17.1)</td>
</tr>
<tr class="even">
<td align="left">COVID-19</td>
<td align="left">5.2(4.6-5.9)</td>
<td align="left">1.74(1.46-2.11)</td>
<td align="left">5.83(5.08-6.67)</td>
</tr>
</tbody>
</table>
<table class="table">
<thead><tr class="header">
<th align="left">Log normal</th>
<th align="left">moyenne</th>
<th align="left">moyenne-log</th>
<th align="left">sd-log</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">MERS-CoV</td>
<td align="left">14.08(13.1-15.2)</td>
<td align="left">2.58(2.50-2.68)</td>
<td align="left">0.44(0.39-0.5)</td>
</tr>
<tr class="even">
<td align="left">COVID-19</td>
<td align="left">5.2(4.2-6.5)</td>
<td align="left">1.45(1.31-1.61)</td>
<td align="left">0.63(0.54-0.74)</td>
</tr>
</tbody>
</table>
<p>Tableau : Estimations des intervalles de série à l’aide des
distributions Gamma, Weibull et Log Normal. Les intervalles de confiance
à 95 % pour les paramètres de forme et d’échelle (logmoy et sd pour Log
Normal) sont indiqués entre parenthèses (<a href="https://www.sciencedirect.com/science/article/pii/S2468042722000537#tbl3" class="external-link">Althobaity
et al, 2022</a>).</p>
</div>
</div>
</div>
<div id="intervalle-de-série" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="intervalle-de-série" class="callout-inner">
<h3 class="callout-title">Intervalle de série</h3>
<div class="callout-content">
<p>Supposons que COVID-19 et le SRAS aient des valeurs de nombre de
reproduction similaires et que l’intervalle de série soit proche du
temps de génération.</p>
<p>Étant donné l’intervalle sériel des deux infections dans la figure
ci-dessous :</p>
<ul>
<li>Laquelle serait la plus difficile à contrôler ?</li>
<li>Pourquoi en concluez-vous ainsi ?</li>
</ul>
<figure><img src="fig/serial-interval-covid-sars.jpg" alt="Intervalle en série des infections par le nouveau coronavirus (COVID-19) superposé à une distribution publiée du SRAS. (Nishiura et al., 2020)" class="figure mx-auto d-block"><div class="figcaption">Intervalle en série des infections par le
nouveau coronavirus (COVID-19) superposé à une distribution publiée du
SRAS. (<a href="https://www.ijidonline.com/article/S1201-9712(20)30119-3/fulltext" class="external-link">Nishiura
et al., 2020</a>)</div>
</figure>
</div>
</div>
</div>
<div id="accordionHint1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button hint-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseHint1" aria-expanded="false" aria-controls="collapseHint1">
  <h4 class="accordion-header" id="headingHint1"> Donner un indice </h4>
</button>
<div id="collapseHint1" class="accordion-collapse collapse" aria-labelledby="headingHint1" data-bs-parent="#accordionHint1">
<div class="accordion-body">
<p>Le sommet de chaque courbe peut vous renseigner sur l’emplacement de
la moyenne de chaque distribution. Une moyenne plus élevée indique un
délai plus long entre l’apparition des symptômes chez l’infecteur et
l’infecté.</p>
</div>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Montrer la solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<p><strong>Laquelle serait la plus difficile à contrôler ?</strong></p>
<p>COVID-19</p>
<p><strong>Pourquoi concluez-vous cela ?</strong></p>
<p>L’intervalle sériel moyen de COVID-19 est plus faible. La valeur
moyenne approximative de l’intervalle sériel de COVID-19 est d’environ
quatre jours, alors que celle du SRAS est d’environ sept jours. Par
conséquent, s’il y a beaucoup d’infections dans la population, COVID-19
produira en moyenne plus de nouvelles générations d’infections en moins
de temps que le SRAS, en supposant des nombres de reproduction
similaires. Cela signifie qu’il faudrait beaucoup plus de ressources
pour lutter contre l’épidémie.</p>
</div>
</div>
</div>
</div>

</section><section><h2 class="section-heading" id="choix-des-paramètres-épidémiologiques">Choix des paramètres épidémiologiques<a class="anchor" aria-label="anchor" href="#choix-des-param%C3%A8tres-%C3%A9pid%C3%A9miologiques"></a>
</h2>
<hr class="half-width">
<p>Dans cette section, nous utiliserons <a href="https://github.com/epiverse-trace/epiparameter/" class="external-link">epiparameter</a> pour
obtenir l’intervalle sériel de COVID-19, comme alternative au temps de
génération.</p>
<p>Tout d’abord, voyons combien de paramètres nous avons dans la base de
données des distributions épidémiologiques
(<code>epiparameter_db()</code>) avec l’option <code>disease</code>
nommé <code>covid</code>-19. Exécutez ce code :</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">epiparameter</span><span class="fu">::</span><span class="fu">epiparameter_db</span><span class="op">(</span></span>
<span>  disease <span class="op">=</span> <span class="st">"covid"</span></span>
<span><span class="op">)</span></span></code></pre>
</div>
<p>A partir du <a href="https://github.com/epiverse-trace/epiparameter/" class="external-link">epiparameter</a> nous pouvons utiliser le
paquet <code>epiparameter_db()</code> pour demander n’importe quel
<code>disease</code> ainsi qu’une distribution épidémiologique
spécifique (<code>epi_name</code>). Exécutez cette fonction dans votre
console :</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">epiparameter</span><span class="fu">::</span><span class="fu">epiparameter_db</span><span class="op">(</span></span>
<span>  disease <span class="op">=</span> <span class="st">"COVID"</span>,</span>
<span>  epi_name <span class="op">=</span> <span class="st">"serial"</span></span>
<span><span class="op">)</span></span></code></pre>
</div>
<p>Avec cette combinaison de requêtes, nous obtenons plus d’une
distribution des délais (parce que la base de données a plusieurs
entrées). Cette sortie est un <code>&lt;epiparameter&gt;</code> objet de
classe.</p>
<div id="insensible-à-la-casse" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="insensible-à-la-casse" class="callout-inner">
<h3 class="callout-title">INSENSIBLE À LA CASSE</h3>
<div class="callout-content">
<p><code>epiparameter_db</code> est <a href="https://dillionmegida.com/p/case-sensitivity-vs-case-insensitivity/#case-insensitivity" class="external-link">insensible
à la casse</a>. Cela signifie que vous pouvez utiliser des chaînes avec
des lettres en majuscules ou en minuscules indistinctement. Des chaînes
comme <code>"serial"</code>, <code>"serial interval"</code> ou
<code>"serial_interval"</code> sont également valables.</p>
</div>
</div>
</div>
<p>Comme le suggèrent les résultats, pour résumer une
<code>&lt;epiparameter&gt;</code> et obtenir les noms des colonnes de la
base de données de paramètres sous-jacente, nous pouvons ajouter
l’élément <code>epiparameter::parameter_tbl()</code> au code précédent à
l’aide du tuyau <code>%&gt;%</code>:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">epiparameter</span><span class="fu">::</span><span class="fu">epiparameter_db</span><span class="op">(</span></span>
<span>  disease <span class="op">=</span> <span class="st">"covid"</span>,</span>
<span>  epi_name <span class="op">=</span> <span class="st">"serial"</span></span>
<span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">epiparameter</span><span class="fu">::</span><span class="fu">parameter_tbl</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SORTIE<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Returning 4 results that match the criteria (3 are parameterised).
Use subset to filter by entry variables or single_epiparameter to return a single entry.
To retrieve the citation for each use the 'get_citation' function</code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SORTIE<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># Parameter table:
# A data frame:    4 × 7
  disease  pathogen   epi_name        prob_distribution author  year sample_size
  &lt;chr&gt;    &lt;chr&gt;      &lt;chr&gt;           &lt;chr&gt;             &lt;chr&gt;  &lt;dbl&gt;       &lt;dbl&gt;
1 COVID-19 SARS-CoV-2 serial interval &lt;NA&gt;              Alene…  2021        3924
2 COVID-19 SARS-CoV-2 serial interval lnorm             Nishi…  2020          28
3 COVID-19 SARS-CoV-2 serial interval weibull           Nishi…  2020          18
4 COVID-19 SARS-CoV-2 serial interval norm              Yang …  2020         131</code></pre>
</div>
<p>Dans le <code>epiparameter::parameter_tbl()</code> nous pouvons
également trouver différents types de distributions de probabilité (par
exemple, Log-normal, Weibull, Normal).</p>
<p><a href="https://github.com/epiverse-trace/epiparameter/" class="external-link">epiparameter</a> utilise la fonction <code>base</code> R
pour les distributions. C’est pourquoi <strong>Log normal</strong>
s’appelle <code>lnorm</code>.</p>
<div id="accordionSpoiler1" class="accordion spoiler-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button spoiler-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSpoiler1" aria-expanded="false" aria-controls="collapseSpoiler1">
  <h3 class="accordion-header" id="headingSpoiler1">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="eye"></i></div> Pourquoi avons-nous une entrée “NA” ? </h3>
</button>
<div id="collapseSpoiler1" class="accordion-collapse collapse" aria-labelledby="headingSpoiler1" data-bs-parent="#accordionSpoiler1">
<div class="accordion-body">
<p>Les entrées avec une valeur manquante (<code>&lt;NA&gt;</code>) dans
le <code>prob_distribution</code> sont <em>non paramétrés</em> non
paramétrées. Elles présentent des statistiques sommaires (par exemple,
une moyenne et un écart type), mais aucune distribution de probabilité
n’est spécifiée. Comparez ces deux résultats :</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># get an &lt;epiparameter&gt; object</span></span>
<span><span class="va">distribution</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">epiparameter</span><span class="fu">::</span><span class="fu">epiparameter_db</span><span class="op">(</span></span>
<span>    disease <span class="op">=</span> <span class="st">"covid"</span>,</span>
<span>    epi_name <span class="op">=</span> <span class="st">"serial"</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">distribution</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co"># pluck the first entry in the object class &lt;list&gt;</span></span>
<span>  <span class="fu">pluck</span><span class="op">(</span><span class="fl">1</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co"># check if &lt;epiparameter&gt; object have distribution parameters</span></span>
<span>  <span class="fu">is_parameterised</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># check if the second &lt;epiparameter&gt; object</span></span>
<span><span class="co"># have distribution parameters</span></span>
<span><span class="va">distribution</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">pluck</span><span class="op">(</span><span class="fl">2</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">is_parameterised</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="les-entrées-paramétrées-ont-une-méthode-dinférence">Les entrées paramétrées ont une méthode d’inférence<a class="anchor" aria-label="anchor" href="#les-entr%C3%A9es-param%C3%A9tr%C3%A9es-ont-une-m%C3%A9thode-dinf%C3%A9rence"></a>
</h3>
<p>Comme indiqué dans <code>?is_parameterised</code> une distribution
paramétrée est l’entrée à laquelle est associée une distribution de
probabilité fournie par une méthode d’inférence.
<code>inference_method</code> comme indiqué dans
<code>metadata</code>:</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">distribution</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">metadata</span><span class="op">$</span><span class="va">inference_method</span></span>
<span><span class="va">distribution</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">metadata</span><span class="op">$</span><span class="va">inference_method</span></span>
<span><span class="va">distribution</span><span class="op">[[</span><span class="fl">4</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">metadata</span><span class="op">$</span><span class="va">inference_method</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="trouvez-vos-distributions-de-délais" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="trouvez-vos-distributions-de-délais" class="callout-inner">
<h3 class="callout-title">Trouvez vos distributions de délais !</h3>
<div class="callout-content">
<p>Prenez 2 minutes pour explorer les <a href="https://github.com/epiverse-trace/epiparameter/" class="external-link">epiparameter</a>
bibliothèque.</p>
<p><strong>Choisissez</strong> une maladie d’intérêt (par exemple, la
grippe, la rougeole, etc.) et une distribution des délais (par exemple,
la période d’incubation, le début de la maladie jusqu’au décès,
etc.)</p>
<p>Trouvez :</p>
<ul>
<li><p>Combien y a-t-il de distributions de délais pour cette maladie
?</p></li>
<li><p>Combien de types de distribution de probabilité (par exemple,
gamma, log normale) y a-t-il pour un délai donné dans cette maladie
?</p></li>
</ul>
<p>Posez la question :</p>
<ul>
<li><p>Reconnaissez-vous les journaux ?</p></li>
<li><p>La revue de littérature d’<em>{epiparameter}</em> devrait- elle
prendre en compte un autre article?</p></li>
</ul>
</div>
</div>
</div>
<div id="accordionHint2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button hint-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseHint2" aria-expanded="false" aria-controls="collapseHint2">
  <h4 class="accordion-header" id="headingHint2"> Donner un indice </h4>
</button>
<div id="collapseHint2" class="accordion-collapse collapse" aria-labelledby="headingHint2" data-bs-parent="#accordionHint2">
<div class="accordion-body">
<p>L’analyse <code>epiparameter_db()</code> fonction avec
<code>disease</code> compte à elle seule le nombre d’entrées comme :</p>
<ul>
<li>études, et</li>
<li>les répartitions des délais.</li>
</ul>
<p>Les <code>epiparameter_db()</code> avec <code>disease</code> et
<code>epi_name</code> obtient une liste de toutes les entrées avec :</p>
<ul>
<li>la citation complète,</li>
<li>le <strong>type</strong> d’une distribution de probabilité, et</li>
<li>les valeurs des paramètres de la distribution.</li>
</ul>
<p>La combinaison de <code>epiparameter_db()</code> plus
<code>parameter_tbl()</code> permet d’obtenir un cadre de données de
toutes les entrées avec des colonnes comme :</p>
<ul>
<li>les <strong>type</strong> de la distribution de probabilité par
délai, et</li>
<li>l’auteur et l’année de l’étude.</li>
</ul>
</div>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Montrer la solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<p>Nous avons choisi d’explorer les distributions des délais d’Ebola
:</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># we expect 16 delay distributions for Ebola</span></span>
<span><span class="fu">epiparameter</span><span class="fu">::</span><span class="fu">epiparameter_db</span><span class="op">(</span></span>
<span>  disease <span class="op">=</span> <span class="st">"ebola"</span></span>
<span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SORTIE<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Returning 17 results that match the criteria (17 are parameterised).
Use subset to filter by entry variables or single_epiparameter to return a single entry.
To retrieve the citation for each use the 'get_citation' function</code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SORTIE<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># List of 17 &lt;epiparameter&gt; objects
Number of diseases: 1
❯ Ebola Virus Disease
Number of epi parameters: 9
❯ hospitalisation to death ❯ hospitalisation to discharge ❯ incubation period ❯ notification to death ❯ notification to discharge ❯ offspring distribution ❯ onset to death ❯ onset to discharge ❯ serial interval
[[1]]
Disease: Ebola Virus Disease
Pathogen: Ebola Virus
Epi Parameter: offspring distribution
Study: Lloyd-Smith J, Schreiber S, Kopp P, Getz W (2005). "Superspreading and
the effect of individual variation on disease emergence." _Nature_.
doi:10.1038/nature04153 &lt;https://doi.org/10.1038/nature04153&gt;.
Distribution: nbinom (No units)
Parameters:
  mean: 1.500
  dispersion: 5.100

[[2]]
Disease: Ebola Virus Disease
Pathogen: Ebola Virus-Zaire Subtype
Epi Parameter: incubation period
Study: Eichner M, Dowell S, Firese N (2011). "Incubation period of ebola
hemorrhagic virus subtype zaire." _Osong Public Health and Research
Perspectives_. doi:10.1016/j.phrp.2011.04.001
&lt;https://doi.org/10.1016/j.phrp.2011.04.001&gt;.
Distribution: lnorm (days)
Parameters:
  meanlog: 2.487
  sdlog: 0.330

[[3]]
Disease: Ebola Virus Disease
Pathogen: Ebola Virus-Zaire Subtype
Epi Parameter: onset to death
Study: The Ebola Outbreak Epidemiology Team, Barry A, Ahuka-Mundeke S, Ali
Ahmed Y, Allarangar Y, Anoko J, Archer B, Abedi A, Bagaria J, Belizaire
M, Bhatia S, Bokenge T, Bruni E, Cori A, Dabire E, Diallo A, Diallo B,
Donnelly C, Dorigatti I, Dorji T, Waeber A, Fall I, Ferguson N,
FitzJohn R, Tengomo G, Formenty P, Forna A, Fortin A, Garske T,
Gaythorpe K, Gurry C, Hamblion E, Djingarey M, Haskew C, Hugonnet S,
Imai N, Impouma B, Kabongo G, Kalenga O, Kibangou E, Lee T, Lukoya C,
Ly O, Makiala-Mandanda S, Mamba A, Mbala-Kingebeni P, Mboussou F,
Mlanda T, Makuma V, Morgan O, Mulumba A, Kakoni P, Mukadi-Bamuleka D,
Muyembe J, Bathé N, Ndumbi Ngamala P, Ngom R, Ngoy G, Nouvellet P, Nsio
J, Ousman K, Peron E, Polonsky J, Ryan M, Touré A, Towner R, Tshapenda
G, Van De Weerdt R, Van Kerkhove M, Wendland A, Yao N, Yoti Z, Yuma E,
Kalambayi Kabamba G, Mwati J, Mbuy G, Lubula L, Mutombo A, Mavila O,
Lay Y, Kitenge E (2018). "Outbreak of Ebola virus disease in the
Democratic Republic of the Congo, April–May, 2018: an epidemiological
study." _The Lancet_. doi:10.1016/S0140-6736(18)31387-4
&lt;https://doi.org/10.1016/S0140-6736%2818%2931387-4&gt;.
Distribution: gamma (days)
Parameters:
  shape: 2.400
  scale: 3.333

# ℹ 14 more elements
# ℹ Use `print(n = ...)` to see more elements.
# ℹ Use `parameter_tbl()` to see a summary table of the parameters.
# ℹ Explore database online at: https://epiverse-trace.github.io/epiparameter/articles/database.html</code></pre>
</div>
<p>Maintenant, à partir de la sortie de
<code>epiparameter::epiparameter_db()</code> Quelle est la <a href="reference.html#offspringdist">distribution de la
descendance</a>?</p>
<p>Nous choisissons de trouver les périodes d’incubation d’Ebola. Cette
sortie liste tous les articles et paramètres trouvés. Exécutez-la
localement si nécessaire :</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">epiparameter</span><span class="fu">::</span><span class="fu">epiparameter_db</span><span class="op">(</span></span>
<span>  disease <span class="op">=</span> <span class="st">"ebola"</span>,</span>
<span>  epi_name <span class="op">=</span> <span class="st">"incubation"</span></span>
<span><span class="op">)</span></span></code></pre>
</div>
<p>Nous utilisons <code>parameter_tbl()</code> pour obtenir un
récapitulatif de toutes les données :</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># we expect 2 different types of delay distributions</span></span>
<span><span class="co"># for ebola incubation period</span></span>
<span><span class="fu">epiparameter</span><span class="fu">::</span><span class="fu">epiparameter_db</span><span class="op">(</span></span>
<span>  disease <span class="op">=</span> <span class="st">"ebola"</span>,</span>
<span>  epi_name <span class="op">=</span> <span class="st">"incubation"</span></span>
<span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">parameter_tbl</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SORTIE<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Returning 5 results that match the criteria (5 are parameterised).
Use subset to filter by entry variables or single_epiparameter to return a single entry.
To retrieve the citation for each use the 'get_citation' function</code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SORTIE<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># Parameter table:
# A data frame:    5 × 7
  disease           pathogen epi_name prob_distribution author  year sample_size
  &lt;chr&gt;             &lt;chr&gt;    &lt;chr&gt;    &lt;chr&gt;             &lt;chr&gt;  &lt;dbl&gt;       &lt;dbl&gt;
1 Ebola Virus Dise… Ebola V… incubat… lnorm             Eichn…  2011         196
2 Ebola Virus Dise… Ebola V… incubat… gamma             WHO E…  2015        1798
3 Ebola Virus Dise… Ebola V… incubat… gamma             WHO E…  2015          49
4 Ebola Virus Dise… Ebola V… incubat… gamma             WHO E…  2015         957
5 Ebola Virus Dise… Ebola V… incubat… gamma             WHO E…  2015         792</code></pre>
</div>
<p>Nous trouvons deux types de distributions de probabilités pour cette
requête : <em>log normale</em> et <em>gamma</em>.</p>
<p>Comment le <a href="https://github.com/epiverse-trace/epiparameter/" class="external-link">epiparameter</a> collecte-t-elle et
examine-t-elle la littérature évaluée par les pairs ? Nous vous invitons
à lire la vignette sur <a href="https://epiverse-trace.github.io/epiparameter/articles/data_protocol.html" class="external-link">“Protocole
de collecte et de synthèse des données</a>!</p>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="sélectionnez-une-distribution-unique">Sélectionnez une distribution unique<a class="anchor" aria-label="anchor" href="#s%C3%A9lectionnez-une-distribution-unique"></a>
</h2>
<hr class="half-width">
<p>Les <code>epiparameter::epiparameter_db()</code> fonctionne comme une
fonction de filtrage ou de sous-ensemble. Nous pouvons utiliser la
fonction <code>author</code> pour conserver
<code>Hiroshi Nishiura</code> ou l’argument <code>subset</code> pour
conserver les paramètres des études dont la taille de l’échantillon est
supérieure à 10 :</p>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">epiparameter</span><span class="fu">::</span><span class="fu">epiparameter_db</span><span class="op">(</span></span>
<span>  disease <span class="op">=</span> <span class="st">"covid"</span>,</span>
<span>  epi_name <span class="op">=</span> <span class="st">"serial"</span>,</span>
<span>  author <span class="op">=</span> <span class="st">"Nishiura"</span>,</span>
<span>  subset <span class="op">=</span> <span class="va">sample_size</span> <span class="op">&gt;</span> <span class="fl">10</span></span>
<span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">epiparameter</span><span class="fu">::</span><span class="fu">parameter_tbl</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<p>Nous obtenons toujours plus d’un paramètre épidémiologique. Au lieu
de cela, nous pouvons définir l’argument
<code>single_epiparameter</code> à <code>TRUE</code> pour n’en obtenir
qu’un seul :</p>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">epiparameter</span><span class="fu">::</span><span class="fu">epiparameter_db</span><span class="op">(</span></span>
<span>  disease <span class="op">=</span> <span class="st">"covid"</span>,</span>
<span>  epi_name <span class="op">=</span> <span class="st">"serial"</span>,</span>
<span>  single_epiparameter <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SORTIE<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Using Nishiura H, Linton N, Akhmetzhanov A (2020). "Serial interval of novel
coronavirus (COVID-19) infections." _International Journal of
Infectious Diseases_. doi:10.1016/j.ijid.2020.02.060
&lt;https://doi.org/10.1016/j.ijid.2020.02.060&gt;..
To retrieve the citation use the 'get_citation' function</code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SORTIE<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Disease: COVID-19
Pathogen: SARS-CoV-2
Epi Parameter: serial interval
Study: Nishiura H, Linton N, Akhmetzhanov A (2020). "Serial interval of novel
coronavirus (COVID-19) infections." _International Journal of
Infectious Diseases_. doi:10.1016/j.ijid.2020.02.060
&lt;https://doi.org/10.1016/j.ijid.2020.02.060&gt;.
Distribution: lnorm (days)
Parameters:
  meanlog: 1.386
  sdlog: 0.568</code></pre>
</div>
<div id="comment-fonctionne-single_epiparameter" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="comment-fonctionne-single_epiparameter" class="callout-inner">
<h3 class="callout-title">Comment fonctionne “single_epiparameter” ?</h3>
<div class="callout-content">
<p>En regardant la documentation d’aide pour
<code>?epiparameter::epiparameter_db()</code>:</p>
<ul>
<li>Si plusieurs entrées correspondent aux arguments fournis et que
<code>single_epiparameter = TRUE</code> alors l’entrée paramétrée
<code>&lt;epiparameter&gt;</code> avec l’entrée <em>la plus grande
taille d’échantillon</em> sera renvoyée.</li>
<li>Si plusieurs entrées sont égales après ce tri, l’option <em>première
entrée</em> de la liste sera retournée.</li>
</ul>
<p>Qu’est-ce qu’un <em>paramétré</em> <code>&lt;epiparameter&gt;</code>?
Regardez <code>?is_parameterised</code>.</p>
</div>
</div>
</div>
<p>Attribuons cette <code>&lt;epiparameter&gt;</code> à l’objet de
classe <code>covid_serialint</code> objet.</p>
<div class="codewrapper sourceCode" id="cb24">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid_serialint</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">epiparameter</span><span class="fu">::</span><span class="fu">epiparameter_db</span><span class="op">(</span></span>
<span>    disease <span class="op">=</span> <span class="st">"covid"</span>,</span>
<span>    epi_name <span class="op">=</span> <span class="st">"serial"</span>,</span>
<span>    single_epiparameter <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>  <span class="op">)</span></span></code></pre>
</div>
<p>Vous pouvez utiliser <code>plot()</code> pour
<code>&lt;epiparameter&gt;</code> pour visualiser les objets :</p>
<ul>
<li>le <em>Fonction de densité de probabilité (PDF)</em> et</li>
<li>la <em>Fonction de distribution cumulative (FDC)</em>.</li>
</ul>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># plot &lt;epiparameter&gt; object</span></span>
<span><span class="fu">plot</span><span class="op">(</span><span class="va">covid_serialint</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/delays-access-rendered-unnamed-chunk-14-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>Avec la <code>xlim</code> vous pouvez modifier la durée ou le nombre
de jours de la période d’essai. <code>x</code> de l’axe. Découvrez à
quoi cela ressemble :</p>
<div class="codewrapper sourceCode" id="cb26">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># plot &lt;epiparameter&gt; object</span></span>
<span><span class="fu">plot</span><span class="op">(</span><span class="va">covid_serialint</span>, xlim <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="fl">1</span>, <span class="fl">60</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
</section><section><h2 class="section-heading" id="extrayez-les-statistiques-récapitulatives">Extrayez les statistiques récapitulatives<a class="anchor" aria-label="anchor" href="#extrayez-les-statistiques-r%C3%A9capitulatives"></a>
</h2>
<hr class="half-width">
<p>Nous pouvons obtenir les <code>mean</code> et l’écart-type
(<code>sd</code>) à partir de ce <code>&lt;epiparameter&gt;</code>
plonger dans le <code>summary_stats</code> l’objet :</p>
<div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># get the mean</span></span>
<span><span class="va">covid_serialint</span><span class="op">$</span><span class="va">summary_stats</span><span class="op">$</span><span class="va">mean</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SORTIE<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 4.7</code></pre>
</div>
<p>Nous avons maintenant un paramètre épidémiologique que nous pouvons
réutiliser ! Étant donné que l’objet <code>covid_serialint</code> est un
<code>lnorm</code> ou une distribution log-normale, nous pouvons
remplacer le <strong>statistiques sommaires</strong> que nous
introduisons dans la base de données <code>EpiNow2::LogNormal()</code>
dans la fonction</p>
<div class="codewrapper sourceCode" id="cb29">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">generation_time</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu">EpiNow2</span><span class="fu">::</span><span class="fu">LogNormal</span><span class="op">(</span></span>
<span>    mean <span class="op">=</span> <span class="va">covid_serialint</span><span class="op">$</span><span class="va">summary_stats</span><span class="op">$</span><span class="va">mean</span>, <span class="co"># replaced!</span></span>
<span>    sd <span class="op">=</span> <span class="va">covid_serialint</span><span class="op">$</span><span class="va">summary_stats</span><span class="op">$</span><span class="va">sd</span>, <span class="co"># replaced!</span></span>
<span>    max <span class="op">=</span> <span class="fl">20</span></span>
<span>  <span class="op">)</span></span></code></pre>
</div>
<p>Dans le prochain épisode, nous apprendrons à utiliser la fonction
<a href="https://epiforecasts.io/EpiNow2/" class="external-link">EpiNow2</a> pour spécifier correctement les distributions et
estimer la transmissibilité. Ensuite, comment utiliser <strong>fonctions
de distribution</strong> pour obtenir une valeur maximale
(<code>max</code>) pour <code>EpiNow2::LogNormal()</code> et utiliser
<a href="https://github.com/epiverse-trace/epiparameter/" class="external-link">epiparameter</a> dans votre analyse.</p>
<div id="distributions-logarithmiques-normales" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="distributions-logarithmiques-normales" class="callout-inner">
<h3 class="callout-title">Distributions logarithmiques normales</h3>
<div class="callout-content">
<p>Si vous avez besoin de la distribution log-normale <strong>de la
distribution logarithmique</strong> au lieu des statistiques sommaires,
vous pouvez utiliser <code>epiparameter::get_parameters()</code>:</p>
<div class="codewrapper sourceCode" id="cb30">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid_serialint_parameters</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">epiparameter</span><span class="fu">::</span><span class="fu">get_parameters</span><span class="op">(</span><span class="va">covid_serialint</span><span class="op">)</span></span>
<span></span>
<span><span class="va">covid_serialint_parameters</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SORTIE<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  meanlog     sdlog
1.3862617 0.5679803 </code></pre>
</div>
<p>Cela permet d’obtenir un vecteur de classe
<code>&lt;numeric&gt;</code> prêt à être utilisé comme entrée pour
n’importe quel autre paquet !</p>
<p>Considérez que {EpiNow2} acceptent également les paramètres de
distribution comme données d’entrée. Exécutez
<code>?EpiNow2::LogNormal</code> pour lire les <a href="https://epiforecasts.io/EpiNow2/reference/Distributions.html" class="external-link">Distributions
de probabilités</a> de référence.</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="défis">Défis<a class="anchor" aria-label="anchor" href="#d%C3%A9fis"></a>
</h2>
<hr class="half-width">
<div id="lintervalle-sériel-debola" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="lintervalle-sériel-debola" class="callout-inner">
<h3 class="callout-title">L’intervalle sériel d’Ebola</h3>
<div class="callout-content">
<p>Prenez 1 minute pour :</p>
<p>Accédez à l’intervalle de série Ebola avec la taille d’échantillon la
plus élevée.</p>
<p>Réponse :</p>
<ul>
<li><p>Qu’est-ce que le <code>sd</code> de la distribution
épidémiologique ?</p></li>
<li><p>Quelle est la <code>sample_size</code> utilisée dans cette étude
?</p></li>
</ul>
</div>
</div>
</div>
<div id="accordionHint3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button hint-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseHint3" aria-expanded="false" aria-controls="collapseHint3">
  <h4 class="accordion-header" id="headingHint3"> Donner un indice </h4>
</button>
<div id="collapseHint3" class="accordion-collapse collapse" aria-labelledby="headingHint3" data-bs-parent="#accordionHint3">
<div class="accordion-body">
<p>Utilisez le <code>$</code> et l’opérateur <kbd>tabulation</kbd> ou
<kbd>↹</kbd> pour les explorer sous la forme d’une liste extensible
:</p>
<div class="codewrapper sourceCode" id="cb32">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" tabindex="-1"></a>covid_serialint<span class="sc">$</span></span></code></pre>
</div>
<p>Utilisez la touche <code>str()</code> pour afficher la structure du
<code>&lt;epiparameter&gt;</code> R.</p>
</div>
</div>
</div>
</div>


<div id="le-paramètre-de-gravité-debola" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="le-paramètre-de-gravité-debola" class="callout-inner">
<h3 class="callout-title">Le paramètre de gravité d’Ebola</h3>
<div class="callout-content">
<p>Un paramètre de gravité tel que la durée de l’hospitalisation
pourrait compléter les informations nécessaires sur la capacité
d’accueil en cas d’épidémie (<a href="https://royalsocietypublishing.org/doi/10.1098/rstb.2016.0371" class="external-link">Cori
et al.</a>).</p>
<p>Pour Ebola :</p>
<ul>
<li>Qu’est-ce qui est rapporté ? <em>estimation ponctuelle</em> de la
durée moyenne des soins de santé et de l’isolement des cas ?</li>
</ul>
</div>
</div>
</div>
<div id="accordionHint4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button hint-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseHint4" aria-expanded="false" aria-controls="collapseHint4">
  <h4 class="accordion-header" id="headingHint4"> Donner un indice </h4>
</button>
<div id="collapseHint4" class="accordion-collapse collapse" aria-labelledby="headingHint4" data-bs-parent="#accordionHint4">
<div class="accordion-body">
<p>Un délai informatif devrait mesurer le temps écoulé entre
l’apparition des symptômes et la guérison ou le décès.</p>
<p>Trouver un moyen d’accéder à l’ensemble <a href="https://github.com/epiverse-trace/epiparameter/" class="external-link">epiparameter</a>
base de données et de trouver comment ce délai peut être stocké. Les
<code>parameter_tbl()</code> est un tableau de données.</p>
</div>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3"> Montrer la solution </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" aria-labelledby="headingSolution3" data-bs-parent="#accordionSolution3">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb43">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># one way to get the list of all the available parameters</span></span>
<span><span class="fu">epiparameter_db</span><span class="op">(</span>disease <span class="op">=</span> <span class="st">"all"</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">parameter_tbl</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">as_tibble</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">distinct</span><span class="op">(</span><span class="va">epi_name</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SORTIE<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Returning 125 results that match the criteria (100 are parameterised).
Use subset to filter by entry variables or single_epiparameter to return a single entry.
To retrieve the citation for each use the 'get_citation' function</code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SORTIE<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 13 × 1
   epi_name
   &lt;chr&gt;
 1 incubation period
 2 serial interval
 3 generation time
 4 onset to death
 5 offspring distribution
 6 hospitalisation to death
 7 hospitalisation to discharge
 8 notification to death
 9 notification to discharge
10 onset to discharge
11 onset to hospitalisation
12 onset to ventilation
13 case fatality risk          </code></pre>
</div>
<div class="codewrapper sourceCode" id="cb46">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ebola_severity</span> <span class="op">&lt;-</span> <span class="fu">epiparameter_db</span><span class="op">(</span></span>
<span>  disease <span class="op">=</span> <span class="st">"ebola"</span>,</span>
<span>  epi_name <span class="op">=</span> <span class="st">"onset to discharge"</span></span>
<span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SORTIE<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Returning 1 results that match the criteria (1 are parameterised).
Use subset to filter by entry variables or single_epiparameter to return a single entry.
To retrieve the citation for each use the 'get_citation' function</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb48">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># point estimate</span></span>
<span><span class="va">ebola_severity</span><span class="op">$</span><span class="va">summary_stats</span><span class="op">$</span><span class="va">mean</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SORTIE<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 15.1</code></pre>
</div>
<p>Vérifiez que pour certains <a href="https://github.com/epiverse-trace/epiparameter/" class="external-link">epiparameter</a> vous
disposerez également de l’élément <em>incertitude</em> autour de la
<em>estimation ponctuelle</em> de chaque statistique sommaire :</p>
<div class="codewrapper sourceCode" id="cb50">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 95% confidence intervals</span></span>
<span><span class="va">ebola_severity</span><span class="op">$</span><span class="va">summary_stats</span><span class="op">$</span><span class="va">mean_ci</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SORTIE<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 95</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb52">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># limits of the confidence intervals</span></span>
<span><span class="va">ebola_severity</span><span class="op">$</span><span class="va">summary_stats</span><span class="op">$</span><span class="va">mean_ci_limits</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SORTIE<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 14.6 15.6</code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="la-distribution-zoo" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="la-distribution-zoo" class="callout-inner">
<h3 class="callout-title">La distribution zoo</h3>
<div class="callout-content">
<p>Explorez cette shinyapp appelée <strong>Le zoo de la
distribution</strong>!</p>
<p>Suivez les étapes suivantes pour reproduire la forme de la
distribution d’intervalles sériels COVID à partir de
<a href="https://github.com/epiverse-trace/epiparameter/" class="external-link">epiparameter</a> (<code>covid_serialint</code> objet) :</p>
<ol style="list-style-type: decimal">
<li>Accédez au <a href="https://ben18785.shinyapps.io/distribution-zoo/" class="external-link uri">https://ben18785.shinyapps.io/distribution-zoo/</a> site web
de l’application shiny,</li>
<li>Allez dans le panneau de gauche,</li>
<li>Gardez l’option <em>Catégorie de distribution</em>:
<code>Continuous Univariate</code>,</li>
<li>Sélectionnez un nouveau <em>Type de distribution</em>:
<code>Log-Normal</code>,</li>
<li>Déplacez le <strong>curseurs</strong> c’est-à-dire l’élément de
contrôle graphique qui vous permet d’ajuster une valeur en déplaçant une
poignée le long d’une piste ou d’une barre horizontale jusqu’à
l’emplacement du curseur. <code>covid_serialint</code> paramètres.</li>
</ol>
<p>Reproduisez ces éléments à l’aide de l’outil
<code>distribution</code> et tous ses éléments de liste :
<code>[[2]]</code>, <code>[[3]]</code> et <code>[[4]]</code>. Explorez
comment la forme d’une distribution change lorsque ses paramètres
changent.</p>
<p>Partagez à propos de :</p>
<ul>
<li>Quelles sont les autres fonctionnalités du site web que vous trouvez
utiles ?</li>
</ul>
</div>
</div>
</div>

<!--
## Carte conceptuelle

la mettre à jour à partir du dernier test d'épiparamètre
-->
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Points clés</h3>
<div class="callout-content">
<ul>
<li>Utilisez <a href="https://github.com/epiverse-trace/epiparameter/" class="external-link">epiparameter</a> pour accéder au catalogue des
distributions de délais épidémiologiques.</li>
<li>Utilisez cette fonction pour accéder au catalogue de la littérature
sur les distributions de délais épidémiologiques.
<code>epiparameter_db()</code> pour sélectionner une seule distribution
de délais.</li>
<li>Utilisez cette option pour sélectionner les distributions à délais
unique. <code>parameter_tbl()</code> pour obtenir une vue d’ensemble des
distributions de délais multiples.</li>
<li>Réutiliser les estimations connues pour une maladie inconnue au
début d’une épidémie lorsqu’il n’y a pas de données sur la recherche des
contacts.</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-quantify-transmissibility"><p>Content from <a href="quantify-transmissibility.html">Quantifier la transmission</a></p>
<hr>
<p>Dernière mise à jour le 2025-10-13 |

        <a href="https://github.com/epiverse-trace/tutorials-middle-fr/edit/main/episodes/quantify-transmissibility.Rmd" class="external-link">Modifier cette page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Afficher toutes les solutions " data-collapse="Cacher toutes les solutions "> Afficher toutes les solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Vue d'ensemble</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>Comment puis-je estimer le nombre de reproduction variable dans le
temps (<span class="math inline">\(Rt\)</span>) et le taux de croissance
à partir d’une série chronologique de données de cas ?</li>
<li>Comment quantifier l’hétérogénéité géographique à partir de ces
paramètres de transmission ?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectifs</h3>
<ul>
<li>Apprenez à estimer les paramètres de transmission à partir d’une
série chronologique de données sur les cas à l’aide du package
<code>EpiNow2</code>.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div id="conditions-préalables" class="callout prereq">
<div class="callout-square">
<i class="callout-icon" data-feather="check"></i>
</div>
<div id="conditions-préalables" class="callout-inner">
<h3 class="callout-title">Conditions préalables</h3>
<div class="callout-content">
<p>Les étudiants doivent se familiariser avec les concepts suivants
avant de suivre ce tutoriel :</p>
<p><strong>Statistiques</strong>: distributions de probabilités,
principe de l’analyse bayésienne.</p>
<p><strong>Théorie des épidémies</strong>: Nombre de reproduction
effectif.</p>
<p><strong>Science des données</strong>: la transformation et la
visualisation des données. Vous pouvez revoir l’épisode sur <a href="https://epiverse-trace.github.io/tutorials-early/describe-cases.html" class="external-link">Agréger
et visualiser</a> les données d’incidence.</p>
</div>
</div>
</div>
<div id="rappel-le-nombre-de-reproduction-effectif-r_t" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="rappel-le-nombre-de-reproduction-effectif-r_t" class="callout-inner">
<h3 class="callout-title">Rappel : le nombre de reproduction effectif,
<span class="math inline">\(R_t\)</span>
</h3>
<div class="callout-content">
<p>Le <a href="reference.html#basic">nombre de reproduction de base</a>,
<span class="math inline">\(R_0\)</span> est le nombre moyen de cas
causés par un individu infectieux dans une population entièrement
susceptible.</p>
<p>Mais dans une épidémie en cours, la population ne reste pas
entièrement susceptible, car les personnes qui se remettent de
l’infection sont généralement immunisées. En outre, il peut y avoir des
changements de comportement ou d’autres facteurs qui affectent la
transmission. Lorsque nous voulons surveiller les changements dans la
transmission, nous nous intéressons donc davantage à la valeur du
<strong>nombre de reproduction effectif</strong>, <span class="math inline">\(R_t\)</span> qui représente le nombre moyen de cas
causés par un individu infectieux dans la population au temps <span class="math inline">\(t\)</span> compte tenu de l’état actuel de la
population (y compris les niveaux d’immunité et les mesures de
contrôle).</p>
</div>
</div>
</div>
<section><h2 class="section-heading" id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<hr class="half-width">
<p>L’intensité de la transmission d’une épidémie est quantifiée à l’aide
de deux paramètres clés : le nombre de reproduction, qui renseigne sur
la force de la transmission en indiquant le nombre de nouveaux cas
attendus pour chaque cas existant, et le nombre de décès. <a href="reference.html#growth">taux de croissance</a> qui renseigne sur la
vitesse de transmission en indiquant la rapidité avec laquelle
l’épidémie se propage ou décline (temps de doublement/dédoublement) au
sein d’une population. Pour plus de détails sur la distinction entre la
vitesse et la force de la transmission et les implications pour la
lutte, consultez le site <a href="https://royalsocietypublishing.org/doi/full/10.1098/rspb.2020.1556" class="external-link">Dushoff
&amp; Park, 2021</a>.</p>
<p>Pour estimer ces paramètres clés à l’aide des données relatives aux
cas, nous devons tenir compte des délais entre les dates d’infections et
les dates de cas déclarés. Lors d’une épidémie, les données ne sont
généralement disponibles qu’à partir des dates déclarées. Nous devons
donc utiliser des méthodes d’estimation pour tenir compte de ces retards
lorsque nous essayons de comprendre les changements dans la transmission
au fil du temps.</p>
<p>Dans les prochains tutoriels, nous nous concentrerons sur la manière
d’utiliser les fonctions de <a href="https://epiforecasts.io/EpiNow2/" class="external-link">EpiNow2</a> pour estimer les
paramètres de transmission des données de cas. Nous ne couvrirons pas le
contexte théorique des modèles ou du cadre d’inférence, pour plus de
détails sur ces concepts, consultez la <a href="https://epiforecasts.io/EpiNow2/dev/articles/estimate_infections.html" class="external-link">vignette.</a>.</p>
<p>Dans ce tutoriel, nous allons apprendre à utiliser le package
<a href="https://epiforecasts.io/EpiNow2/" class="external-link">EpiNow2</a> pour estimer le nombre de reproduction variable
dans le temps. Nous obtiendrons les données d’entrée de
<a href="https://www.reconverse.org/incidence2/" class="external-link">incidence2</a>. Nous utiliserons le package
<a href="https://tidyr.tidyverse.org" class="external-link">tidyr</a> et <a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a> pour organiser certains de
ses résultats, <a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a> pour visualiser la distribution
des cas, et le tuyau <code>%&gt;%</code> pour relier certaines de leurs
fonctions, alors appelons aussi le package <a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a>
:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">EpiNow2</span><span class="op">)</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">incidence2</span><span class="op">)</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">tidyverse</span><span class="op">)</span></span></code></pre>
</div>
<div id="le-double-point-virgule" class="callout checklist">
<div class="callout-square">
<i class="callout-icon" data-feather="check-square"></i>
</div>
<div id="le-double-point-virgule" class="callout-inner">
<h3 class="callout-title">Le double point-virgule</h3>
<div class="callout-content">
<p>Le double deux-points <code>::</code> dans R vous permet d’appeler
une fonction spécifique d’un package sans charger l’ensemble du package
dans l’environnement actuel.</p>
<p>Par exemple, vous pouvez appeler une fonction spécifique d’un package
sans charger le package entier dans l’environnement actuel,
<code>dplyr::filter(data, condition)</code> utilise
<code>filter()</code> à partir du package <a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a>.</p>
<p>Cela nous permet de nous souvenir des fonctions du package et
d’éviter les conflits d’espace de noms.</p>
</div>
</div>
</div>

<div id="inférence-bayésienne" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="inférence-bayésienne" class="callout-inner">
<h3 class="callout-title">Inférence bayésienne</h3>
<div class="callout-content">
<p>Le package R <code>EpiNow2</code> utilise une méthode d’inférence
bayésienne <a href="reference.html#bayesian">inférence bayésienne</a>
pour estimer les nombres de reproduction et les durées d’infection sur
la base des dates déclarées. En d’autres termes, il estime la
transmission en fonction de la date à laquelle les personnes ont été
effectivement infectées (plutôt que de l’apparition des symptômes), en
tenant compte des retards dans les données observées. En revanche,
l’approche <a href="https://github.com/mrc-ide/EpiEstim" class="external-link">EpiEstim</a> permet une estimation en temps réel
plus rapide et plus simple du nombre de reproductions en utilisant
uniquement les données de cas au fil du temps, reflétant la façon dont
la transmission change en fonction du moment où les symptômes
apparaissent.</p>
<p>Dans l’inférence bayésienne, nous utilisons les connaissances a
priori (distributions a priori) et les données (via une fonction de
vraisemblance) pour obtenir la probabilité a posteriori :</p>
<p><span class="math inline">\(\text{Probabilité a posteriori} \propto
\text{vraisemblance} \times \text{probabilité a priori}\)</span></p>
</div>
</div>
</div>

</section><section><h2 class="section-heading" id="distributions-de-délais-et-données-de-cas">Distributions de délais et données de cas<a class="anchor" aria-label="anchor" href="#distributions-de-d%C3%A9lais-et-donn%C3%A9es-de-cas"></a>
</h2>
<hr class="half-width">
<div class="section level3">
<h3 id="données-de-cas">Données de cas<a class="anchor" aria-label="anchor" href="#donn%C3%A9es-de-cas"></a>
</h3>
<p>Pour illustrer les fonctions des <code>EpiNow2</code> nous
utiliserons les données relatives au début de la pandémie de COVID-19 au
Royaume-Uni, mais uniquement pour les 90 premiers jours observés. Les
données sont disponibles dans le package R
<a href="https://www.reconverse.org/incidence2/" class="external-link">incidence2</a>.</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu">as_tibble</span><span class="op">(</span><span class="fu">incidence2</span><span class="fu">::</span><span class="va">covidregionaldataUK</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SORTIE<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 6,370 × 13
   date       region   region_code cases_new cases_total deaths_new deaths_total
   &lt;date&gt;     &lt;chr&gt;    &lt;chr&gt;           &lt;dbl&gt;       &lt;dbl&gt;      &lt;dbl&gt;        &lt;dbl&gt;
 1 2020-01-30 East Mi… E12000004          NA          NA         NA           NA
 2 2020-01-30 East of… E12000006          NA          NA         NA           NA
 3 2020-01-30 England  E92000001           2           2         NA           NA
 4 2020-01-30 London   E12000007          NA          NA         NA           NA
 5 2020-01-30 North E… E12000001          NA          NA         NA           NA
 6 2020-01-30 North W… E12000002          NA          NA         NA           NA
 7 2020-01-30 Norther… N92000002          NA          NA         NA           NA
 8 2020-01-30 Scotland S92000003          NA          NA         NA           NA
 9 2020-01-30 South E… E12000008          NA          NA         NA           NA
10 2020-01-30 South W… E12000009          NA          NA         NA           NA
# ℹ 6,360 more rows
# ℹ 6 more variables: recovered_new &lt;dbl&gt;, recovered_total &lt;dbl&gt;,
#   hosp_new &lt;dbl&gt;, hosp_total &lt;dbl&gt;, tested_new &lt;dbl&gt;, tested_total &lt;dbl&gt;</code></pre>
</div>
<p>Pour utiliser les données, nous devons les formater de manière à ce
qu’elles comportent deux colonnes :</p>
<ul>
<li>
<code>date</code> la date (en tant qu’objet date, voir
<code>?is.Date()</code>),</li>
<li>
<code>confirm</code>: nombre de cas déclarés (confirmés) à cette
date.</li>
</ul>
<p>Utilisons <a href="https://tidyr.tidyverse.org" class="external-link">tidyr</a> et <a href="https://www.reconverse.org/incidence2/" class="external-link">incidence2</a> pour cela
:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cases_sliced</span> <span class="op">&lt;-</span> <span class="fu">incidence2</span><span class="fu">::</span><span class="va">covidregionaldataUK</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">as_tibble</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co"># Preprocess missing values</span></span>
<span>  <span class="fu">tidyr</span><span class="fu">::</span><span class="fu">replace_na</span><span class="op">(</span><span class="fu">base</span><span class="fu">::</span><span class="fu">list</span><span class="op">(</span>cases_new <span class="op">=</span> <span class="fl">0</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co"># Compute the daily incidence</span></span>
<span>  <span class="fu">incidence2</span><span class="fu">::</span><span class="fu">incidence</span><span class="op">(</span></span>
<span>    date_index <span class="op">=</span> <span class="st">"date"</span>,</span>
<span>    counts <span class="op">=</span> <span class="st">"cases_new"</span>,</span>
<span>    count_values_to <span class="op">=</span> <span class="st">"confirm"</span>,</span>
<span>    date_names_to <span class="op">=</span> <span class="st">"date"</span>,</span>
<span>    complete_dates <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>  <span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co"># Keep the first 90 dates</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">slice_head</span><span class="op">(</span>n <span class="op">=</span> <span class="fl">90</span><span class="op">)</span></span></code></pre>
</div>
<p>Avec <code>incidence2::incidence()</code> nous agrégeons des cas sur
différentes périodes de temps (<em>intervalles</em>, c’est-à-dire des
jours, des semaines ou des mois) ou par groupe. Nous pouvons également
obtenir les dates complètes pour tous les intervalles de dates par
catégorie de groupe à l’aide de la fonction
<code>complete_dates = TRUE</code> Explorez plus tard les <a href="https://www.reconverse.org/incidence2/reference/incidence.html" class="external-link"><code>incidence2::incidence()</code>
manuel de référence</a></p>
<div id="accordionSpoiler1" class="accordion spoiler-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button spoiler-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSpoiler1" aria-expanded="false" aria-controls="collapseSpoiler1">
  <h3 class="accordion-header" id="headingSpoiler1">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="eye"></i></div> Afficher les détails </h3>
</button>
<div id="collapseSpoiler1" class="accordion-collapse collapse" data-bs-parent="#accordionSpoiler1" aria-labelledby="headingSpoiler1">
<div class="accordion-body">
<p><strong>Pouvons-nous reproduire {incidence2} avec
{dplyr}?</strong></p>
<p>Nous pouvons obtenir un objet similaire à <code>cases</code> à partir
de l’objet <code>incidence2::covidregionaldataUK</code> à l’aide du
package <a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a>.</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">incidence2</span><span class="fu">::</span><span class="va">covidregionaldataUK</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">select</span><span class="op">(</span><span class="va">date</span>, <span class="va">cases_new</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">group_by</span><span class="op">(</span><span class="va">date</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">summarise</span><span class="op">(</span>confirm <span class="op">=</span> <span class="fu">sum</span><span class="op">(</span><span class="va">cases_new</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">ungroup</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">slice_head</span><span class="op">(</span>n <span class="op">=</span> <span class="fl">90</span><span class="op">)</span></span></code></pre>
</div>
<p>Cependant, <code>incidence2::incidence()</code> contient des
arguments pratiques comme <code>complete_dates</code> qui facilitent
l’obtention d’un objet d’incidence avec le même intervalle de dates pour
chaque groupe sans nécessiter de lignes de code supplémentaires ou un
package de séries temporelles.</p>
</div>
</div>
</div>
</div>
<p>Dans une situation d’épidémie, il est probable que nous n’ayons accès
qu’au début de l’ensemble des données d’entrée. Nous supposons donc que
nous ne disposons que des 90 premiers jours de ces données.</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">plot</span><span class="op">(</span><span class="va">cases_sliced</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/quantify-transmissibility-rendered-unnamed-chunk-5-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>Pour transmettre les résultats de <a href="https://www.reconverse.org/incidence2/" class="external-link">incidence2</a> à
<a href="https://epiforecasts.io/EpiNow2/" class="external-link">EpiNow2</a>, nous devons supprimer une colonne de l’objet
<code>cases_filter</code> :</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Drop column for {EpiNow2} input format</span></span>
<span><span class="va">cases</span> <span class="op">&lt;-</span> <span class="va">cases_sliced</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">select</span><span class="op">(</span><span class="op">-</span><span class="va">count_variable</span><span class="op">)</span></span>
<span></span>
<span><span class="va">cases</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SORTIE<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 90 × 2
   date       confirm
   &lt;date&gt;       &lt;dbl&gt;
 1 2020-01-30       3
 2 2020-01-31       0
 3 2020-02-01       0
 4 2020-02-02       0
 5 2020-02-03       0
 6 2020-02-04       0
 7 2020-02-05       2
 8 2020-02-06       0
 9 2020-02-07       0
10 2020-02-08       8
# ℹ 80 more rows</code></pre>
</div>
</div>
<div class="section level3">
<h3 id="distribution-des-délais">Distribution des délais<a class="anchor" aria-label="anchor" href="#distribution-des-d%C3%A9lais"></a>
</h3>
<p>Nous supposons qu’il existe des délais entre le moment de l’infection
et le moment où un cas est signalé. Nous spécifions ces délais sous
forme de distributions pour tenir compte de l’incertitude des
différences au niveau individuel. Le délai peut impliquer plusieurs
types de processus. Un délai typique entre le moment de l’infection et
la déclaration du cas peut consister en ce qui suit</p>
<blockquote>
<p><strong>le temps écoulé entre l’infection et l’apparition des
symptômes</strong> (le <a href="reference.html#incubation">période
d’incubation</a>) + <strong>délai entre l’apparition des symptômes et la
notification du cas</strong> (délai de déclaration) .</p>
</blockquote>
<p>La distribution des délais pour chacun de ces processus peut être
estimée à partir de données ou obtenue à partir de la littérature. Nous
pouvons exprimer l’incertitude quant aux paramètres corrects des
distributions en supposant que les distributions ont
<strong>fixe</strong> fixes ou qu’elles ont <strong>variables</strong>
variables. Pour comprendre la différence entre <strong>fixe</strong> et
<strong>variables</strong> considérons la période d’incubation.</p>
<div id="délais-et-données" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="délais-et-données" class="callout-inner">
<h3 class="callout-title">Délais et données</h3>
<div class="callout-content">
<p>Le nombre de retards et le type de retard sont des données flexibles
qui dépendent des données. Les exemples ci-dessous montrent comment les
délais peuvent être spécifiés pour différentes sources de données :</p>
<center>
<table class="table">
<colgroup>
<col width="26%">
<col width="73%">
</colgroup>
<thead><tr class="header">
<th>Source de données</th>
<th>Délai (s)</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Heure d’apparition des symptômes</td>
<td>Période d’incubation</td>
</tr>
<tr class="even">
<td>Date de la déclaration du cas</td>
<td>Période d’incubation + délai entre l’apparition des symptômes et la
notification du cas</td>
</tr>
<tr class="odd">
<td>Durée de l’hospitalisation</td>
<td>Période d’incubation + temps écoulé entre l’apparition des symptômes
et l’hospitalisation</td>
</tr>
</tbody>
</table>
</center>
</div>
</div>
</div>
<div class="section level4">
<h4 id="distribution-de-la-période-dincubation">Distribution de la période d’incubation<a class="anchor" aria-label="anchor" href="#distribution-de-la-p%C3%A9riode-dincubation"></a>
</h4>
<p>La distribution de la période d’incubation pour de nombreuses
maladies peut généralement être obtenue à partir de la littérature.
L’ensemble <a href="https://github.com/epiverse-trace/epiparameter/" class="external-link">epiparameter</a> contient une bibliothèque de
paramètres épidémiologiques pour différentes maladies, obtenus à partir
de la littérature.</p>
<p>Nous spécifions une distribution gamma (fixe) avec moyenne <span class="math inline">\(\mu = 4\)</span> et un écart-type <span class="math inline">\(\sigma = 2\)</span> (forme = <span class="math inline">\(4\)</span>, échelle = <span class="math inline">\(1\)</span>) en utilisant la fonction
<code>Gamma()</code> comme suit :</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">incubation_period_fixed</span> <span class="op">&lt;-</span> <span class="fu">EpiNow2</span><span class="fu">::</span><span class="fu">Gamma</span><span class="op">(</span></span>
<span>  mean <span class="op">=</span> <span class="fl">4</span>,</span>
<span>  sd <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  max <span class="op">=</span> <span class="fl">20</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">incubation_period_fixed</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SORTIE<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>- gamma distribution (max: 20):
  shape:
    4
  rate:
    1</code></pre>
</div>
<p>L’argument <code>max</code> est la valeur maximale que la
distribution peut prendre ; dans cet exemple, 20 jours.</p>
<p>Nous pouvons tracer les distributions générées par
<a href="https://epiforecasts.io/EpiNow2/" class="external-link">EpiNow2</a> en utilisant <code>plot()</code>.</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">plot</span><span class="op">(</span><span class="va">incubation_period_fixed</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/quantify-transmissibility-rendered-unnamed-chunk-8-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><div id="pourquoi-une-distribution-gamma" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="pourquoi-une-distribution-gamma" class="callout-inner">
<h3 class="callout-title">Pourquoi une distribution gamma ?</h3>
<div class="callout-content">
<p>La période d’incubation doit être une valeur positive. Nous devons
donc spécifier une distribution en <a href="https://epiforecasts.io/EpiNow2/" class="external-link">EpiNow2</a> qui ne
concerne que les valeurs positives.</p>
<p><code>Gamma()</code> prend en charge les distributions Gamma et
<code>LogNormal()</code> les distributions log-normales, qui sont des
distributions pour les valeurs positives uniquement.</p>
<p>Pour tous les types de retard, nous devrons utiliser des
distributions pour les valeurs positives uniquement - nous ne voulons
pas inclure les retards de jours négatifs dans notre analyse !</p>
</div>
</div>
</div>
</div>
<div class="section level4">
<h4 id="prise-en-compte-de-lincertitude-de-la-distribution">Prise en compte de l’incertitude de la distribution<a class="anchor" aria-label="anchor" href="#prise-en-compte-de-lincertitude-de-la-distribution"></a>
</h4>
<p>Pour spécifier une distribution <strong>variable</strong> nous
incluons l’incertitude autour de la moyenne <span class="math inline">\(\mu\)</span> et de l’écart-type <span class="math inline">\(\sigma\)</span> de notre distribution gamma. Si
notre distribution de la période d’incubation a une moyenne <span class="math inline">\(\mu\)</span> et un écart-type <span class="math inline">\(\sigma\)</span> nous supposons que la moyenne
(<span class="math inline">\(\mu\)</span>) suit une distribution normale
avec un écart type <span class="math inline">\(\sigma_{\mu}\)</span>:</p>
<p><span class="math display">\[\mbox{Normal}(\mu,\sigma_{\mu}^2)\]</span></p>
<p>et un écart-type (<span class="math inline">\(\sigma\)</span>) suit
une distribution normale avec un écart type <span class="math inline">\(\sigma_{\sigma}\)</span>:</p>
<p><span class="math display">\[\mbox{Normal}(\sigma,\sigma_{\sigma}^2).\]</span></p>
<p>Nous spécifions ceci en utilisant <code>Normal()</code> pour chaque
argument : la moyenne (<span class="math inline">\(\mu = 4\)</span> avec
<span class="math inline">\(\sigma_{\mu} = 0.5\)</span>) et l’écart-type
(<span class="math inline">\(\sigma = 2\)</span> avec <span class="math inline">\(\sigma_{\sigma} = 0.5\)</span>).</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">incubation_period_variable</span> <span class="op">&lt;-</span> <span class="fu">EpiNow2</span><span class="fu">::</span><span class="fu">Gamma</span><span class="op">(</span></span>
<span>  mean <span class="op">=</span> <span class="fu">EpiNow2</span><span class="fu">::</span><span class="fu">Normal</span><span class="op">(</span>mean <span class="op">=</span> <span class="fl">4</span>, sd <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span>,</span>
<span>  sd <span class="op">=</span> <span class="fu">EpiNow2</span><span class="fu">::</span><span class="fu">Normal</span><span class="op">(</span>mean <span class="op">=</span> <span class="fl">2</span>, sd <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span>,</span>
<span>  max <span class="op">=</span> <span class="fl">20</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">incubation_period_variable</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SORTIE<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>- gamma distribution (max: 20):
  shape:
    - normal distribution:
      mean:
        4
      sd:
        0.61
  rate:
    - normal distribution:
      mean:
        1
      sd:
        0.31</code></pre>
</div>
<p>Traçons la distribution que nous venons de configurer :</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">plot</span><span class="op">(</span><span class="va">incubation_period_variable</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/quantify-transmissibility-rendered-unnamed-chunk-10-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure>
</div>
<div class="section level4">
<h4 id="retards-dans-létablissement-des-rapports">Retards dans l’établissement des rapports<a class="anchor" aria-label="anchor" href="#retards-dans-l%C3%A9tablissement-des-rapports"></a>
</h4>
<p>Après la période d’incubation, il s’écoule un délai supplémentaire
entre l’apparition des symptômes et la notification du cas : le délai de
déclaration. Nous pouvons le spécifier comme une distribution fixe ou
variable, ou estimer une distribution à partir de données.</p>
<p>Lorsque vous spécifiez une distribution, il est utile de visualiser
la densité de probabilité pour voir le pic et l’étendue de la
distribution. Dans cet example, nous allons utiliser une distribution
<em>log normale</em>.</p>
<p>Si nous voulons supposer que le délai de déclaration moyen est de 2
jours (avec une incertitude de 0,5 jour) et que l’écart type est de 1
jour (avec une incertitude de 0,5 jour), nous pouvons spécifier une
distribution variable à l’aide de la commande <code>LogNormal()</code>
comme précédemment :</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">reporting_delay_variable</span> <span class="op">&lt;-</span> <span class="fu">EpiNow2</span><span class="fu">::</span><span class="fu">LogNormal</span><span class="op">(</span></span>
<span>  meanlog <span class="op">=</span> <span class="fu">EpiNow2</span><span class="fu">::</span><span class="fu">Normal</span><span class="op">(</span>mean <span class="op">=</span> <span class="fl">2</span>, sd <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span>,</span>
<span>  sdlog <span class="op">=</span> <span class="fu">EpiNow2</span><span class="fu">::</span><span class="fu">Normal</span><span class="op">(</span>mean <span class="op">=</span> <span class="fl">1</span>, sd <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span>,</span>
<span>  max <span class="op">=</span> <span class="fl">10</span></span>
<span><span class="op">)</span></span></code></pre>
</div>
<div id="accordionSpoiler2" class="accordion spoiler-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button spoiler-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSpoiler2" aria-expanded="false" aria-controls="collapseSpoiler2">
  <h3 class="accordion-header" id="headingSpoiler2">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="eye"></i></div> Afficher les détails </h3>
</button>
<div id="collapseSpoiler2" class="accordion-collapse collapse" data-bs-parent="#accordionSpoiler2" aria-labelledby="headingSpoiler2">
<div class="accordion-body">
<p><strong>Visualisez une distribution log-normale en utilisant
{epiparameter}</strong></p>
<p>En utilisant <code>epiparameter::epiparameter()</code> nous pouvons
créer une distribution personnalisée. La distribution normale à
logarithme fixe aura l’aspect suivant :</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">epiparameter</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">epiparameter</span><span class="fu">::</span><span class="fu">epiparameter</span><span class="op">(</span></span>
<span>  disease <span class="op">=</span> <span class="st">"covid"</span>,</span>
<span>  epi_name <span class="op">=</span> <span class="st">"reporting delay"</span>,</span>
<span>  prob_distribution <span class="op">=</span></span>
<span>    <span class="fu">epiparameter</span><span class="fu">::</span><span class="fu">create_prob_distribution</span><span class="op">(</span></span>
<span>      prob_distribution <span class="op">=</span> <span class="st">"lnorm"</span>,</span>
<span>      prob_distribution_params <span class="op">=</span> <span class="fu">c</span><span class="op">(</span></span>
<span>        meanlog <span class="op">=</span> <span class="fl">2</span>,</span>
<span>        sdlog <span class="op">=</span> <span class="fl">1</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">plot</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/quantify-transmissibility-rendered-unnamed-chunk-12-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure>
</div>
</div>
</div>
</div>
<div id="accordionSpoiler3" class="accordion spoiler-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button spoiler-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSpoiler3" aria-expanded="false" aria-controls="collapseSpoiler3">
  <h3 class="accordion-header" id="headingSpoiler3">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="eye"></i></div> Afficher les détails </h3>
</button>
<div id="collapseSpoiler3" class="accordion-collapse collapse" data-bs-parent="#accordionSpoiler3" aria-labelledby="headingSpoiler3">
<div class="accordion-body">
<p><strong>Comment obtenir le délai de reporting à partir des données
?</strong></p>
<p>Si l’on dispose de données sur le délai entre l’apparition des
symptômes et la déclaration, on peut utiliser la fonction
<code>estimate_delay()</code> pour estimer une distribution log-normale
à partir d’un vecteur de délais. Le code ci-dessous illustre comment
utiliser la fonction <code>estimate_delay()</code> avec des données
synthétiques sur les délais.</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">tidyverse</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Steps:</span></span>
<span><span class="co"># - get Ebola data from package {outbreaks}</span></span>
<span><span class="co"># - keep a subset of columns for this example only</span></span>
<span><span class="co"># - calculate the time difference between two dates in linelist</span></span>
<span><span class="co"># - extract the time difference as a vector class object</span></span>
<span><span class="co"># - estimate the delay parameters using {EpiNow2}</span></span>
<span></span>
<span><span class="fu">outbreaks</span><span class="fu">::</span><span class="va">ebola_sim_clean</span><span class="op">$</span><span class="va">linelist</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">tibble</span><span class="fu">::</span><span class="fu">as_tibble</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">select</span><span class="op">(</span><span class="va">case_id</span>, <span class="va">date_of_onset</span>, <span class="va">date_of_hospitalisation</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">mutate</span><span class="op">(</span>reporting_delay <span class="op">=</span> <span class="va">date_of_hospitalisation</span> <span class="op">-</span> <span class="va">date_of_onset</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">pull</span><span class="op">(</span><span class="va">reporting_delay</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">EpiNow2</span><span class="fu">::</span><span class="fu">estimate_delay</span><span class="op">(</span></span>
<span>    samples <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>    bootstraps <span class="op">=</span> <span class="fl">10</span></span>
<span>  <span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SORTIE<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>WARN [2025-10-13 19:37:14] dist_fit (chain: 1): The largest R-hat is 1.05, indicating chains have not mixed.
Running the chains for more iterations may help. See
https://mc-stan.org/misc/warnings.html#r-hat -
WARN [2025-10-13 19:37:14] dist_fit (chain: 1): Bulk Effective Samples Size (ESS) is too low, indicating posterior means and medians may be unreliable.
Running the chains for more iterations may help. See
https://mc-stan.org/misc/warnings.html#bulk-ess -
WARN [2025-10-13 19:37:14] dist_fit (chain: 1): Tail Effective Samples Size (ESS) is too low, indicating posterior variances and tail quantiles may be unreliable.
Running the chains for more iterations may help. See
https://mc-stan.org/misc/warnings.html#tail-ess -
WARN [2025-10-13 19:37:17] dist_fit (chain: 1): Bulk Effective Samples Size (ESS) is too low, indicating posterior means and medians may be unreliable.
Running the chains for more iterations may help. See
https://mc-stan.org/misc/warnings.html#bulk-ess -
WARN [2025-10-13 19:37:17] dist_fit (chain: 1): Tail Effective Samples Size (ESS) is too low, indicating posterior variances and tail quantiles may be unreliable.
Running the chains for more iterations may help. See
https://mc-stan.org/misc/warnings.html#tail-ess -
WARN [2025-10-13 19:37:19] dist_fit (chain: 1): The largest R-hat is 1.08, indicating chains have not mixed.
Running the chains for more iterations may help. See
https://mc-stan.org/misc/warnings.html#r-hat -
WARN [2025-10-13 19:37:19] dist_fit (chain: 1): Bulk Effective Samples Size (ESS) is too low, indicating posterior means and medians may be unreliable.
Running the chains for more iterations may help. See
https://mc-stan.org/misc/warnings.html#bulk-ess -
WARN [2025-10-13 19:37:19] dist_fit (chain: 1): Tail Effective Samples Size (ESS) is too low, indicating posterior variances and tail quantiles may be unreliable.
Running the chains for more iterations may help. See
https://mc-stan.org/misc/warnings.html#tail-ess -
WARN [2025-10-13 19:37:21] dist_fit (chain: 1): Bulk Effective Samples Size (ESS) is too low, indicating posterior means and medians may be unreliable.
Running the chains for more iterations may help. See
https://mc-stan.org/misc/warnings.html#bulk-ess -
WARN [2025-10-13 19:37:21] dist_fit (chain: 1): Tail Effective Samples Size (ESS) is too low, indicating posterior variances and tail quantiles may be unreliable.
Running the chains for more iterations may help. See
https://mc-stan.org/misc/warnings.html#tail-ess -
WARN [2025-10-13 19:37:23] dist_fit (chain: 1): The largest R-hat is 1.07, indicating chains have not mixed.
Running the chains for more iterations may help. See
https://mc-stan.org/misc/warnings.html#r-hat -
WARN [2025-10-13 19:37:23] dist_fit (chain: 1): Bulk Effective Samples Size (ESS) is too low, indicating posterior means and medians may be unreliable.
Running the chains for more iterations may help. See
https://mc-stan.org/misc/warnings.html#bulk-ess -
WARN [2025-10-13 19:37:23] dist_fit (chain: 1): Tail Effective Samples Size (ESS) is too low, indicating posterior variances and tail quantiles may be unreliable.
Running the chains for more iterations may help. See
https://mc-stan.org/misc/warnings.html#tail-ess -
WARN [2025-10-13 19:37:25] dist_fit (chain: 1): The largest R-hat is 1.07, indicating chains have not mixed.
Running the chains for more iterations may help. See
https://mc-stan.org/misc/warnings.html#r-hat -
WARN [2025-10-13 19:37:25] dist_fit (chain: 1): Bulk Effective Samples Size (ESS) is too low, indicating posterior means and medians may be unreliable.
Running the chains for more iterations may help. See
https://mc-stan.org/misc/warnings.html#bulk-ess -
WARN [2025-10-13 19:37:25] dist_fit (chain: 1): Tail Effective Samples Size (ESS) is too low, indicating posterior variances and tail quantiles may be unreliable.
Running the chains for more iterations may help. See
https://mc-stan.org/misc/warnings.html#tail-ess -
WARN [2025-10-13 19:37:27] dist_fit (chain: 1): The largest R-hat is 1.1, indicating chains have not mixed.
Running the chains for more iterations may help. See
https://mc-stan.org/misc/warnings.html#r-hat -
WARN [2025-10-13 19:37:27] dist_fit (chain: 1): Bulk Effective Samples Size (ESS) is too low, indicating posterior means and medians may be unreliable.
Running the chains for more iterations may help. See
https://mc-stan.org/misc/warnings.html#bulk-ess -
WARN [2025-10-13 19:37:27] dist_fit (chain: 1): Tail Effective Samples Size (ESS) is too low, indicating posterior variances and tail quantiles may be unreliable.
Running the chains for more iterations may help. See
https://mc-stan.org/misc/warnings.html#tail-ess -
WARN [2025-10-13 19:37:30] dist_fit (chain: 1): The largest R-hat is 1.11, indicating chains have not mixed.
Running the chains for more iterations may help. See
https://mc-stan.org/misc/warnings.html#r-hat -
WARN [2025-10-13 19:37:30] dist_fit (chain: 1): Bulk Effective Samples Size (ESS) is too low, indicating posterior means and medians may be unreliable.
Running the chains for more iterations may help. See
https://mc-stan.org/misc/warnings.html#bulk-ess -
WARN [2025-10-13 19:37:30] dist_fit (chain: 1): Tail Effective Samples Size (ESS) is too low, indicating posterior variances and tail quantiles may be unreliable.
Running the chains for more iterations may help. See
https://mc-stan.org/misc/warnings.html#tail-ess -
WARN [2025-10-13 19:37:32] dist_fit (chain: 1): The largest R-hat is 1.06, indicating chains have not mixed.
Running the chains for more iterations may help. See
https://mc-stan.org/misc/warnings.html#r-hat -
WARN [2025-10-13 19:37:32] dist_fit (chain: 1): Bulk Effective Samples Size (ESS) is too low, indicating posterior means and medians may be unreliable.
Running the chains for more iterations may help. See
https://mc-stan.org/misc/warnings.html#bulk-ess -
WARN [2025-10-13 19:37:32] dist_fit (chain: 1): Tail Effective Samples Size (ESS) is too low, indicating posterior variances and tail quantiles may be unreliable.
Running the chains for more iterations may help. See
https://mc-stan.org/misc/warnings.html#tail-ess -
WARN [2025-10-13 19:37:34] dist_fit (chain: 1): Bulk Effective Samples Size (ESS) is too low, indicating posterior means and medians may be unreliable.
Running the chains for more iterations may help. See
https://mc-stan.org/misc/warnings.html#bulk-ess -
WARN [2025-10-13 19:37:34] dist_fit (chain: 1): Tail Effective Samples Size (ESS) is too low, indicating posterior variances and tail quantiles may be unreliable.
Running the chains for more iterations may help. See
https://mc-stan.org/misc/warnings.html#tail-ess - </code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SORTIE<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>- lognormal distribution (max: 22):
  meanlog:
    - normal distribution:
      mean:
        0.2
      sd:
        0.12
  sdlog:
    - normal distribution:
      mean:
        0.99
      sd:
        0.095</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="section level4">
<h4 id="temps-de-génération">Temps de génération<a class="anchor" aria-label="anchor" href="#temps-de-g%C3%A9n%C3%A9ration"></a>
</h4>
<p>Nous devons également spécifier une distribution pour le temps de
génération. Nous utiliserons ici une distribution log-normale avec une
moyenne de 3,6 et un écart-type de 3,1 (<a href="https://doi.org/10.2807/1560-7917.ES.2020.25.17.2000257" class="external-link">Ganyani
et al. 2020</a>).</p>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">generation_time_variable</span> <span class="op">&lt;-</span> <span class="fu">EpiNow2</span><span class="fu">::</span><span class="fu">LogNormal</span><span class="op">(</span></span>
<span>  mean <span class="op">=</span> <span class="fu">EpiNow2</span><span class="fu">::</span><span class="fu">Normal</span><span class="op">(</span>mean <span class="op">=</span> <span class="fl">3.6</span>, sd <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span>,</span>
<span>  sd <span class="op">=</span> <span class="fu">EpiNow2</span><span class="fu">::</span><span class="fu">Normal</span><span class="op">(</span>mean <span class="op">=</span> <span class="fl">3.1</span>, sd <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span>,</span>
<span>  max <span class="op">=</span> <span class="fl">20</span></span>
<span><span class="op">)</span></span></code></pre>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="trouver-des-estimations">Trouver des estimations<a class="anchor" aria-label="anchor" href="#trouver-des-estimations"></a>
</h2>
<hr class="half-width">
<p>La fonction <code>epinow()</code> est une “enveloppe” pour la
fonction <code>estimate_infections()</code> utilisée pour estimer les
cas par date d’infection. La distribution du temps de génération et la
distribution des délais doivent être transmises à l’aide des fonctions
<code>generation_time_opts()</code> et <code>delay_opts()</code>
respectivement.</p>
<p>Il existe de nombreuses autres entrées qui peuvent être transmises à
<code>epinow()</code> voir <code>?EpiNow2::epinow()</code> pour plus de
détails. Une entrée optionnelle consiste à spécifier un a priori
<em>log-normal</em> pour le nombre de reproduction effectif <span class="math inline">\(R_t\)</span> au début de l’épidémie. Nous
spécifions une moyenne de 2 jours et un écart-type de 2 jours comme
arguments de la commande <code>prior</code> dans
<code>rt_opts()</code>:</p>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># define Rt prior distribution</span></span>
<span><span class="va">rt_prior</span> <span class="op">&lt;-</span> <span class="fu">EpiNow2</span><span class="fu">::</span><span class="fu">rt_opts</span><span class="op">(</span>prior <span class="op">=</span> <span class="fu">EpiNow2</span><span class="fu">::</span><span class="fu">LogNormal</span><span class="op">(</span>mean <span class="op">=</span> <span class="fl">2</span>, sd <span class="op">=</span> <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div id="inférence-bayésienne-à-laide-de-stan" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="inférence-bayésienne-à-laide-de-stan" class="callout-inner">
<h3 class="callout-title">Inférence bayésienne à l’aide de Stan</h3>
<div class="callout-content">
<p>L’inférence bayésienne est réalisée à l’aide de méthodes MCMC avec le
programme <a href="https://mc-stan.org/" class="external-link">Stan</a>. Les fonctions Stan
disposent d’un certain nombre d’entrées par défaut, notamment le nombre
de chaînes et le nombre d’échantillons par chaîne (voir
<code>?EpiNow2::stan_opts()</code>).</p>
<p>Pour réduire le temps de calcul, nous pouvons exécuter les chaînes en
parallèle. Pour ce faire, nous devons définir le nombre de cœurs à
utiliser. Par défaut, 4 chaînes MCMC sont exécutées (voir
<code>stan_opts()$chains</code>), nous pouvons donc définir un nombre
égal de cœurs à utiliser en parallèle comme suit :</p>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">withr</span><span class="fu">::</span><span class="fu">local_options</span><span class="op">(</span><span class="fu">base</span><span class="fu">::</span><span class="fu">list</span><span class="op">(</span>mc.cores <span class="op">=</span> <span class="fl">4</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<p>Pour connaître le nombre maximal de cœurs disponibles sur votre
machine, utilisez la commande <code>parallel::detectCores()</code>.</p>
</div>
</div>
</div>
<div id="checklist2" class="callout checklist">
<div class="callout-square">
<i class="callout-icon" data-feather="check-square"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Liste de vérification</h3>
<div class="callout-content">
<p><strong>Note :</strong> Dans le code ci-dessous <code>_fixed</code>
les distributions sont utilisées à la place de <code>_variable</code>
(distributions de retard avec incertitude). Cela permet d’accélérer le
temps de calcul. Il est généralement recommandé d’utiliser des
distributions variables qui tiennent compte d’une incertitude
supplémentaire.</p>
<div class="codewrapper sourceCode" id="cb24">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># fixed alternatives</span></span>
<span><span class="va">generation_time_fixed</span> <span class="op">&lt;-</span> <span class="fu">EpiNow2</span><span class="fu">::</span><span class="fu">LogNormal</span><span class="op">(</span></span>
<span>  mean <span class="op">=</span> <span class="fl">3.6</span>,</span>
<span>  sd <span class="op">=</span> <span class="fl">3.1</span>,</span>
<span>  max <span class="op">=</span> <span class="fl">20</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">reporting_delay_fixed</span> <span class="op">&lt;-</span> <span class="fu">EpiNow2</span><span class="fu">::</span><span class="fu">LogNormal</span><span class="op">(</span></span>
<span>  mean <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  sd <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  max <span class="op">=</span> <span class="fl">10</span></span>
<span><span class="op">)</span></span></code></pre>
</div>
</div>
</div>
</div>
<p>Vous êtes maintenant prêt à exécuter <code>EpiNow2::epinow()</code>
pour estimer le nombre de reproduction variable dans le temps pour les
90 premiers jours :</p>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">estimates</span> <span class="op">&lt;-</span> <span class="fu">EpiNow2</span><span class="fu">::</span><span class="fu">epinow</span><span class="op">(</span></span>
<span>  <span class="co"># reported cases</span></span>
<span>  data <span class="op">=</span> <span class="va">cases</span>,</span>
<span>  <span class="co"># delays</span></span>
<span>  generation_time <span class="op">=</span> <span class="fu">EpiNow2</span><span class="fu">::</span><span class="fu">generation_time_opts</span><span class="op">(</span><span class="va">generation_time_fixed</span><span class="op">)</span>,</span>
<span>  delays <span class="op">=</span> <span class="fu">EpiNow2</span><span class="fu">::</span><span class="fu">delay_opts</span><span class="op">(</span><span class="va">incubation_period_fixed</span> <span class="op">+</span> <span class="va">reporting_delay_fixed</span><span class="op">)</span>,</span>
<span>  <span class="co"># prior</span></span>
<span>  rt <span class="op">=</span> <span class="va">rt_prior</span></span>
<span><span class="op">)</span></span></code></pre>
</div>
<!-- ``{r, message = FALSE,warning=FALSE, eval = TRUE, echo=FALSE} -->
<!-- estimates <- EpiNow2::epinow( -->
<!-- # cas rapportés -->
<!-- données = cas, -->
<!-- # retards -->
<!-- generation_time = EpiNow2::generation_time_opts(generation_time_fixed), -->
<!-- delays = EpiNow2::delay_opts(incubation_period_fixed + reporting_delay_fixed), -->
<!-- # prior -->
<!-- rt = rt_prior, -->
<!-- stan = EpiNow2::stan_opts(method = "vb") -->
<!-- ) -->
<!-- ``` -->
<div id="nattendez-pas-que-cela-se-poursuive" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="nattendez-pas-que-cela-se-poursuive" class="callout-inner">
<h3 class="callout-title">N’attendez pas que cela se poursuive</h3>
<div class="callout-content">
<p>Pour les besoins de ce tutoriel, nous pouvons optionnellement
utiliser <code>EpiNow2::stan_opts()</code> pour réduire le temps de
calcul. Nous pouvons spécifier un nombre fixe de
<code>samples = 1000</code> et <code>chains = 2</code> aux
<code>stan</code> l’argument de la <code>EpiNow2::epinow()</code> de la
fonction. Cette opération devrait prendre environ 3 minutes.</p>
<p>&lt;Nous pouvons optionnellement définir
<code>stan = stan_opts(method = "vb")</code> pour utiliser une méthode
d’échantillonnage approximative. Cela devrait prendre moins d’une
minute. –&gt;</p>
<div class="codewrapper sourceCode" id="cb26">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># you can add the `stan` argument</span></span>
<span><span class="fu">EpiNow2</span><span class="fu">::</span><span class="fu">epinow</span><span class="op">(</span></span>
<span>  <span class="va">...</span>,</span>
<span>  stan <span class="op">=</span> <span class="fu">EpiNow2</span><span class="fu">::</span><span class="fu">stan_opts</span><span class="op">(</span>samples <span class="op">=</span> <span class="fl">1000</span>, chains <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre>
</div>
<p><strong>Rappelez-vous :</strong> En utilisant un nombre approprié d’
<em>échantillons</em> et de <em>chaînes</em> est cruciale pour garantir
la convergence et obtenir des estimations fiables dans les calculs
bayésiens utilisant Stan. L’obtention de résultats plus précis se fait
au détriment de la vitesse.</p>
</div>
</div>
</div>
<div class="section level3">
<h3 id="résultats">Résultats<a class="anchor" aria-label="anchor" href="#r%C3%A9sultats"></a>
</h3>
<p>Nous pouvons extraire et visualiser des estimations du nombre de
reproductions effectives au fil du temps :</p>
<div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">estimates</span><span class="op">$</span><span class="va">plots</span><span class="op">$</span><span class="va">R</span></span></code></pre>
</div>
<figure><img src="fig/quantify-transmissibility-rendered-unnamed-chunk-19-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>L’incertitude des estimations augmente avec le temps. Cela s’explique
par le fait que les estimations sont fondées sur des données
antérieures, c’est-à-dire sur les périodes de retard. Cette différence
d’incertitude est classée dans les catégories suivantes
<strong>Estimation</strong> (vert) utilise toutes les données et
<strong>Estimation basée sur des données partielles</strong> (orange)
des estimations basées sur moins de données (parce que les infections
qui se sont produites à l’époque sont plus susceptibles de ne pas avoir
encore été observées) et qui ont donc des intervalles de plus en plus
larges vers la date du dernier point de données. Enfin, les
<strong>Prévision</strong> (violet) est une projection dans le
temps.</p>
<p>Nous pouvons également visualiser l’estimation du taux de croissance
dans le temps :</p>
<div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">estimates</span><span class="op">$</span><span class="va">plots</span><span class="op">$</span><span class="va">growth_rate</span></span></code></pre>
</div>
<figure><img src="fig/quantify-transmissibility-rendered-unnamed-chunk-20-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>Pour extraire un résumé des principaux paramètres de transmission à
dernière date* dans les données :</p>
<div class="codewrapper sourceCode" id="cb29">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">summary</span><span class="op">(</span><span class="va">estimates</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SORTIE<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>                        measure               estimate
                         &lt;char&gt;                 &lt;char&gt;
1:       New infections per day   7823 (4608 -- 13036)
2:   Expected change in reports      Likely decreasing
3:   Effective reproduction no.     0.96 (0.73 -- 1.2)
4:               Rate of growth -0.016 (-0.1 -- 0.074)
5: Doubling/halving time (days)      -44 (9.4 -- -6.7)</code></pre>
</div>
<p>Ces estimations étant basées sur des données partielles, elles
présentent un large intervalle d’incertitude.</p>
<ul>
<li><p>Le résumé de notre analyse montre que le changement attendu dans
les déclarations est de Likely decreasing avec l’estimation des
nouvelles infections 7823 (4608 – 13036).</p></li>
<li><p>Le nombre effectif de reproduction <span class="math inline">\(R_t\)</span> (à la dernière date des données) est
de 0.96 (0.73 – 1.2).</p></li>
<li><p>Le taux de croissance exponentiel du nombre de cas est de -0.016
(-0.1 – 0.074).</p></li>
<li><p>Le temps de doublement (le temps nécessaire pour que le nombre de
cas double) est de -44 (9.4 – -6.7).</p></li>
</ul>
<div id="expected-change-in-reports" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="expected-change-in-reports" class="callout-inner">
<h3 class="callout-title"><code>Expected change in reports</code></h3>
<div class="callout-content">
<p>Un facteur décrivant l’évolution attendue des déclarations sur la
base de la probabilité a posteriori que <span class="math inline">\(R_t
&lt; 1\)</span>.</p>
<center>
<table class="table">
<thead><tr class="header">
<th>Probabilité (<span class="math inline">\(p\)</span>)</th>
<th>Changement attendu (<span class="math inline">\(p\)</span>)</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>p &lt; 0.05$</td>
<td>Augmentation</td>
</tr>
<tr class="even">
<td>0,05$ p&lt; 0,4$</td>
<td>Augmentation probable</td>
</tr>
<tr class="odd">
<td>0,4$ p&lt; 0,6$</td>
<td>Stable</td>
</tr>
<tr class="even">
<td>0,6$ p &lt; 0,95$</td>
<td>Vraisemblablement décroissante</td>
</tr>
<tr class="odd">
<td>0,95$ p $</td>
<td>Décroissante</td>
</tr>
</tbody>
</table>
</center>
</div>
</div>
</div>
<div id="intervalles-crédibles" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="intervalles-crédibles" class="callout-inner">
<h3 class="callout-title">Intervalles crédibles</h3>
<div class="callout-content">
<p>En tout <a href="https://epiforecasts.io/EpiNow2/" class="external-link">EpiNow2</a> les régions ombrées reflètent les
intervalles de crédibilité de 90 %, 50 % et 20 %, du plus clair au plus
foncé.</p>
</div>
</div>
</div>
<div id="checklist3" class="callout checklist">
<div class="callout-square">
<i class="callout-icon" data-feather="check-square"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Liste de vérification</h3>
<div class="callout-content">
<p><code>EpiNow2</code> peut être utilisé pour estimer les paramètres de
transmission à partir des données relatives aux cas, à tout moment de
l’évolution d’une épidémie. La fiabilité de ces estimations dépend de la
qualité des données et du choix approprié des distributions de délais.
Dans le prochain tutoriel, nous apprendrons à faire des prévisions et
nous étudierons certaines des options d’inférence supplémentaires
disponibles dans le logiciel <code>EpiNow2</code>.</p>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="défi">Défi<a class="anchor" aria-label="anchor" href="#d%C3%A9fi"></a>
</h2>
<hr class="half-width">
<div id="challenge1" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Défi</h3>
<div class="callout-content">
<p><strong>Quantifier l’hétérogénéité géographique</strong></p>
<p>Les données relatives au début de la pandémie de COVID-19 au
Royaume-Uni proviennent du package R <a href="https://www.reconverse.org/incidence2/" class="external-link">incidence2</a>
comprennent la région dans laquelle les cas ont été enregistrés. Pour
obtenir des estimations régionales du nombre effectif de reproductions
et de cas, nous devons formater les données de manière à ce qu’elles
comportent trois colonnes :</p>
<ul>
<li>
<code>date</code> la date,</li>
<li>
<code>region</code>: la région,</li>
<li>
<code>confirm</code> le nombre de déclarations de maladies
(confirmées) pour une région à une date donnée.</li>
</ul>
<p>Générer des estimations régionales de Rt à partir des
<code>incidence2::covidregionaldataUK</code> à partir de la base de
données :</p>
<ul>
<li>utiliser <a href="https://www.reconverse.org/incidence2/" class="external-link">incidence2</a> pour convertir les données
agrégées en données d’incidence par la variable
<code>region</code>,</li>
<li>conserver les 90 premières dates pour toutes les régions,</li>
<li>estimer le Rt par région en utilisant le temps de génération défini
et les retards dans cet épisode.</li>
</ul>
<div class="codewrapper sourceCode" id="cb31">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">regional_cases</span> <span class="op">&lt;-</span> <span class="fu">incidence2</span><span class="fu">::</span><span class="va">covidregionaldataUK</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co"># use {tidyr} to preprocess missing values</span></span>
<span>  <span class="fu">tidyr</span><span class="fu">::</span><span class="fu">replace_na</span><span class="op">(</span><span class="fu">base</span><span class="fu">::</span><span class="fu">list</span><span class="op">(</span>cases_new <span class="op">=</span> <span class="fl">0</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionHint1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button hint-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseHint1" aria-expanded="false" aria-controls="collapseHint1">
  <h4 class="accordion-header" id="headingHint1"> Donner un indice </h4>
</button>
<div id="collapseHint1" class="accordion-collapse collapse" data-bs-parent="#accordionHint1" aria-labelledby="headingHint1">
<div class="accordion-body">
<p>Pour manipuler les données, vous pouvez</p>
<div class="codewrapper sourceCode" id="cb32">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">regional_cases</span> <span class="op">&lt;-</span> <span class="fu">incidence2</span><span class="fu">::</span><span class="va">covidregionaldataUK</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co"># use {tidyr} to preprocess missing values</span></span>
<span>  <span class="fu">tidyr</span><span class="fu">::</span><span class="fu">replace_na</span><span class="op">(</span><span class="fu">base</span><span class="fu">::</span><span class="fu">list</span><span class="op">(</span>cases_new <span class="op">=</span> <span class="fl">0</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co"># use {incidence2} to convert aggregated data to incidence data</span></span>
<span>  <span class="fu">incidence2</span><span class="fu">::</span><span class="fu">incidence</span><span class="op">(</span></span>
<span>    date_index <span class="op">=</span> <span class="st">"date"</span>,</span>
<span>    groups <span class="op">=</span> <span class="st">"region"</span>,</span>
<span>    counts <span class="op">=</span> <span class="st">"cases_new"</span>,</span>
<span>    count_values_to <span class="op">=</span> <span class="st">"confirm"</span>,</span>
<span>    date_names_to <span class="op">=</span> <span class="st">"date"</span>,</span>
<span>    complete_dates <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>  <span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">select</span><span class="op">(</span><span class="op">-</span><span class="va">count_variable</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">filter</span><span class="op">(</span><span class="va">date</span> <span class="op">&lt;</span> <span class="fu">ymd</span><span class="op">(</span><span class="fl">20200301</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<p>Pour apprendre à faire l’estimation régionale de Rt, lisez la section
de la vignette “Get started” sur <code>regional_epinow()</code> à
l’adresse <a href="https://epiforecasts.io/EpiNow2/articles/EpiNow2.html#regional_epinow" class="external-link uri">https://epiforecasts.io/EpiNow2/articles/EpiNow2.html#regional_epinow</a></p>
</div>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Montrer la solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<p>Pour obtenir des estimations régionales, nous utilisons les mêmes
arguments de <code>epinow()</code> dans la fonction
<code>regional_epinow()</code>:</p>
<div class="codewrapper sourceCode" id="cb33">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">estimates_regional</span> <span class="op">&lt;-</span> <span class="fu">EpiNow2</span><span class="fu">::</span><span class="fu">regional_epinow</span><span class="op">(</span></span>
<span>  <span class="co"># cases</span></span>
<span>  data <span class="op">=</span> <span class="va">regional_cases</span>,</span>
<span>  <span class="co"># delays</span></span>
<span>  generation_time <span class="op">=</span> <span class="fu">EpiNow2</span><span class="fu">::</span><span class="fu">generation_time_opts</span><span class="op">(</span><span class="va">generation_time_fixed</span><span class="op">)</span>,</span>
<span>  delays <span class="op">=</span> <span class="fu">EpiNow2</span><span class="fu">::</span><span class="fu">delay_opts</span><span class="op">(</span><span class="va">incubation_period_fixed</span> <span class="op">+</span> <span class="va">reporting_delay_fixed</span><span class="op">)</span>,</span>
<span>  <span class="co"># prior</span></span>
<span>  rt <span class="op">=</span> <span class="va">rt_prior</span></span>
<span><span class="op">)</span></span></code></pre>
</div>
<p>Visualisez les résultats avec :</p>
<div class="codewrapper sourceCode" id="cb34">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">estimates_regional</span><span class="op">$</span><span class="va">summary</span><span class="op">$</span><span class="va">summarised_results</span><span class="op">$</span><span class="va">table</span></span>
<span></span>
<span><span class="va">estimates_regional</span><span class="op">$</span><span class="va">summary</span><span class="op">$</span><span class="va">plots</span><span class="op">$</span><span class="va">R</span></span></code></pre>
</div>
<figure><img src="fig/quantify-transmissibility-regional.png" class="figure mx-auto d-block"></figure>
</div>
</div>
</div>
</div>
<!-- ::::::::::::::::::::::::: : testimonial -->
<!-- ### le package i2extras -->
<!-- ::::::::::::::::::::::::: : -->
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Points clés</h3>
<div class="callout-content">
<ul>
<li>Les paramètres de transmission peuvent être estimés à partir des
données du cas après prise en compte des retards.</li>
<li>L’incertitude peut être prise en compte dans la distribution des
retards.</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-delays-functions"><p>Content from <a href="delays-functions.html">Utiliser les distributions de délais dans l'analyse</a></p>
<hr>
<p>Dernière mise à jour le 2025-10-13 |

        <a href="https://github.com/epiverse-trace/tutorials-middle-fr/edit/main/episodes/delays-functions.Rmd" class="external-link">Modifier cette page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Afficher toutes les solutions " data-collapse="Cacher toutes les solutions "> Afficher toutes les solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Vue d'ensemble</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>Comment réutiliser les délais enregistrés dans le
<a href="https://github.com/epiverse-trace/epiparameter/" class="external-link">epiparameter</a> avec mon pipeline d’analyse existant ?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectifs</h3>
<ul>
<li>Utilisez les fonctions de distribution pour les distributions
continues et discrètes enregistrées en tant que objets
<code>&lt;epiparameter&gt;</code>.</li>
<li>Convertissez une distribution continue en distribution discrète à
l’aide de la fonction <a href="https://github.com/epiverse-trace/epiparameter/" class="external-link">epiparameter</a>.</li>
<li>Connecter les sorties de <a href="https://github.com/epiverse-trace/epiparameter/" class="external-link">epiparameter</a> avec les
entrées <a href="https://epiforecasts.io/EpiNow2/" class="external-link">EpiNow2</a>.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div id="conditions-préalables" class="callout prereq">
<div class="callout-square">
<i class="callout-icon" data-feather="check"></i>
</div>
<div id="conditions-préalables" class="callout-inner">
<h3 class="callout-title">Conditions préalables</h3>
<div class="callout-content">
<ul>
<li>Compléter le tutoriel <a href="delays-functions.html">Accéder aux
distribution des délais épidémiologiques</a>
</li>
<li>Compléter le tutoriel <a href="quantify-transmissibility.html">Quantifier la
transmission</a>
</li>
</ul>
<p>Pour cet épisode, vous devez vous familiariser avec :</p>
<p><strong>Science des données</strong> Programmation de base avec
R.</p>
<p><strong>Statistiques</strong> : Distributions de probabilité.</p>
<p><strong>Théorie des épidémies</strong> : paramètres épidémiologiques,
périodes de temps, nombre reproductif effectif.</p>
</div>
</div>
</div>
<section><h2 class="section-heading" id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<hr class="half-width">
<p>Cet épisode intégrera le contenu des deux épisodes précédents.
Commençons par charger le package<a href="https://github.com/epiverse-trace/epiparameter/" class="external-link">epiparameter</a> et
<a href="https://epiforecasts.io/EpiNow2/" class="external-link">EpiNow2</a> . Nous utiliserons le tube <code>%&gt;%</code>,
quelques verbes de <a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a> et <a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a> et
donc appelons aussi à le package <a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a> :</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">epiparameter</span><span class="op">)</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">EpiNow2</span><span class="op">)</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">tidyverse</span><span class="op">)</span></span></code></pre>
</div>
<p>Pour résumer, nous avons appris que <a href="https://github.com/epiverse-trace/epiparameter/" class="external-link">epiparameter</a> nous
aide à <em>choisir</em> un ensemble spécifique de paramètres
épidémiologiques issus de la littérature, au lieu de les copier/coller
<em>à la main</em>:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid_serialint</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">epiparameter</span><span class="fu">::</span><span class="fu">epiparameter_db</span><span class="op">(</span></span>
<span>    disease <span class="op">=</span> <span class="st">"covid"</span>,</span>
<span>    epi_name <span class="op">=</span> <span class="st">"serial"</span>,</span>
<span>    single_epiparameter <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>  <span class="op">)</span></span></code></pre>
</div>
<p>Nous avons maintenant un paramètre épidémiologique que nous pouvons
utiliser dans notre analyse ! Par exemple, pour quantifier la
transmission, nous pouvons utiliser l’intervalle sériel comme
approximation du temps de génération. Dans le bloc de code ci-dessous,
nous avons remplacé un des paramètres <strong>statistiques
sommaires</strong> en <code>EpiNow2::LogNormal()</code></p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">generation_time</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu">EpiNow2</span><span class="fu">::</span><span class="fu">LogNormal</span><span class="op">(</span></span>
<span>    mean <span class="op">=</span> <span class="va">covid_serialint</span><span class="op">$</span><span class="va">summary_stats</span><span class="op">$</span><span class="va">mean</span>, <span class="co"># replaced!</span></span>
<span>    sd <span class="op">=</span> <span class="va">covid_serialint</span><span class="op">$</span><span class="va">summary_stats</span><span class="op">$</span><span class="va">sd</span>, <span class="co"># replaced!</span></span>
<span>    max <span class="op">=</span> <span class="fl">20</span></span>
<span>  <span class="op">)</span></span></code></pre>
</div>
<p>Dans cet épisode, nous utiliserons les <strong>fonctions de
distribution</strong> qui <a href="https://github.com/epiverse-trace/epiparameter/" class="external-link">epiparameter</a> fournit pour
obtenir une médiane, valeur maximale (<code>max</code>), percentiles ou
quantiles pour tout objet de classe <code>&lt;epiparameter&gt;</code>.
Ils vous seront utiles en aval dans votre pipeline d’analyse !</p>
<div id="le-double-point-virgule" class="callout checklist">
<div class="callout-square">
<i class="callout-icon" data-feather="check-square"></i>
</div>
<div id="le-double-point-virgule" class="callout-inner">
<h3 class="callout-title">Le double point-virgule</h3>
<div class="callout-content">
<p>Le double point-virgule <code>::</code> dans R vous permet d’appeler
une fonction spécifique d’un package sans charger l’ensemble du package
dans l’environnement actuel.</p>
<p>Par example, <code>dplyr::filter(data, condition)</code> utilise la
fonction<code>filter()</code> du paquet `{dplyr}’.</p>
<p>Cela nous permet de nous souvenir des fonctions du paquet et d’éviter
les conflits d’espace de noms en spécifiant explicitement la fonction du
paquet à utiliser lorsque plusieurs paquets ont des fonctions portant le
même nom.</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="fonctions-de-distribution">Fonctions de distribution<a class="anchor" aria-label="anchor" href="#fonctions-de-distribution"></a>
</h2>
<hr class="half-width">
<p>w En R, toutes les distributions statistiques disposent de fonctions
qui permettant d’accéder aux éléments suivants :</p>
<ul>
<li>
<code>density()</code>: fonction de densité de probabilité
(<em>FDP</em>),</li>
<li>
<code>cdf()</code> fonction de distribution cumulative
(<strong>FDC</strong>),</li>
<li>
<code>quantile()</code>: <strong>Quantile</strong> et</li>
<li>
<code>generate()</code>: <strong>Aléatoire</strong> valeurs
aléatoires de la distribution donnée.</li>
</ul>
<div id="fonctions-pour-la-loi-normale" class="callout checklist">
<div class="callout-square">
<i class="callout-icon" data-feather="check-square"></i>
</div>
<div id="fonctions-pour-la-loi-normale" class="callout-inner">
<h3 class="callout-title">Fonctions pour la loi normale</h3>
<div class="callout-content">
<p>Si vous en avez besoin, lisez en détail la rubrique <a href="https://web.archive.org/web/20240210121034/https://sakai.unc.edu/access/content/group/3d1eb92e-7848-4f55-90c3-7c72a54e7e43/public/docs/lectures/lecture13.htm#probfunc" class="external-link">Fonctions
de probabilité R pour la loinormale</a> Pour en savoir plus sur les
fonctions de probabilité de la loi normale, lisez les définitions de
chacune d’entre elles et identifiez la partie de la loi dans laquelle
elles se situent !</p>
<figure><img src="fig/fig5a-normaldistribution.png" alt="Les quatre fonctions de probabilité de la loi normale (Jack Weiss, 2012)" class="figure mx-auto d-block"><div class="figcaption">Les quatre fonctions de probabilité de la loi
normale (<a href="https://web.archive.org/web/20240210121034/https://sakai.unc.edu/access/content/group/3d1eb92e-7848-4f55-90c3-7c72a54e7e43/public/docs/lectures/lecture13.htm#probfunc" class="external-link">Jack
Weiss, 2012</a>)</div>
</figure>
</div>
</div>
</div>
<p>Si vous regardez <code>?stats::Distributions</code>, chaque type de
distribution possède un ensemble unique de fonctions. Cependant,
<a href="https://github.com/epiverse-trace/epiparameter/" class="external-link">epiparameter</a> vous donne les mêmes quatre fonctions pour
accéder à chacune des valeurs ci-dessus pour n’importe quelle objet
<code>&lt;epiparameter&gt;</code> de votre choix !</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># plot this to have a visual reference</span></span>
<span></span>
<span><span class="co"># continuous distribution</span></span>
<span><span class="fu">plot</span><span class="op">(</span><span class="va">covid_serialint</span>, xlim <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="fl">0</span>, <span class="fl">20</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/delays-functions-rendered-unnamed-chunk-3-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># the density value at quantile value of 10 (days)</span></span>
<span><span class="fu">density</span><span class="op">(</span><span class="va">covid_serialint</span>, at <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SORTIE<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 0.01911607</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># the cumulative probability at quantile value of 10 (days)</span></span>
<span><span class="fu">epiparameter</span><span class="fu">::</span><span class="fu">cdf</span><span class="op">(</span><span class="va">covid_serialint</span>, q <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SORTIE<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 0.9466605</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># the quantile value (day) at a cumulative probability of 60%</span></span>
<span><span class="fu">quantile</span><span class="op">(</span><span class="va">covid_serialint</span>, p <span class="op">=</span> <span class="fl">0.6</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SORTIE<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 4.618906</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># generate 10 random values (days) given</span></span>
<span><span class="co"># the distribution family and its parameters</span></span>
<span><span class="fu">epiparameter</span><span class="fu">::</span><span class="fu">generate</span><span class="op">(</span><span class="va">covid_serialint</span>, times <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SORTIE<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code> [1] 7.892841 4.011776 2.564901 8.939971 3.292421 3.736677 4.778296 3.998719
 [9] 6.220060 3.701803</code></pre>
</div>

<div id="fenêtre-pour-la-recherche-de-contact-et-lintervalle-sériel" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="fenêtre-pour-la-recherche-de-contact-et-lintervalle-sériel" class="callout-inner">
<h3 class="callout-title">Fenêtre pour la recherche de contact et l’intervalle sériel</h3>
<div class="callout-content">
<p>L’<strong>intervalle sériel</strong> est important pour
l’optimisation de la recherche des contacts, car il fournit une fenêtre
temporelle pour l’endiguement de la propagation d’une maladie (<a href="https://academic.oup.com/aje/article/158/11/1039/162725" class="external-link">Fine,
2003</a>). En fonction de l’intervalle sériel, nous pouvons évaluer la
nécessité d’augmenter le nombre de jours pris en compte pour la
recherche des contacts afin d’inclure un plus grand nombre de contacts
rétrospectifs (<a href="https://assets.publishing.service.gov.uk/media/61e9ab3f8fa8f50597fb3078/S0523_Oxford_-_Backwards_contact_tracing.pdf" class="external-link">Davis
et al., 2020</a>).</p>
<p>Avec l’intervalle sériel COVID-19 (<code>covid_serialint</code>),
calculez :</p>
<ul>
<li>Quelle proportion supplémentaire des cas rétrospectifs pourrait être
capturée si la méthode de recherche des contacts prenait en compte les
contacts jusqu’à 6 jours avant l’apparition de la maladie par rapport à
2 jours avant l’apparition de la maladie ?</li>
</ul>
</div>
</div>
</div>
<div id="accordionHint1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button hint-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseHint1" aria-expanded="false" aria-controls="collapseHint1">
  <h4 class="accordion-header" id="headingHint1"> Donner un indice </h4>
</button>
<div id="collapseHint1" class="accordion-collapse collapse" aria-labelledby="headingHint1" data-bs-parent="#accordionHint1">
<div class="accordion-body">
<p>Dans la figure 5 du <a href="https://web.archive.org/web/20240210121034/https://sakai.unc.edu/access/content/group/3d1eb92e-7848-4f55-90c3-7c72a54e7e43/public/docs/lectures/lecture13.htm#probfunc" class="external-link">Fonctions
de probabilité R pour la loi normale</a> la partie ombrée représente une
probabilité cumulée de <code>0.997</code> pour la valeur du quantile à
<code>x = 2</code>.</p>
</div>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Montrer la solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">plot</span><span class="op">(</span><span class="va">covid_serialint</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">epiparameter</span><span class="fu">::</span><span class="fu">cdf</span><span class="op">(</span><span class="va">covid_serialint</span>, q <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SORTIE<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 0.1111729</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">epiparameter</span><span class="fu">::</span><span class="fu">cdf</span><span class="op">(</span><span class="va">covid_serialint</span>, q <span class="op">=</span> <span class="fl">6</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SORTIE<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 0.7623645</code></pre>
</div>
<p>Étant donné l’intervalle sériel COVID-19 :</p>
<ul>
<li><p>Une méthode de recherche des contacts prenant en compte les
contacts jusqu’à 2 jours avant l’apparition de la maladie permettra
d’identifier environ 11,1 % des cas rétrospectifs.</p></li>
<li><p>Si cette période est étendue à 6 jours avant l’apparition de la
maladie, 76,2 % des cas rétrospectifs pourraient être pris en
compte.</p></li>
</ul>
</div>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Que se passerait-il si </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<p>Si nous échangeons la question entre les jours et la probabilité
cumulée à :</p>
<ul>
<li>Considèrent les cas secondaires, combien de jours après l’apparition
des symptômes des cas primaires peut-on s’attendre à ce que 55 % des
symptômes apparaissent ?</li>
</ul>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">quantile</span><span class="op">(</span><span class="va">covid_serialint</span>, p <span class="op">=</span> <span class="fl">0.55</span><span class="op">)</span></span></code></pre>
</div>
<p>L’interprétation pourrait être la suivante :</p>
<ul>
<li>Les 55 % de cas secondaires seront devenus symptômatique 4,2 jours
après l’apparition des symptômes des cas primaires.</li>
</ul>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="discrétiser-une-distribution-continue">Discrétiser une distribution continue<a class="anchor" aria-label="anchor" href="#discr%C3%A9tiser-une-distribution-continue"></a>
</h2>
<hr class="half-width">
<p>Nous nous rapprochons de la fin ! <code>EpiNow2::LogNormal()</code> a
encore besoin d’une valeur maximale (<code>max</code>).</p>
<p>Une façon d’y parvenir est d’obtenir la valeur du quantile pour le
99e percentile de la distribution ou <code>0.99</code> probabilité
cumulative de la distribution. Pour le faire, nous devons accéder à
l’ensemble des fonctions de distribution de notre objet
<code>&lt;epiparameter&gt;</code>.</p>
<p>Nous pouvons utiliser l’ensemble des fonctions de distribution d’un
distribution continue (comme ci-dessus). Cependant, ces valeurs seront
des nombres continus. Nous pouvons <strong>discrétiser</strong> la
distribution continue enregistréedans notre
objet<code>&lt;epiparameter&gt;</code> pour obtenir des valeurs
discrètes à partir d’une distribution continue.</p>
<p>Lorsque nous <code>epiparameter::discretise()</code> la distribution
continue, nous obtenons une distribution <strong>discrète</strong> :</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid_serialint_discrete</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">epiparameter</span><span class="fu">::</span><span class="fu">discretise</span><span class="op">(</span><span class="va">covid_serialint</span><span class="op">)</span></span>
<span></span>
<span><span class="va">covid_serialint_discrete</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SORTIE<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Disease: COVID-19
Pathogen: SARS-CoV-2
Epi Parameter: serial interval
Study: Nishiura H, Linton N, Akhmetzhanov A (2020). "Serial interval of novel
coronavirus (COVID-19) infections." _International Journal of
Infectious Diseases_. doi:10.1016/j.ijid.2020.02.060
&lt;https://doi.org/10.1016/j.ijid.2020.02.060&gt;.
Distribution: discrete lnorm (days)
Parameters:
  meanlog: 1.386
  sdlog: 0.568</code></pre>
</div>
<p>Nous identifions ce changement dans la <code>Distribution:</code>
ligne de sortie de l’objet <code>&lt;epiparameter&gt;</code>. Vérifiez à
nouveau cette ligne :</p>
<pre><code>Distribution: discrete lnorm</code></pre>
<p>Alors que pour une distribution <strong>continue</strong> nous
traçons la courbe de la <em>Fonction de densité de probabilité
(FDP)</em> pour une distribution discrète, nous traçons la <em>Fonction
de masse de probabilité (FMP)</em>:</p>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># discrete distribution</span></span>
<span><span class="fu">plot</span><span class="op">(</span><span class="va">covid_serialint_discrete</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/delays-functions-rendered-unnamed-chunk-9-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>Pour obtenir enfin une <code>max</code>, accédons à la valeur du
quantile du 99e percentile ou <code>0.99</code> de la distribution à
l’aide de la fonction <code>prob_dist$q</code> de la même manière que
nous accédons à les valeurs <code>summary_stats</code>.</p>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid_serialint_discrete_max</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">quantile</span><span class="op">(</span><span class="va">covid_serialint_discrete</span>, p <span class="op">=</span> <span class="fl">0.99</span><span class="op">)</span></span></code></pre>
</div>
<div id="durée-de-la-quarantaine-et-de-la-période-dincubation" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="durée-de-la-quarantaine-et-de-la-période-dincubation" class="callout-inner">
<h3 class="callout-title">Durée de la quarantaine et de la période d’incubation</h3>
<div class="callout-content">
<p>La <strong>période d’incubation</strong> est un délai utile pour
évaluer la durée de la surveillance active ou de la quarantaine (<a href="https://www.acpjournals.org/doi/10.7326/M20-0504" class="external-link">Lauer et al.,
2020</a>). De même, les délais entre l’apparition des symptômes et la
guérison (ou le décès) détermineront la durée nécessaire des soins de
santé et de l’isolement des cas (<a href="https://royalsocietypublishing.org/doi/10.1098/rstb.2016.0371" class="external-link">Cori
et al.</a>).</p>
<p>Calculez :</p>
<ul>
<li>Dans quel délai précis 99 % des personnes présentant les symptômes
de COVID-19 les manifestent-elles après l’infection ?</li>
</ul>
</div>
</div>
</div>
<div id="accordionHint2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button hint-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseHint2" aria-expanded="false" aria-controls="collapseHint2">
  <h4 class="accordion-header" id="headingHint2"> Donner un indice </h4>
</button>
<div id="collapseHint2" class="accordion-collapse collapse" aria-labelledby="headingHint2" data-bs-parent="#accordionHint2">
<div class="accordion-body">
<p>Quelle est la distribution des délais qui mesure le temps écoulé
entre l’infection et l’apparition des symptômes ?</p>
<p>Les fonctions de probabilité pour les distributions
<code>&lt;epiparameter&gt;</code> <strong>discrètes</strong> sont les
mêmes que celles que nous avons utilisées pour les distributions
<em>continues</em> !</p>
<div class="codewrapper sourceCode" id="cb24">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># plot to have a visual reference</span></span>
<span><span class="fu">plot</span><span class="op">(</span><span class="va">covid_serialint_discrete</span>, xlim <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="fl">0</span>, <span class="fl">20</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># density value at quantile value 10 (day)</span></span>
<span><span class="fu">density</span><span class="op">(</span><span class="va">covid_serialint_discrete</span>, at <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># cumulative probability at quantile value 10 (day)</span></span>
<span><span class="fu">epiparameter</span><span class="fu">::</span><span class="fu">cdf</span><span class="op">(</span><span class="va">covid_serialint_discrete</span>, q <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># In what quantile value (days) do we have the 60% cumulative probability?</span></span>
<span><span class="fu">quantile</span><span class="op">(</span><span class="va">covid_serialint_discrete</span>, p <span class="op">=</span> <span class="fl">0.6</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># generate random values</span></span>
<span><span class="fu">epiparameter</span><span class="fu">::</span><span class="fu">generate</span><span class="op">(</span><span class="va">covid_serialint_discrete</span>, times <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3"> Montrer la solution </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" aria-labelledby="headingSolution3" data-bs-parent="#accordionSolution3">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid_incubation</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">epiparameter</span><span class="fu">::</span><span class="fu">epiparameter_db</span><span class="op">(</span></span>
<span>    disease <span class="op">=</span> <span class="st">"covid"</span>,</span>
<span>    epi_name <span class="op">=</span> <span class="st">"incubation"</span>,</span>
<span>    single_epiparameter <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>  <span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SORTIE<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Using Linton N, Kobayashi T, Yang Y, Hayashi K, Akhmetzhanov A, Jung S, Yuan
B, Kinoshita R, Nishiura H (2020). "Incubation Period and Other
Epidemiological Characteristics of 2019 Novel Coronavirus Infections
with Right Truncation: A Statistical Analysis of Publicly Available
Case Data." _Journal of Clinical Medicine_. doi:10.3390/jcm9020538
&lt;https://doi.org/10.3390/jcm9020538&gt;..
To retrieve the citation use the 'get_citation' function</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid_incubation_discrete</span> <span class="op">&lt;-</span> <span class="fu">epiparameter</span><span class="fu">::</span><span class="fu">discretise</span><span class="op">(</span><span class="va">covid_incubation</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">quantile</span><span class="op">(</span><span class="va">covid_incubation_discrete</span>, p <span class="op">=</span> <span class="fl">0.99</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SORTIE<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 19</code></pre>
</div>
<p>99% des personnes qui développent les symptômes du COVID-19 le feront
dans les 16 jours suivant l’infection.</p>
<p>Réfléchissez-y, <em>ce résultat est-il attendu en termes
épidémiologiques ?</em></p>
</div>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4"> Comment créer un diagramme de distribution ? </h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" aria-labelledby="headingSolution4" data-bs-parent="#accordionSolution4">
<div class="accordion-body">
<p>A partir d’une valeur maximale avec <code>quantile()</code> nous
pouvons créer une séquence de valeurs de quantiles sous la forme d’un
tableau numérique et calculer <code>density()</code> pour chacune
d’entre elles :</p>
<div class="codewrapper sourceCode" id="cb29">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># create a discrete distribution visualisation</span></span>
<span><span class="co"># from a maximum value from the distribution</span></span>
<span><span class="fu">quantile</span><span class="op">(</span><span class="va">covid_serialint_discrete</span>, p <span class="op">=</span> <span class="fl">0.99</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co"># generate quantile values</span></span>
<span>  <span class="co"># as a sequence for each natural number</span></span>
<span>  <span class="fu">seq</span><span class="op">(</span><span class="fl">1L</span>, to <span class="op">=</span> <span class="va">.</span>, by <span class="op">=</span> <span class="fl">1L</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co"># coerce numeric vector to data frame</span></span>
<span>  <span class="fu">as_tibble_col</span><span class="op">(</span>column_name <span class="op">=</span> <span class="st">"quantile_values"</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span></span>
<span>    <span class="co"># calculate density values</span></span>
<span>    <span class="co"># for each quantile in the density function</span></span>
<span>    density_values <span class="op">=</span></span>
<span>      <span class="fu">density</span><span class="op">(</span></span>
<span>        x <span class="op">=</span> <span class="va">covid_serialint_discrete</span>,</span>
<span>        at <span class="op">=</span> <span class="va">quantile_values</span></span>
<span>      <span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co"># create plot</span></span>
<span>  <span class="fu">ggplot</span><span class="op">(</span></span>
<span>    <span class="fu">aes</span><span class="op">(</span></span>
<span>      x <span class="op">=</span> <span class="va">quantile_values</span>,</span>
<span>      y <span class="op">=</span> <span class="va">density_values</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_col</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/delays-functions-rendered-unnamed-chunk-13-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p><strong>Rappelez-vous :</strong> Dans les infections à transmission
pré-symptomatique, les intervalles sériels peuvent avoir des valeurs
négatives (<a href="https://www.ijidonline.com/article/S1201-9712(20)30119-3/fulltext" class="external-link">Nishiura
et al., 2020</a>). Lorsque nous utilisons la méthode <em>intervalle
sériel</em> pour approximer le <em>temps de génération</em> nous devons
effectuer cette distribution avec des valeurs positives uniquement !</p>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="plug-in-epiparameter-pour-epinow2">Plug-in <code>{epiparameter}</code> pour <code>{EpiNow2}</code>
<a class="anchor" aria-label="anchor" href="#plug-in-epiparameter-pour-epinow2"></a>
</h2>
<hr class="half-width">
<p>Maintenant, nous pouvons brancher le tout dans le fonction
<code>EpiNow2::LogNormal()</code> !</p>
<ul>
<li>les <strong>statistiques sommaires</strong> <code>mean</code> et
<code>sd</code> de la distribution,</li>
<li>une valeur maximale <code>max</code>,</li>
<li>le nom de la <code>distribution</code>.</li>
</ul>
<p>Lors qu’on utilise <code>EpiNow2::LogNormal()</code> pour définir une
<strong>loi log-normale</strong> comme celle de
l’objet<code>covid_serialint</code>, nous pouvons spécifier la moyenne
et l’écart-type comme paramètres. Pour obtenir les paramètres “naturels”
d’une loi log-normale, nous pouvons également convertir ces statistiques
sommaires en paramètres de distribution nommés <code>meanlog</code> et
<code>sdlog</code>. Avec <a href="https://github.com/epiverse-trace/epiparameter/" class="external-link">epiparameter</a> nous pouvons
obtenir directement les <em>paramètres de distribution</em> en utilisant
<code>epiparameter::get_parameters()</code>:</p>
<div class="codewrapper sourceCode" id="cb30">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid_serialint_parameters</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">epiparameter</span><span class="fu">::</span><span class="fu">get_parameters</span><span class="op">(</span><span class="va">covid_serialint</span><span class="op">)</span></span></code></pre>
</div>
<p>On a alors :</p>
<div class="codewrapper sourceCode" id="cb31">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">serial_interval_covid</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">EpiNow2</span><span class="fu">::</span><span class="fu">LogNormal</span><span class="op">(</span></span>
<span>    meanlog <span class="op">=</span> <span class="va">covid_serialint_parameters</span><span class="op">[</span><span class="st">"meanlog"</span><span class="op">]</span>,</span>
<span>    sdlog <span class="op">=</span> <span class="va">covid_serialint_parameters</span><span class="op">[</span><span class="st">"sdlog"</span><span class="op">]</span>,</span>
<span>    max <span class="op">=</span> <span class="va">covid_serialint_discrete_max</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">serial_interval_covid</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SORTIE<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>- lognormal distribution (max: 14):
  meanlog:
    1.4
  sdlog:
    0.57</code></pre>
</div>
<p>Dans l’hypothèse d’un scénario COVID-19, utilisons les 60 premiers
jours de l’ensemble de données . <code>example_confirmed</code> du
package <a href="https://epiforecasts.io/EpiNow2/" class="external-link">EpiNow2</a> comme <code>reported_cases</code> et
l’objet récemment créé <code>serial_interval_covid</code> en tant que
données d’entrée pour estimer le nombre de reproduction variable dans le
temps à l’aide du fonction <code>EpiNow2::epinow()</code>.</p>
<div class="codewrapper sourceCode" id="cb33">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Set 4 cores to be used in parallel computations</span></span>
<span><span class="fu">withr</span><span class="fu">::</span><span class="fu">local_options</span><span class="op">(</span><span class="fu">list</span><span class="op">(</span>mc.cores <span class="op">=</span> <span class="fl">4</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">epinow_estimates_cg</span> <span class="op">&lt;-</span> <span class="fu">EpiNow2</span><span class="fu">::</span><span class="fu">epinow</span><span class="op">(</span></span>
<span>  <span class="co"># cases</span></span>
<span>  data <span class="op">=</span> <span class="va">example_confirmed</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">60</span><span class="op">]</span>,</span>
<span>  <span class="co"># delays</span></span>
<span>  generation_time <span class="op">=</span> <span class="fu">EpiNow2</span><span class="fu">::</span><span class="fu">generation_time_opts</span><span class="op">(</span><span class="va">serial_interval_covid</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SORTIE<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>WARN [2025-10-13 19:42:38] epinow: There were 1 divergent transitions after warmup. See
https://mc-stan.org/misc/warnings.html#divergent-transitions-after-warmup
to find out why this is a problem and how to eliminate them. -
WARN [2025-10-13 19:42:38] epinow: Examine the pairs() plot to diagnose sampling problems
 - </code></pre>
</div>
<div class="codewrapper sourceCode" id="cb35">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">base</span><span class="fu">::</span><span class="fu">plot</span><span class="op">(</span><span class="va">epinow_estimates_cg</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/delays-functions-rendered-unnamed-chunk-16-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>La sortie <code>plot()</code> comprend les cas estimés par date
d’infection, qui sont reconstitués à partir des cas déclarés et des
retards.</p>
<div id="avertissement" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="avertissement" class="callout-inner">
<h3 class="callout-title">Avertissement</h3>
<div class="callout-content">
<p>L’utilisation de l’intervalle sériel au lieu du temps de génération
est une alternative qui peut propager un biais dans vos estimations,
d’autant plus pour les maladies dont la transmission pré-symptomatique
est signalée. (<a href="https://academic.oup.com/jid/article/224/10/1664/6356465" class="external-link">Chung
Lau et al, 2021</a>)</p>
</div>
</div>
</div>

</section><section><h2 class="section-heading" id="ajustement-pour-tenir-compte-des-délais-de-déclaration">Ajustement pour tenir compte des délais de déclaration<a class="anchor" aria-label="anchor" href="#ajustement-pour-tenir-compte-des-d%C3%A9lais-de-d%C3%A9claration"></a>
</h2>
<hr class="half-width">
<p>L’estimation de <span class="math inline">\(R_t\)</span> nécessite
des données sur le nombre quotidien de nouvelles infections. En raison
des délais dans le développement de charges virales détectables,
l’apparition des symptômes, la recherche de soins et la déclaration, ces
chiffres ne sont pas facilement disponibles. Toutes les observations
reflètent des événements de transmission survenus dans le passé. En
d’autres termes, si <span class="math inline">\(d\)</span> est le délai
entre l’infection et l’observation, alors les observations au temps
<span class="math inline">\(t\)</span> informent <span class="math inline">\(R_{t−d}\)</span> et non <span class="math inline">\(R_t\)</span>. <a href="https://journals.plos.org/ploscompbiol/article?id=10.1371/journal.pcbi.1008409#sec007" class="external-link">(Gostic
et al., 2020)</a></p>
<figure><img src="fig/disease-reporting.jpg" alt="Calendrier pour la déclaration de la chaîne de la maladie, Pays-Bas. Lab, laboratoire ; PHA, autorité de santé publique. A partir de Marinović et al, 2015" class="figure mx-auto d-block"><div class="figcaption">
<strong>Calendrier pour la déclaration de la
chaîne de la maladie, Pays-Bas.</strong> Lab, laboratoire ; PHA,
autorité de santé publique. A partir de <a href="https://wwwnc.cdc.gov/eid/article/21/2/13-0504_article" class="external-link">Marinović
et al, 2015</a>
</div>
</figure><p>La <strong>distribution des délais</strong> pourrait être déduite
conjointement avec les temps d’infection sous-jacents, ou estimée comme
la somme des distributions de la . <a href="reference.html#incubation">période d’incubation</a> et du délais
entre l’apparition des symptômes et l’observation à partir des données
de la liste d’attente (<a href="reference.html#reportingdelay">délai de
déclaration</a>). Pour <a href="https://epiforecasts.io/EpiNow2/" class="external-link">EpiNow2</a>, nous pouvons spécifier
ces deux distributions de délais complémentaires dans l’argument
<code>delays</code>.</p>
<figure><img src="fig/rt-adjusting-delays.png" alt="R_{t} est une mesure de la transmission au moment t. Les observations après le temps t doivent être ajustées. ICU, unité de soins intensifs. A partir de Gostic et al, 2020" class="figure mx-auto d-block"><div class="figcaption">
<strong><span class="math inline">\(R_{t}\)</span> est une mesure de la transmission
au moment <span class="math inline">\(t\)</span>.</strong> Les
observations après le temps <span class="math inline">\(t\)</span>
doivent être ajustées. ICU, unité de soins intensifs. A partir de <a href="https://journals.plos.org/ploscompbiol/article?id=10.1371/journal.pcbi.1008409#sec007" class="external-link">Gostic
et al, 2020</a>
</div>
</figure><div id="utiliser-une-période-dincubation-pour-covid-19-afin-destimer-rt" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="utiliser-une-période-dincubation-pour-covid-19-afin-destimer-rt" class="callout-inner">
<h3 class="callout-title">Utiliser une période d’incubation pour COVID-19 afin d’estimer Rt</h3>
<div class="callout-content">
<p>Estimez le nombre de reproduction variable dans le temps pour les 60
premiers jours de l’ensemble de données <code>example_confirmed</code>
de <a href="https://epiforecasts.io/EpiNow2/" class="external-link">EpiNow2</a>. Accédez à une période d’incubation pour
COVID-19 à partir de <a href="https://github.com/epiverse-trace/epiparameter/" class="external-link">epiparameter</a> pour l’utiliser comme
délai de déclaration.</p>
</div>
</div>
</div>
<div id="accordionHint3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button hint-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseHint3" aria-expanded="false" aria-controls="collapseHint3">
  <h4 class="accordion-header" id="headingHint3"> Donner un indice </h4>
</button>
<div id="collapseHint3" class="accordion-collapse collapse" aria-labelledby="headingHint3" data-bs-parent="#accordionHint3">
<div class="accordion-body">
<p>Utilisez le dernier calcul d’ <code>epinow()</code> à l’aide de
l’argument <code>delays</code> et la fonction d’aide
<code>delay_opts()</code> e.</p>
<p>L’argument <code>delays</code> et la fonction
d’aide<code>delay_opts()</code> sont analogues à l’argument
<code>generation_time</code> et à la fonction d’aide
<code>generation_time_opts()</code>.</p>
<div class="codewrapper sourceCode" id="cb36">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">epinow_estimates</span> <span class="op">&lt;-</span> <span class="fu">EpiNow2</span><span class="fu">::</span><span class="fu">epinow</span><span class="op">(</span></span>
<span>  <span class="co"># cases</span></span>
<span>  reported_cases <span class="op">=</span> <span class="va">example_confirmed</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">60</span><span class="op">]</span>,</span>
<span>  <span class="co"># delays</span></span>
<span>  generation_time <span class="op">=</span> <span class="fu">EpiNow2</span><span class="fu">::</span><span class="fu">generation_time_opts</span><span class="op">(</span><span class="va">covid_serial_interval</span><span class="op">)</span>,</span>
<span>  delays <span class="op">=</span> <span class="fu">EpiNow2</span><span class="fu">::</span><span class="fu">delay_opts</span><span class="op">(</span><span class="va">covid_incubation_time</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="accordionSolution5" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution5" aria-expanded="false" aria-controls="collapseSolution5">
  <h4 class="accordion-header" id="headingSolution5"> Montrer la solution </h4>
</button>
<div id="collapseSolution5" class="accordion-collapse collapse" aria-labelledby="headingSolution5" data-bs-parent="#accordionSolution5">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb37">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># generation time ---------------------------------------------------------</span></span>
<span></span>
<span><span class="co"># get covid serial interval</span></span>
<span><span class="va">covid_serialint</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">epiparameter</span><span class="fu">::</span><span class="fu">epiparameter_db</span><span class="op">(</span></span>
<span>    disease <span class="op">=</span> <span class="st">"covid"</span>,</span>
<span>    epi_name <span class="op">=</span> <span class="st">"serial"</span>,</span>
<span>    single_epiparameter <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co"># adapt epiparameter to epinow2</span></span>
<span><span class="va">covid_serialint_discrete_max</span> <span class="op">&lt;-</span> <span class="va">covid_serialint</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">epiparameter</span><span class="fu">::</span><span class="fu">discretise</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">quantile</span><span class="op">(</span>p <span class="op">=</span> <span class="fl">0.99</span><span class="op">)</span></span>
<span></span>
<span><span class="va">covid_serialint_parameters</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">epiparameter</span><span class="fu">::</span><span class="fu">get_parameters</span><span class="op">(</span><span class="va">covid_serialint</span><span class="op">)</span></span>
<span></span>
<span><span class="va">covid_serial_interval</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">EpiNow2</span><span class="fu">::</span><span class="fu">LogNormal</span><span class="op">(</span></span>
<span>    meanlog <span class="op">=</span> <span class="va">covid_serialint_parameters</span><span class="op">[</span><span class="st">"meanlog"</span><span class="op">]</span>,</span>
<span>    sdlog <span class="op">=</span> <span class="va">covid_serialint_parameters</span><span class="op">[</span><span class="st">"sdlog"</span><span class="op">]</span>,</span>
<span>    max <span class="op">=</span> <span class="va">covid_serialint_discrete_max</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co"># incubation time ---------------------------------------------------------</span></span>
<span></span>
<span><span class="co"># get covid incubation period</span></span>
<span><span class="va">covid_incubation</span> <span class="op">&lt;-</span> <span class="fu">epiparameter</span><span class="fu">::</span><span class="fu">epiparameter_db</span><span class="op">(</span></span>
<span>  disease <span class="op">=</span> <span class="st">"covid"</span>,</span>
<span>  epi_name <span class="op">=</span> <span class="st">"incubation"</span>,</span>
<span>  single_epiparameter <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># adapt epiparameter to epinow2</span></span>
<span><span class="va">covid_incubation_discrete_max</span> <span class="op">&lt;-</span> <span class="va">covid_incubation</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">epiparameter</span><span class="fu">::</span><span class="fu">discretise</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">quantile</span><span class="op">(</span>p <span class="op">=</span> <span class="fl">0.99</span><span class="op">)</span></span>
<span></span>
<span><span class="va">covid_incubation_parameters</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">epiparameter</span><span class="fu">::</span><span class="fu">get_parameters</span><span class="op">(</span><span class="va">covid_incubation</span><span class="op">)</span></span>
<span></span>
<span><span class="va">covid_incubation_time</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">EpiNow2</span><span class="fu">::</span><span class="fu">LogNormal</span><span class="op">(</span></span>
<span>    meanlog <span class="op">=</span> <span class="va">covid_incubation_parameters</span><span class="op">[</span><span class="st">"meanlog"</span><span class="op">]</span>,</span>
<span>    sdlog <span class="op">=</span> <span class="va">covid_incubation_parameters</span><span class="op">[</span><span class="st">"sdlog"</span><span class="op">]</span>,</span>
<span>    max <span class="op">=</span> <span class="va">covid_incubation_discrete_max</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co"># epinow ------------------------------------------------------------------</span></span>
<span></span>
<span><span class="co"># run epinow</span></span>
<span><span class="va">epinow_estimates_cgi</span> <span class="op">&lt;-</span> <span class="fu">EpiNow2</span><span class="fu">::</span><span class="fu">epinow</span><span class="op">(</span></span>
<span>  <span class="co"># cases</span></span>
<span>  data <span class="op">=</span> <span class="va">example_confirmed</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">60</span><span class="op">]</span>,</span>
<span>  <span class="co"># delays</span></span>
<span>  generation_time <span class="op">=</span> <span class="fu">EpiNow2</span><span class="fu">::</span><span class="fu">generation_time_opts</span><span class="op">(</span><span class="va">covid_serial_interval</span><span class="op">)</span>,</span>
<span>  delays <span class="op">=</span> <span class="fu">EpiNow2</span><span class="fu">::</span><span class="fu">delay_opts</span><span class="op">(</span><span class="va">covid_incubation_time</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">base</span><span class="fu">::</span><span class="fu">plot</span><span class="op">(</span><span class="va">epinow_estimates_cgi</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/delays-functions-rendered-unnamed-chunk-17-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>Essayez de compléter le <code>delays</code> avec un délai de
déclaration comme le <code>reporting_delay_fixed</code> de l’épisode
précédent.</p>
</div>
</div>
</div>
</div>
<div id="dans-quelle-mesure-a-t-il-changé" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="dans-quelle-mesure-a-t-il-changé" class="callout-inner">
<h3 class="callout-title">Dans quelle mesure a-t-il changé ?</h3>
<div class="callout-content">
<p>Après avoir ajouté la période d’incubation, discutez-en :</p>
<ul>
<li>La tendance de l’ajustement du modèle dans la section “Estimation”
change-t-elle ?</li>
<li>L’incertitude a-t-elle changé ?</li>
<li>Comment expliqueriez-vous ou interpréteriez-vous ces changements
?</li>
</ul>
<p>Comparez toutes les figures <a href="https://epiforecasts.io/EpiNow2/" class="external-link">EpiNow2</a> générées
précédemment.</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="défis">Défis<a class="anchor" aria-label="anchor" href="#d%C3%A9fis"></a>
</h2>
<hr class="half-width">
<div id="une-astuce-pour-compléter-le-code" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="une-astuce-pour-compléter-le-code" class="callout-inner">
<h3 class="callout-title">Une astuce pour compléter le code</h3>
<div class="callout-content">
<p>Si nous écrivons l’élément <code>[]</code> à côté de l’objet
<code>covid_serialint_parameters[]</code> à l’intérieur de
<code>[]</code> nous pouvons utiliser le touche de tabulation
<kbd>↹</kbd> pour accéder à la <a href="https://support.posit.co/hc/en-us/articles/205273297-Code-Completion-in-the-RStudio-IDE" class="external-link">fonctionnalité
de complétion de code</a></p>
<p>Elle permet d’accéder rapidement aux éléments suivants
<code>covid_serialint_parameters["meanlog"]</code> et
<code>covid_serialint_parameters["sdlog"]</code>.</p>
<p>Nous vous invitons à tester ceci dans des blocs de code et dans la
console R !</p>
</div>
</div>
</div>
<div id="nombre-de-reproduction-effectif-debola-ajusté-en-fonction-des-délais-de-déclaration" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="nombre-de-reproduction-effectif-debola-ajusté-en-fonction-des-délais-de-déclaration" class="callout-inner">
<h3 class="callout-title">Nombre de reproduction effectif d’Ebola ajusté en fonction des délais de déclaration</h3>
<div class="callout-content">
<p>Téléchargez et lisez les <a href="data/ebola_cases.csv">données
Ebola</a>:</p>
<ul>
<li>Estimez le nombre de reproduction effectif en utilisant
<a href="https://epiforecasts.io/EpiNow2/" class="external-link">EpiNow2</a>
</li>
<li>Ajustez l’estimation en fonction des délais de déclaration
disponibles en <a href="https://github.com/epiverse-trace/epiparameter/" class="external-link">epiparameter</a>
</li>
<li>Pourquoi avez-vous choisi ce paramètre ?</li>
</ul>
</div>
</div>
</div>
<div id="accordionHint4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button hint-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseHint4" aria-expanded="false" aria-controls="collapseHint4">
  <h4 class="accordion-header" id="headingHint4"> Donner un indice </h4>
</button>
<div id="collapseHint4" class="accordion-collapse collapse" aria-labelledby="headingHint4" data-bs-parent="#accordionHint4">
<div class="accordion-body">
<p>Pour calculer la <span class="math inline">\(R_t\)</span> en
utilisant <a href="https://epiforecasts.io/EpiNow2/" class="external-link">EpiNow2</a> nous avons besoin de :</p>
<ul>
<li>L’incidence agrégée <code>data</code> avec les cas confirmés par
jour, et</li>
<li>La distribution du temps <code>generation</code>.</li>
<li>Optionnellement, les distributions des délais de déclaration
lorsqu’elles sont disponibles (par exemple, la période
d’incubation).</li>
</ul>
<p>Pour obtenir la distribution des délais à l’aide de
<a href="https://github.com/epiverse-trace/epiparameter/" class="external-link">epiparameter</a>, nous pouvons utiliser des fonctions comme
:</p>
<ul>
<li><code>epiparameter::epiparameter_db()</code></li>
<li><code>epiparameter::parameter_tbl()</code></li>
<li><code>discretise()</code></li>
<li><code>quantile()</code></li>
</ul>
</div>
</div>
</div>
</div>
<div id="accordionSolution6" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution6" aria-expanded="false" aria-controls="collapseSolution6">
  <h4 class="accordion-header" id="headingSolution6"> Montrer la solution </h4>
</button>
<div id="collapseSolution6" class="accordion-collapse collapse" aria-labelledby="headingSolution6" data-bs-parent="#accordionSolution6">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb38">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># read data</span></span>
<span><span class="co"># e.g.: if path to file is data/raw-data/ebola_cases.csv then:</span></span>
<span><span class="va">ebola_confirmed</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">read_csv</span><span class="op">(</span><span class="fu">here</span><span class="fu">::</span><span class="fu">here</span><span class="op">(</span><span class="st">"data"</span>, <span class="st">"raw-data"</span>, <span class="st">"ebola_cases.csv"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">incidence2</span><span class="fu">::</span><span class="fu">incidence</span><span class="op">(</span></span>
<span>    date_index <span class="op">=</span> <span class="st">"date"</span>,</span>
<span>    counts <span class="op">=</span> <span class="st">"confirm"</span>,</span>
<span>    count_values_to <span class="op">=</span> <span class="st">"confirm"</span>,</span>
<span>    date_names_to <span class="op">=</span> <span class="st">"date"</span>,</span>
<span>    complete_dates <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>  <span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">select</span><span class="op">(</span><span class="op">-</span><span class="va">count_variable</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># list distributions</span></span>
<span><span class="fu">epiparameter</span><span class="fu">::</span><span class="fu">epiparameter_db</span><span class="op">(</span>disease <span class="op">=</span> <span class="st">"ebola"</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">epiparameter</span><span class="fu">::</span><span class="fu">parameter_tbl</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb39">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># generation time ---------------------------------------------------------</span></span>
<span></span>
<span><span class="co"># subset one distribution for the generation time</span></span>
<span><span class="va">ebola_serial</span> <span class="op">&lt;-</span> <span class="fu">epiparameter</span><span class="fu">::</span><span class="fu">epiparameter_db</span><span class="op">(</span></span>
<span>  disease <span class="op">=</span> <span class="st">"ebola"</span>,</span>
<span>  epi_name <span class="op">=</span> <span class="st">"serial"</span>,</span>
<span>  single_epiparameter <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># adapt epiparameter to epinow2</span></span>
<span><span class="va">ebola_serial_discrete</span> <span class="op">&lt;-</span> <span class="fu">epiparameter</span><span class="fu">::</span><span class="fu">discretise</span><span class="op">(</span><span class="va">ebola_serial</span><span class="op">)</span></span>
<span></span>
<span><span class="va">serial_interval_ebola</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">EpiNow2</span><span class="fu">::</span><span class="fu">Gamma</span><span class="op">(</span></span>
<span>    mean <span class="op">=</span> <span class="va">ebola_serial</span><span class="op">$</span><span class="va">summary_stats</span><span class="op">$</span><span class="va">mean</span>,</span>
<span>    sd <span class="op">=</span> <span class="va">ebola_serial</span><span class="op">$</span><span class="va">summary_stats</span><span class="op">$</span><span class="va">sd</span>,</span>
<span>    max <span class="op">=</span> <span class="fu">quantile</span><span class="op">(</span><span class="va">ebola_serial_discrete</span>, p <span class="op">=</span> <span class="fl">0.99</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co"># incubation time ---------------------------------------------------------</span></span>
<span></span>
<span><span class="co"># subset one distribution for delay of the incubation period</span></span>
<span><span class="va">ebola_incubation</span> <span class="op">&lt;-</span> <span class="fu">epiparameter</span><span class="fu">::</span><span class="fu">epiparameter_db</span><span class="op">(</span></span>
<span>  disease <span class="op">=</span> <span class="st">"ebola"</span>,</span>
<span>  epi_name <span class="op">=</span> <span class="st">"incubation"</span>,</span>
<span>  single_epiparameter <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># adapt epiparameter to epinow2</span></span>
<span><span class="va">ebola_incubation_discrete</span> <span class="op">&lt;-</span> <span class="fu">epiparameter</span><span class="fu">::</span><span class="fu">discretise</span><span class="op">(</span><span class="va">ebola_incubation</span><span class="op">)</span></span>
<span></span>
<span><span class="va">incubation_period_ebola</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">EpiNow2</span><span class="fu">::</span><span class="fu">Gamma</span><span class="op">(</span></span>
<span>    mean <span class="op">=</span> <span class="va">ebola_incubation</span><span class="op">$</span><span class="va">summary_stats</span><span class="op">$</span><span class="va">mean</span>,</span>
<span>    sd <span class="op">=</span> <span class="va">ebola_incubation</span><span class="op">$</span><span class="va">summary_stats</span><span class="op">$</span><span class="va">sd</span>,</span>
<span>    max <span class="op">=</span> <span class="fu">quantile</span><span class="op">(</span><span class="va">ebola_serial_discrete</span>, p <span class="op">=</span> <span class="fl">0.99</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co"># epinow ------------------------------------------------------------------</span></span>
<span></span>
<span><span class="co"># run epinow</span></span>
<span><span class="va">epinow_estimates_egi</span> <span class="op">&lt;-</span> <span class="fu">EpiNow2</span><span class="fu">::</span><span class="fu">epinow</span><span class="op">(</span></span>
<span>  <span class="co"># cases</span></span>
<span>  data <span class="op">=</span> <span class="va">ebola_confirmed</span>,</span>
<span>  <span class="co"># delays</span></span>
<span>  generation_time <span class="op">=</span> <span class="fu">EpiNow2</span><span class="fu">::</span><span class="fu">generation_time_opts</span><span class="op">(</span><span class="va">serial_interval_ebola</span><span class="op">)</span>,</span>
<span>  delays <span class="op">=</span> <span class="fu">EpiNow2</span><span class="fu">::</span><span class="fu">delay_opts</span><span class="op">(</span><span class="va">incubation_period_ebola</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">plot</span><span class="op">(</span><span class="va">epinow_estimates_egi</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/delays-functions-rendered-unnamed-chunk-20-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure>
</div>
</div>
</div>
</div>
<div id="que-faire-avec-les-distributions-de-weibull" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="que-faire-avec-les-distributions-de-weibull" class="callout-inner">
<h3 class="callout-title">Que faire avec les distributions de Weibull ?</h3>
<div class="callout-content">
<p>Utilisez les données <code>influenza_england_1978_school</code> du
package <a href="https://github.com/reconhub/outbreaks" class="external-link">outbreaks</a> pour calculer le nombre de reproduction
effectif à l’aide de <a href="https://epiforecasts.io/EpiNow2/" class="external-link">EpiNow2</a> en ajustant en fonction des
délais de déclaration disponibles dans <a href="https://github.com/epiverse-trace/epiparameter/" class="external-link">epiparameter</a>.</p>
</div>
</div>
</div>
<div id="accordionHint5" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button hint-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseHint5" aria-expanded="false" aria-controls="collapseHint5">
  <h4 class="accordion-header" id="headingHint5"> Donner un indice </h4>
</button>
<div id="collapseHint5" class="accordion-collapse collapse" aria-labelledby="headingHint5" data-bs-parent="#accordionHint5">
<div class="accordion-body">
<p><code>EpiNow2::NonParametric()</code> accepte les fonctions de masse
de probabilité (FMP) de n’importe quelle famille de distribution. Lisez
le guide de référence sur les <a href="https://epiforecasts.io/EpiNow2/reference/Distributions.html" class="external-link">Distributions
de probabilités</a>.</p>
</div>
</div>
</div>
</div>
<div id="accordionSolution7" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution7" aria-expanded="false" aria-controls="collapseSolution7">
  <h4 class="accordion-header" id="headingSolution7"> Montrer la solution </h4>
</button>
<div id="collapseSolution7" class="accordion-collapse collapse" aria-labelledby="headingSolution7" data-bs-parent="#accordionSolution7">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb40">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># What parameters are available for Influenza?</span></span>
<span><span class="fu">epiparameter</span><span class="fu">::</span><span class="fu">epiparameter_db</span><span class="op">(</span>disease <span class="op">=</span> <span class="st">"influenza"</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">epiparameter</span><span class="fu">::</span><span class="fu">parameter_tbl</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">count</span><span class="op">(</span><span class="va">epi_name</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SORTIE<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># Parameter table:
# A data frame:    3 × 2
  epi_name              n
  &lt;chr&gt;             &lt;int&gt;
1 generation time       1
2 incubation period    15
3 serial interval       1</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb42">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># generation time ---------------------------------------------------------</span></span>
<span></span>
<span><span class="co"># Read the generation time</span></span>
<span><span class="va">influenza_generation</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">epiparameter</span><span class="fu">::</span><span class="fu">epiparameter_db</span><span class="op">(</span></span>
<span>    disease <span class="op">=</span> <span class="st">"influenza"</span>,</span>
<span>    epi_name <span class="op">=</span> <span class="st">"generation"</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">influenza_generation</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SORTIE<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Disease: Influenza
Pathogen: Influenza-A-H1N1
Epi Parameter: generation time
Study: Lessler J, Reich N, Cummings D, New York City Department of Health and
Mental Hygiene Swine Influenza Investigation Team (2009). "Outbreak of
2009 Pandemic Influenza A (H1N1) at a New York City School." _The New
England Journal of Medicine_. doi:10.1056/NEJMoa0906089
&lt;https://doi.org/10.1056/NEJMoa0906089&gt;.
Distribution: weibull (days)
Parameters:
  shape: 2.360
  scale: 3.180</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb44">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># EpiNow2 currently accepts Gamma or LogNormal</span></span>
<span><span class="co"># other can pass the PMF function</span></span>
<span></span>
<span><span class="va">influenza_generation_discrete</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">epiparameter</span><span class="fu">::</span><span class="fu">discretise</span><span class="op">(</span><span class="va">influenza_generation</span><span class="op">)</span></span>
<span></span>
<span><span class="va">influenza_generation_max</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">quantile</span><span class="op">(</span><span class="va">influenza_generation_discrete</span>, p <span class="op">=</span> <span class="fl">0.99</span><span class="op">)</span></span>
<span></span>
<span><span class="va">influenza_generation_pmf</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">density</span><span class="op">(</span></span>
<span>    <span class="va">influenza_generation_discrete</span>,</span>
<span>    at <span class="op">=</span> <span class="fl">0</span><span class="op">:</span><span class="va">influenza_generation_max</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">influenza_generation_pmf</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SORTIE<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 0.00000000 0.06312336 0.22134988 0.29721220 0.23896828 0.12485164 0.04309454</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb46">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># EpiNow2::NonParametric() can also accept the PMF values</span></span>
<span><span class="va">generation_time_influenza</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">EpiNow2</span><span class="fu">::</span><span class="fu">NonParametric</span><span class="op">(</span></span>
<span>    pmf <span class="op">=</span> <span class="va">influenza_generation_pmf</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co"># incubation period -------------------------------------------------------</span></span>
<span></span>
<span><span class="co"># Read the incubation period</span></span>
<span><span class="va">influenza_incubation</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">epiparameter</span><span class="fu">::</span><span class="fu">epiparameter_db</span><span class="op">(</span></span>
<span>    disease <span class="op">=</span> <span class="st">"influenza"</span>,</span>
<span>    epi_name <span class="op">=</span> <span class="st">"incubation"</span>,</span>
<span>    single_epiparameter <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co"># Discretize incubation period</span></span>
<span><span class="va">influenza_incubation_discrete</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">epiparameter</span><span class="fu">::</span><span class="fu">discretise</span><span class="op">(</span><span class="va">influenza_incubation</span><span class="op">)</span></span>
<span></span>
<span><span class="va">influenza_incubation_max</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">quantile</span><span class="op">(</span><span class="va">influenza_incubation_discrete</span>, p <span class="op">=</span> <span class="fl">0.99</span><span class="op">)</span></span>
<span></span>
<span><span class="va">influenza_incubation_pmf</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">density</span><span class="op">(</span></span>
<span>    <span class="va">influenza_incubation_discrete</span>,</span>
<span>    at <span class="op">=</span> <span class="fl">0</span><span class="op">:</span><span class="va">influenza_incubation_max</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">influenza_incubation_pmf</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SORTIE<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 0.00000000 0.05749151 0.16687705 0.22443092 0.21507632 0.16104546 0.09746609
[8] 0.04841928</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb48">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># EpiNow2::NonParametric() can also accept the PMF values</span></span>
<span><span class="va">incubation_time_influenza</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">EpiNow2</span><span class="fu">::</span><span class="fu">NonParametric</span><span class="op">(</span></span>
<span>    pmf <span class="op">=</span> <span class="va">influenza_incubation_pmf</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co"># epinow ------------------------------------------------------------------</span></span>
<span></span>
<span><span class="co"># Read data</span></span>
<span><span class="va">influenza_cleaned</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">outbreaks</span><span class="fu">::</span><span class="va">influenza_england_1978_school</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">date</span>, confirm <span class="op">=</span> <span class="va">in_bed</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Run epinow()</span></span>
<span><span class="va">epinow_estimates_igi</span> <span class="op">&lt;-</span> <span class="fu">EpiNow2</span><span class="fu">::</span><span class="fu">epinow</span><span class="op">(</span></span>
<span>  <span class="co"># cases</span></span>
<span>  data <span class="op">=</span> <span class="va">influenza_cleaned</span>,</span>
<span>  <span class="co"># delays</span></span>
<span>  generation_time <span class="op">=</span> <span class="fu">EpiNow2</span><span class="fu">::</span><span class="fu">generation_time_opts</span><span class="op">(</span><span class="va">generation_time_influenza</span><span class="op">)</span>,</span>
<span>  delays <span class="op">=</span> <span class="fu">EpiNow2</span><span class="fu">::</span><span class="fu">delay_opts</span><span class="op">(</span><span class="va">incubation_time_influenza</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">plot</span><span class="op">(</span><span class="va">epinow_estimates_igi</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/delays-functions-rendered-unnamed-chunk-21-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="prochaines-étapes">Prochaines étapes<a class="anchor" aria-label="anchor" href="#prochaines-%C3%A9tapes"></a>
</h2>
<hr class="half-width">
<div id="comment-obtenir-des-paramètres-de-distribution-à-partir-de-distributions-statistiques" class="callout testimonial">
<div class="callout-square">
<i class="callout-icon" data-feather="heart"></i>
</div>
<div id="comment-obtenir-des-paramètres-de-distribution-à-partir-de-distributions-statistiques" class="callout-inner">
<h3 class="callout-title">Comment obtenir des paramètres de distribution à partir de distributions statistiques ?</h3>
<div class="callout-content">
<p>Comment obtenir la moyenne et l’écart-type d’un temps de génération
avec <em>seulement</em> des paramètres de distribution mais aucune
statistique sommaire tel que <code>mean</code> ou <code>sd</code> pour
<code>EpiNow2::Gamma()</code> ou <code>EpiNow2::LogNormal()</code>?</p>
<p>Regardez la vignette <a href="https://github.com/epiverse-trace/epiparameter/" class="external-link">epiparameter</a> sur <a href="https://epiverse-trace.github.io/epiparameter/articles/extract_convert.html" class="external-link">l’extraction
et la conversion des paramètres</a> et ses<a href="https://epiverse-trace.github.io/epiparameter/articles/extract_convert.html#use-cases" class="external-link">cas
d’utilisations</a>!</p>
</div>
</div>
</div>
<div id="comment-estimer-la-distribution-des-délais-pour-la-maladie-x" class="callout testimonial">
<div class="callout-square">
<i class="callout-icon" data-feather="heart"></i>
</div>
<div id="comment-estimer-la-distribution-des-délais-pour-la-maladie-x" class="callout-inner">
<h3 class="callout-title">Comment estimer la distribution des délais pour la maladie X ?</h3>
<div class="callout-content">
<p>Consultez cet excellent tutoriel sur l’estimation de l’intervalle
sériel et de la période d’incubation de la maladie X en tenant compte de
<em>la censure</em> en utilisant l’inférence bayésienne avec des
packages comme <a href="https://mc-stan.org/rstan/" class="external-link">rstan</a> et
<a href="http://nickreich.github.io/coarseDataTools/" class="external-link">coarseDataTools</a>.</p>
<ul>
<li>Tutoriel en anglais : <a href="https://rpubs.com/tracelac/diseaseX" class="external-link uri">https://rpubs.com/tracelac/diseaseX</a>
</li>
<li>Tutoriel en Español : <a href="https://epiverse-trace.github.io/epimodelac/EnfermedadX.html" class="external-link uri">https://epiverse-trace.github.io/epimodelac/EnfermedadX.html</a>
</li>
</ul>
<p><strong>Ensuite,</strong> Après avoir obtenu vos valeurs estimées,
vous pouvez créer manuellement vos propres objets de classe
<code>&lt;epiparameter&gt;</code> à l’aide de la fonction
<code>epiparameter::epiparameter()</code>! Jetez un coup d’œil à son<a href="https://epiverse-trace.github.io/epiparameter/reference/epiparameter.html#ref-examples" class="external-link">guide
de référence sur “Créer un objet
<code>&lt;epiparameter&gt;</code>”</a>!</p>
<p>Enfin, jetez un coup d’œil au derniers packages R <a href="https://epidist.epinowcast.org/" class="external-link"><code>{epidist}</code></a> et <a href="https://primarycensored.epinowcast.org/" class="external-link"><code>{primarycensored}</code></a>
qui fournissent des méthodes pour relever les principaux défis de
l’estimation des distributions, y compris la troncature, la censure par
intervalle et les biais dynamiques.</p>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Points clés</h3>
<div class="callout-content">
<ul>
<li>Utilisez les fonctions de distribution avec
<code>&lt;epiparameter&gt;</code> pour obtenir des statistiques
sommaires et des paramètres informatifs pour les interventions de santé
publique, comme la fenêtre de recherche des contacts et la durée de la
quarantaine.</li>
<li>Utilisez <code>discretise()</code> pour convertir les distributions
de délais continues en distributions discrètes.</li>
<li>Utilisez <a href="https://github.com/epiverse-trace/epiparameter/" class="external-link">epiparameter</a> pour obtenir les délais de
déclaration requis dans les estimations de transmissibilité.</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-create-forecast"><p>Content from <a href="create-forecast.html">Établir des prévisions à court terme</a></p>
<hr>
<p>Dernière mise à jour le 2025-10-14 |

        <a href="https://github.com/epiverse-trace/tutorials-middle-fr/edit/main/episodes/create-forecast.Rmd" class="external-link">Modifier cette page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Afficher toutes les solutions " data-collapse="Cacher toutes les solutions "> Afficher toutes les solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Vue d'ensemble</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>Comment créer des prévisions à court terme à partir de données de
cas ?</li>
<li>Comment tenir compte des rapports incomplets dans les prévisions
?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectifs</h3>
<ul>
<li>Apprenez à faire des prévisions de cas à l’aide du progiciel R
<code>EpiNow2</code>
</li>
<li>Apprenez à inclure un processus d’observation dans l’estimation</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div id="conditions-préalables" class="callout prereq">
<div class="callout-square">
<i class="callout-icon" data-feather="check"></i>
</div>
<div id="conditions-préalables" class="callout-inner">
<h3 class="callout-title">Conditions préalables</h3>
<div class="callout-content">
<ul>
<li>Compléter le tutoriel <a href="quantify-transmissibility.html">Quantifier la
transmission</a>
</li>
</ul>
<p>Les apprenants doivent se familiariser avec les dépendances
conceptuelles suivantes avant de suivre ce tutoriel :</p>
<p><strong>Statistiques</strong>: distributions de probabilités,
principe de <a href="reference.html#bayesian">Analyse
bayésienne</a>.</p>
<p><strong>Théorie des épidémies</strong>: <a href="reference.html#effectiverepro">Nombre de reproduction
effectif</a>.</p>
</div>
</div>
</div>
<section><h2 class="section-heading" id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<hr class="half-width">
<p>À partir des données relatives aux cas d’une épidémie, il est
possible d’estimer le nombre actuel et futur de cas en tenant compte à
la fois des retards et de l’évolution de l’épidémie. de la déclaration
et de la sous-déclaration. Pour faire des prévisions sur l’évolution
future de l’épidémie, nous devons faire une hypothèse sur la façon dont
les cas sont déclarés. observations faites jusqu’à présent sont liées à
ce que nous attendons à l’avenir. La façon la plus simple de procéder
est de supposer qu’il n’y a pas de changement, c’est-à-dire que le
nombre de reproduction reste le même à l’avenir que celui qui a été
observé en dernier lieu. Dans ce tutoriel, nous créerons des <a href="reference.html#forecast">prévisions</a> en supposant que le nombre
de reproductions restera le même que son estimation à la dernière date
pour laquelle des données étaient disponibles.</p>
<p>Dans ce tutoriel, nous allons apprendre à utiliser la fonction
<a href="https://epiforecasts.io/EpiNow2/" class="external-link">EpiNow2</a> pour prévoir les cas en tenant compte des
observations incomplètes et pour prévoir les observations secondaires
telles que les décès.</p>
<p>Nous utiliserons le tuyau <code>%&gt;%</code> pour connecter des
fonctions, donc appelons aussi l’opérateur <a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a> au
paquetage :</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">EpiNow2</span><span class="op">)</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">tidyverse</span><span class="op">)</span></span></code></pre>
</div>
<div id="le-double-point-virgule" class="callout checklist">
<div class="callout-square">
<i class="callout-icon" data-feather="check-square"></i>
</div>
<div id="le-double-point-virgule" class="callout-inner">
<h3 class="callout-title">Le double point-virgule</h3>
<div class="callout-content">
<p>Le double point-virgule <code>::</code> dans R vous permettent
d’appeler une fonction spécifique d’un paquetage sans charger le
paquetage entier dans l’environnement actuel.</p>
<p>Par exemple, vous pouvez appeler une fonction spécifique d’un paquet
sans charger le paquet entier dans l’environnement actuel,
<code>dplyr::filter(data, condition)</code> utilise
<code>filter()</code> à partir de l’outil <a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a>
paquet.</p>
<p>Cela nous permet de nous souvenir des fonctions du paquet et d’éviter
les conflits d’espace de noms.</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="créez-une-prévision-à-court-terme">Créez une prévision à court terme<a class="anchor" aria-label="anchor" href="#cr%C3%A9ez-une-pr%C3%A9vision-%C3%A0-court-terme"></a>
</h2>
<hr class="half-width">
<p>La fonction <code>epinow()</code> décrite dans le <a href="quantify-transmissibility.html">quantifier la transmission</a> est
une enveloppe pour les fonctions :</p>
<ul>
<li>
<code>estimate_infections()</code> utilisées pour estimer le nombre
de cas par date d’infection.</li>
<li>
<code>forecast_infections()</code> utilisé pour simuler des
infections à l’aide d’un ajustement existant (estimation) aux cas
observés.</li>
</ul>
<p>Utilisons le même code que celui utilisé dans <a href="quantify-transmissibility.html">quantifier la transmission</a>
pour obtenir les données d’entrée, les délais et les priorités :</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Read cases dataset</span></span>
<span><span class="va">cases</span> <span class="op">&lt;-</span> <span class="fu">incidence2</span><span class="fu">::</span><span class="va">covidregionaldataUK</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co"># use {tidyr} to preprocess missing values</span></span>
<span>  <span class="fu">tidyr</span><span class="fu">::</span><span class="fu">replace_na</span><span class="op">(</span><span class="fu">base</span><span class="fu">::</span><span class="fu">list</span><span class="op">(</span>cases_new <span class="op">=</span> <span class="fl">0</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co"># use {incidence2} to compute the daily incidence</span></span>
<span>  <span class="fu">incidence2</span><span class="fu">::</span><span class="fu">incidence</span><span class="op">(</span></span>
<span>    date_index <span class="op">=</span> <span class="st">"date"</span>,</span>
<span>    counts <span class="op">=</span> <span class="st">"cases_new"</span>,</span>
<span>    count_values_to <span class="op">=</span> <span class="st">"confirm"</span>,</span>
<span>    date_names_to <span class="op">=</span> <span class="st">"date"</span>,</span>
<span>    complete_dates <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>  <span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">select</span><span class="op">(</span><span class="op">-</span><span class="va">count_variable</span><span class="op">)</span>  <span class="co"># Drop count_variable as no longer needed</span></span>
<span></span>
<span><span class="co"># Incubation period</span></span>
<span><span class="va">incubation_period_fixed</span> <span class="op">&lt;-</span> <span class="fu">EpiNow2</span><span class="fu">::</span><span class="fu">Gamma</span><span class="op">(</span></span>
<span>  mean <span class="op">=</span> <span class="fl">4</span>,</span>
<span>  sd <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  max <span class="op">=</span> <span class="fl">20</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Log-tranformed mean</span></span>
<span><span class="va">log_mean</span> <span class="op">&lt;-</span> <span class="fu">EpiNow2</span><span class="fu">::</span><span class="fu">convert_to_logmean</span><span class="op">(</span>mean <span class="op">=</span> <span class="fl">2</span>, sd <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Log-transformed std</span></span>
<span><span class="va">log_sd</span> <span class="op">&lt;-</span> <span class="fu">EpiNow2</span><span class="fu">::</span><span class="fu">convert_to_logsd</span><span class="op">(</span>mean <span class="op">=</span> <span class="fl">2</span>, sd <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Reporting delay</span></span>
<span><span class="va">reporting_delay_fixed</span> <span class="op">&lt;-</span> <span class="fu">EpiNow2</span><span class="fu">::</span><span class="fu">LogNormal</span><span class="op">(</span></span>
<span>  mean <span class="op">=</span> <span class="va">log_mean</span>,</span>
<span>  sd <span class="op">=</span> <span class="va">log_sd</span>,</span>
<span>  max <span class="op">=</span> <span class="fl">10</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Generation time</span></span>
<span><span class="va">generation_time_fixed</span> <span class="op">&lt;-</span> <span class="fu">EpiNow2</span><span class="fu">::</span><span class="fu">LogNormal</span><span class="op">(</span></span>
<span>  mean <span class="op">=</span> <span class="fl">3.6</span>,</span>
<span>  sd <span class="op">=</span> <span class="fl">3.1</span>,</span>
<span>  max <span class="op">=</span> <span class="fl">20</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># define Rt prior distribution</span></span>
<span><span class="va">rt_prior</span> <span class="op">&lt;-</span> <span class="fu">EpiNow2</span><span class="fu">::</span><span class="fu">rt_opts</span><span class="op">(</span>prior <span class="op">=</span> <span class="fu">EpiNow2</span><span class="fu">::</span><span class="fu">LogNormal</span><span class="op">(</span>mean <span class="op">=</span> <span class="fl">2</span>, sd <span class="op">=</span> <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<p>Nous pouvons maintenant extraire les prévisions à court terme à
l’aide de :</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Assume we only have the first 90 days of this data</span></span>
<span><span class="va">reported_cases</span> <span class="op">&lt;-</span> <span class="va">cases</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">slice</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">90</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Estimate and forecast</span></span>
<span><span class="va">estimates</span> <span class="op">&lt;-</span> <span class="fu">EpiNow2</span><span class="fu">::</span><span class="fu">epinow</span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">reported_cases</span>,</span>
<span>  generation_time <span class="op">=</span> <span class="fu">EpiNow2</span><span class="fu">::</span><span class="fu">generation_time_opts</span><span class="op">(</span><span class="va">generation_time_fixed</span><span class="op">)</span>,</span>
<span>  delays <span class="op">=</span> <span class="fu">EpiNow2</span><span class="fu">::</span><span class="fu">delay_opts</span><span class="op">(</span><span class="va">incubation_period_fixed</span> <span class="op">+</span> <span class="va">reporting_delay_fixed</span><span class="op">)</span>,</span>
<span>  rt <span class="op">=</span> <span class="va">rt_prior</span></span>
<span><span class="op">)</span></span></code></pre>
</div>
<div id="nattendez-pas-que-cela-se-termine" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="nattendez-pas-que-cela-se-termine" class="callout-inner">
<h3 class="callout-title">N’attendez pas que cela se termine !</h3>
<div class="callout-content">
<p>Ce dernier morceau peut prendre 10 minutes à s’exécuter. Continuez à
lire cet épisode du tutoriel pendant qu’il s’exécute en arrière-plan.
Pour plus d’informations sur le temps de calcul, lisez la section
“Inférence bayésienne à l’aide de Stan” dans la section <a href="quantify-transmissibility.html">quantifier la transmission</a> de
quantification de la transmission.</p>
</div>
</div>
</div>
<p>Nous pouvons visualiser les estimations du nombre de reproductions
effectives et du nombre estimé de cas à l’aide de <code>plot()</code>.
Les estimations sont réparties en trois catégories :</p>
<ul>
<li><p><strong>Estimation</strong> (vert) : utilise toutes les
données,</p></li>
<li><p><strong>Estimation basée sur des données partielles</strong>
(orange) : contient un degré d’incertitude plus élevé car ces
estimations sont basées sur moins de données,</p></li>
<li><p><strong>Prévision</strong> (violet) : prévisions pour
l’avenir.</p></li>
</ul>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">plot</span><span class="op">(</span><span class="va">estimates</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/create-forecast-rendered-unnamed-chunk-4-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><div class="section level3">
<h3 id="prévision-avec-des-observations-incomplètes">Prévision avec des observations incomplètes<a class="anchor" aria-label="anchor" href="#pr%C3%A9vision-avec-des-observations-incompl%C3%A8tes"></a>
</h3>
<p>Dans le cadre de la <a href="quantify-transmissibility.html">quantifier la transmission</a>
nous avons tenu compte des délais de déclaration. Dans l’épisode de
quantification de la transmission, nous avons tenu compte des retards de
déclaration. <code>EpiNow2</code> nous pouvons également tenir compte
des observations incomplètes, car dans la réalité, 100 % des cas ne sont
pas déclarés. Nous passerons un argument supplémentaire appelé
<code>obs</code> dans le <code>epinow()</code> pour définir un modèle
d’observation. Le format de <code>obs</code> est défini par la fonction
<code>obs_opt()</code> (voir <code>?EpiNow2::obs_opts</code> pour plus
de détails).</p>
<p>Supposons que nous croyons que les données de l’épidémie COVID-19
dans l’article <code>cases</code> n’incluent pas tous les cas déclarés.
Nous estimons que seuls 40 % des cas réels sont déclarés. Pour spécifier
cela dans le modèle d’observation, nous devons passer un facteur
d’échelle avec une moyenne et un écart type. Si nous supposons que 40 %
des cas sont déclarés (avec un écart-type de 1 %), nous spécifions alors
le facteur d’échelle <code>scale</code> à <code>obs_opts()</code> comme
suit :</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">obs_scale</span> <span class="op">&lt;-</span> <span class="fu">EpiNow2</span><span class="fu">::</span><span class="fu">Normal</span><span class="op">(</span>mean <span class="op">=</span> <span class="fl">0.4</span>, sd <span class="op">=</span> <span class="fl">0.01</span><span class="op">)</span></span></code></pre>
</div>
<p>Pour exécuter le cadre d’inférence avec ce processus d’observation,
nous ajoutons <code>obs = obs_opts(scale = obs_scale)</code> aux
arguments d’entrée de <code>epinow()</code>:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Define observation model</span></span>
<span><span class="va">obs_scale</span> <span class="op">&lt;-</span> <span class="fu">EpiNow2</span><span class="fu">::</span><span class="fu">Normal</span><span class="op">(</span>mean <span class="op">=</span> <span class="fl">0.4</span>, sd <span class="op">=</span> <span class="fl">0.01</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Assume we only have the first 90 days of this data</span></span>
<span><span class="va">reported_cases</span> <span class="op">&lt;-</span> <span class="va">cases</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">slice</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">90</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Estimate and forecast</span></span>
<span><span class="va">estimates</span> <span class="op">&lt;-</span> <span class="fu">EpiNow2</span><span class="fu">::</span><span class="fu">epinow</span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">reported_cases</span>,</span>
<span>  generation_time <span class="op">=</span> <span class="fu">EpiNow2</span><span class="fu">::</span><span class="fu">generation_time_opts</span><span class="op">(</span><span class="va">generation_time_fixed</span><span class="op">)</span>,</span>
<span>  delays <span class="op">=</span> <span class="fu">EpiNow2</span><span class="fu">::</span><span class="fu">delay_opts</span><span class="op">(</span><span class="va">incubation_period_fixed</span> <span class="op">+</span> <span class="va">reporting_delay_fixed</span><span class="op">)</span>,</span>
<span>  rt <span class="op">=</span> <span class="va">rt_prior</span>,</span>
<span>  <span class="co"># Add observation model</span></span>
<span>  obs <span class="op">=</span> <span class="fu">EpiNow2</span><span class="fu">::</span><span class="fu">obs_opts</span><span class="op">(</span>scale <span class="op">=</span> <span class="va">obs_scale</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">base</span><span class="fu">::</span><span class="fu">summary</span><span class="op">(</span><span class="va">estimates</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SORTIE<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>                        measure                 estimate
                         &lt;char&gt;                   &lt;char&gt;
1:       New infections per day   19944 (13130 -- 30071)
2:   Expected change in reports        Likely decreasing
3:   Effective reproduction no.       0.96 (0.76 -- 1.2)
4:               Rate of growth -0.013 (-0.096 -- 0.067)
5: Doubling/halving time (days)         -52 (10 -- -7.2)</code></pre>
</div>
<p>Les estimations des mesures de transmission telles que le nombre de
reproduction efficace et le taux de croissance sont similaires (ou de
même valeur) par rapport à la situation où nous n’avons pas tenu compte
des observations incomplètes (voir <a href="quantify-transmissibility.html">quantifier l’épisode de
transmission</a> dans la section “Recherche d’estimations”). Cependant,
le nombre de nouveaux cas confirmés par date d’infection a
considérablement changé d’ampleur pour refléter l’hypothèse selon
laquelle seuls 40 % des cas sont déclarés.</p>
<p>Nous pouvons également changer la distribution par défaut de
Binomiale négative à Poisson, supprimer l’effet de semaine par défaut
(qui tient compte des schémas hebdomadaires de déclaration) et bien
d’autres choses encore. Voir <code>?EpiNow2::obs_opts</code> pour plus
de détails.</p>
<div id="quelles-sont-les-implications-de-ce-changement" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="quelles-sont-les-implications-de-ce-changement" class="callout-inner">
<h3 class="callout-title">Quelles sont les implications de ce changement ?</h3>
<div class="callout-content">
<ul>
<li>Comparer différents pourcentages d’observations %</li>
<li>En quoi diffèrent-ils en ce qui concerne le nombre d’infections
estimées ?</li>
<li>Quelles sont les implications de ce changement pour la santé
publique ?</li>
</ul>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="prévision-des-observations-secondaires">Prévision des observations secondaires<a class="anchor" aria-label="anchor" href="#pr%C3%A9vision-des-observations-secondaires"></a>
</h2>
<hr class="half-width">
<p><code>EpiNow2</code> L’outil de prévision de l’épidémie de COVID-19
permet également d’estimer et de prévoir les observations secondaires,
par exemple les décès et les hospitalisations, à partir d’une
observation primaire, par exemple le nombre de cas. Nous illustrerons
ici comment prévoir le nombre de décès découlant des cas observés de
COVID-19 dans les premiers stades de l’épidémie au Royaume-Uni.</p>
<p>Tout d’abord, nous devons formater nos données de manière à ce
qu’elles comportent les colonnes suivantes :</p>
<ul>
<li>
<code>date</code> la date (en tant qu’objet date, voir
<code>?is.Date()</code>),</li>
<li>
<code>primary</code>: nombre d’observations primaires à cette date,
dans cet exemple <strong>cas</strong>,</li>
<li>
<code>secondary</code>: nombre de dates d’observations secondaires,
dans cet exemple <strong>décès</strong>.</li>
</ul>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">reported_cases_deaths</span> <span class="op">&lt;-</span> <span class="fu">incidence2</span><span class="fu">::</span><span class="va">covidregionaldataUK</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co"># use {tidyr} to preprocess missing values</span></span>
<span>  <span class="fu">tidyr</span><span class="fu">::</span><span class="fu">replace_na</span><span class="op">(</span><span class="fu">base</span><span class="fu">::</span><span class="fu">list</span><span class="op">(</span>cases_new <span class="op">=</span> <span class="fl">0</span>, deaths_new <span class="op">=</span> <span class="fl">0</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co"># use {incidence2} to compute the daily incidence</span></span>
<span>  <span class="fu">incidence2</span><span class="fu">::</span><span class="fu">incidence</span><span class="op">(</span></span>
<span>    date_index <span class="op">=</span> <span class="st">"date"</span>,</span>
<span>    counts <span class="op">=</span> <span class="fu">c</span><span class="op">(</span>primary <span class="op">=</span> <span class="st">"cases_new"</span>, secondary <span class="op">=</span> <span class="st">"deaths_new"</span><span class="op">)</span>,</span>
<span>    date_names_to <span class="op">=</span> <span class="st">"date"</span>,</span>
<span>    complete_dates <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>  <span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co"># rearrange to wide format for {EpiNow2}</span></span>
<span>  <span class="fu">pivot_wider</span><span class="op">(</span>names_from <span class="op">=</span> <span class="va">count_variable</span>, values_from <span class="op">=</span> <span class="va">count</span><span class="op">)</span></span></code></pre>
</div>
<figure style="text-align: center"><img src="fig/create-forecast-rendered-unnamed-chunk-8-1.png" alt="Distribution of secondary cases (deaths). We will drop the first 30 days with no observed deaths. We will use the deaths between day 31 and day 60 to estimate the secondary observations. We will forecast deaths from day 61 to day 90." class="figure mx-auto d-block"><figcaption>
Distribution of secondary cases (deaths). We will drop the first 30 days
with no observed deaths. We will use the deaths between day 31 and day
60 to estimate the secondary observations. We will forecast deaths from
day 61 to day 90.
</figcaption></figure><p>En utilisant les données sur les cas et les décès entre le 31e et le
60e jour, nous estimerons la relation entre les observations primaires
et secondaires à l’aide de la méthode suivante
<code>estimate_secondary()</code> puis nous prévoyons les décès futurs à
l’aide de <code>forecast_secondary()</code>. Pour plus de détails sur le
modèle, voir le <a href="https://epiforecasts.io/EpiNow2/dev/articles/estimate_secondary.html" class="external-link">documentation
du modèle</a>.</p>
<p>Nous devons spécifier le type d’observation en utilisant
<code>type</code> en <code>secondary_opts()</code> Les options sont les
suivantes :</p>
<ul>
<li>“incidence” : les observations secondaires découlent d’observations
primaires antérieures, c’est-à-dire de décès survenus à la suite de cas
enregistrés.</li>
<li>“prévalence” : les observations secondaires résultent d’une
combinaison d’observations primaires actuelles et d’observations
secondaires antérieures, c’est-à-dire l’utilisation des lits d’hôpitaux
à partir des admissions actuelles à l’hôpital et de l’utilisation passée
des lits d’hôpitaux.</li>
</ul>
<p>Dans cet exemple, nous spécifions
<code>secondary_opts(type = "incidence")</code>. Voir
<code>?EpiNow2::secondary_opts</code> pour plus de détails.</p>
<p>La dernière donnée clé est la distribution des délais entre les
observations primaires et secondaires. Il s’agit ici du délai entre le
signalement du cas et le décès. Nous supposons que ce délai suit une
distribution gamma avec une moyenne de 14 jours et un écart-type de 5
jours. <a href="https://github.com/epiverse-trace/epiparameter/" class="external-link">epiparameter</a> pour <a href="https://epiverse-trace.github.io/tutorials-early/delays-reuse.html" class="external-link">accéder
aux délais épidémiologiques</a>). L’utilisation de <code>Gamma()</code>
nous spécifions une distribution gamma fixe.</p>
<p>Il existe d’autres fonctions d’entrée pour
<code>estimate_secondary()</code> qui peuvent être spécifiées, y compris
l’ajout d’un processus d’observation, voir
<code>?EpiNow2::estimate_secondary</code> pour plus de détails sur ces
options.</p>
<p>Pour trouver l’ajustement du modèle entre les cas et les décès :</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Estimate from day 31 to day 60 of this data</span></span>
<span><span class="va">cases_to_estimate</span> <span class="op">&lt;-</span> <span class="va">reported_cases_deaths</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">slice</span><span class="op">(</span><span class="fl">31</span><span class="op">:</span><span class="fl">60</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Delay distribution between case report and deaths</span></span>
<span><span class="va">delay_report_to_death</span> <span class="op">&lt;-</span> <span class="fu">EpiNow2</span><span class="fu">::</span><span class="fu">Gamma</span><span class="op">(</span></span>
<span>  mean <span class="op">=</span> <span class="fu">EpiNow2</span><span class="fu">::</span><span class="fu">Normal</span><span class="op">(</span>mean <span class="op">=</span> <span class="fl">14</span>, sd <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span>,</span>
<span>  sd <span class="op">=</span> <span class="fu">EpiNow2</span><span class="fu">::</span><span class="fu">Normal</span><span class="op">(</span>mean <span class="op">=</span> <span class="fl">5</span>, sd <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span>,</span>
<span>  max <span class="op">=</span> <span class="fl">30</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Estimate secondary cases</span></span>
<span><span class="va">estimate_cases_to_deaths</span> <span class="op">&lt;-</span> <span class="fu">EpiNow2</span><span class="fu">::</span><span class="fu">estimate_secondary</span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">cases_to_estimate</span>,</span>
<span>  secondary <span class="op">=</span> <span class="fu">EpiNow2</span><span class="fu">::</span><span class="fu">secondary_opts</span><span class="op">(</span>type <span class="op">=</span> <span class="st">"incidence"</span><span class="op">)</span>,</span>
<span>  delays <span class="op">=</span> <span class="fu">EpiNow2</span><span class="fu">::</span><span class="fu">delay_opts</span><span class="op">(</span><span class="va">delay_report_to_death</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre>
</div>
<div id="soyez-prudent-avec-léchelle-de-temps" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="soyez-prudent-avec-léchelle-de-temps" class="callout-inner">
<h3 class="callout-title">Soyez prudent avec l’échelle de temps</h3>
<div class="callout-content">
<p>Au début d’une épidémie, il peut y avoir des changements substantiels
dans les tests et les rapports. Si les tests changent d’un mois à
l’autre, l’ajustement du modèle sera biaisé. Vous devez donc être
prudent quant à l’échelle temporelle des données utilisées dans
l’ajustement du modèle et les prévisions.</p>
</div>
</div>
</div>
<p>Nous représentons l’ajustement du modèle (rubans ombrés) avec les
observations secondaires (diagramme à barres) et les observations
primaires (ligne pointillée) comme suit :</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">plot</span><span class="op">(</span><span class="va">estimate_cases_to_deaths</span>, primary <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/create-forecast-rendered-unnamed-chunk-10-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>Pour utiliser cet ajustement de modèle afin de prévoir les décès,
nous passons un cadre de données composé de l’observation primaire (cas)
pour les dates non utilisées dans l’ajustement de modèle.</p>
<p><em>Remarque : dans cet épisode, nous utilisons des données dont nous
connaissons les décès et les cas, nous créons donc une base de données
en extrayant les cas. Mais dans la pratique, il s’agirait d’un ensemble
de données différent composé uniquement de cas.</em></p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Forecast from day 61 to day 90</span></span>
<span><span class="va">cases_to_forecast</span> <span class="op">&lt;-</span> <span class="va">reported_cases_deaths</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">slice</span><span class="op">(</span><span class="fl">61</span><span class="op">:</span><span class="fl">90</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">mutate</span><span class="op">(</span>value <span class="op">=</span> <span class="va">primary</span><span class="op">)</span></span></code></pre>
</div>
<p>Pour faire des prévisions, nous utilisons l’ajustement du modèle
<code>estimate_cases_to_deaths</code>:</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Forecast secondary cases</span></span>
<span><span class="va">deaths_forecast</span> <span class="op">&lt;-</span> <span class="fu">EpiNow2</span><span class="fu">::</span><span class="fu">forecast_secondary</span><span class="op">(</span></span>
<span>  estimate <span class="op">=</span> <span class="va">estimate_cases_to_deaths</span>,</span>
<span>  primary <span class="op">=</span> <span class="va">cases_to_forecast</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">plot</span><span class="op">(</span><span class="va">deaths_forecast</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/create-forecast-rendered-unnamed-chunk-12-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>Le graphique montre les observations secondaires prévues (décès) pour
les dates pour lesquelles nous avons enregistré des cas. Il est
également possible de prévoir les décès à l’aide des cas prévus ; dans
ce cas, vous devez spécifier <code>primary</code> comme
<code>estimates</code> sortie de <code>estimate_infections()</code>.</p>
<div id="intervalles-crédibles" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="intervalles-crédibles" class="callout-inner">
<h3 class="callout-title">Intervalles crédibles</h3>
<div class="callout-content">
<p>Dans tous les cas <a href="https://epiforecasts.io/EpiNow2/" class="external-link">EpiNow2</a> les régions ombrées
reflètent les intervalles de crédibilité de 90 %, 50 % et 20 %, dans
l’ordre du plus clair au plus foncé.</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="défi-analyse-de-lépidémie-debola">Défi : Analyse de l’épidémie d’Ebola<a class="anchor" aria-label="anchor" href="#d%C3%A9fi-analyse-de-l%C3%A9pid%C3%A9mie-debola"></a>
</h2>
<hr class="half-width">
<div id="challenge1" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Défi</h3>
<div class="callout-content">
<p>Téléchargez le fichier <a href="data/ebola_cases.csv"><code>ebola_cases.csv</code></a> et lisez-le
dans R. Les données simulées sont la date d’apparition des symptômes et
le nombre de cas confirmés aux premiers stades de l’épidémie d’Ebola en
Sierra Leone en 2014.</p>
<p>En utilisant les 3 premiers mois (120 jours) de données :</p>
<ol style="list-style-type: decimal">
<li>Estimez si les cas augmentent ou diminuent au 120e jour de
l’épidémie.</li>
<li>Tenir compte d’une capacité d’observation de 80 % des cas.</li>
<li>Établissez une prévision à deux semaines du nombre de cas.</li>
</ol>
<p>Vous pouvez utiliser les valeurs de paramètres suivantes pour la
(les) distribution(s) des délais et la distribution du temps de
génération.</p>
<ul>
<li>Période d’incubation : Log normal<span class="math inline">\((2.487,0.330)\)</span> (<a href="https://doi.org/10.1016/j.phrp.2011.04.001" class="external-link">Eichner et
al. 2011</a> via <a href="https://github.com/epiverse-trace/epiparameter/" class="external-link">epiparameter</a>)</li>
<li>Temps de génération : Gamma<span class="math inline">\((15.3,
10.1)\)</span> (<a href="https://www.nejm.org/doi/full/10.1056/NEJMoa1411100" class="external-link">Équipe
d’intervention de l’OMS contre Ebola 2014</a>)</li>
</ul>
<p>Vous pouvez inclure une certaine incertitude autour de la moyenne et
de l’écart-type de ces distributions.</p>
</div>
</div>
</div>
<div id="accordionHint1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button hint-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseHint1" aria-expanded="false" aria-controls="collapseHint1">
  <h4 class="accordion-header" id="headingHint1"> Donner un indice </h4>
</button>
<div id="collapseHint1" class="accordion-collapse collapse" data-bs-parent="#accordionHint1" aria-labelledby="headingHint1">
<div class="accordion-body">
<p>Nous utilisons le nombre de reproduction effectif et le taux de
croissance pour estimer si les cas augmentent ou diminuent.</p>
<p>Nous pouvons utiliser le <code>horizon</code> à l’intérieur de la
<code>forecast_opts()</code> fourni pour <code>forecast</code> argument
dans <code>epinow()</code> pour étendre la durée de la prévision. La
valeur par défaut est de sept jours.</p>
<p>Assurez-vous que les données sont au bon format :</p>
<ul>
<li>
<code>date</code> la date (en tant qu’objet de date, voir
<code>?is.Date()</code>),</li>
<li>
<code>confirm</code> nombre de cas confirmés à cette date.</li>
</ul>
</div>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> SOLUTION </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<p>Pour estimer le nombre de reproductions effectives et le taux de
croissance, nous utiliserons la fonction <code>epinow()</code>.</p>
<p>Les données étant constituées de la date d’apparition des symptômes,
il nous suffit de spécifier une distribution des retards pour la période
d’incubation et le temps de génération.</p>
<p>Nous spécifions les distributions avec une certaine incertitude
autour de la moyenne et de l’écart-type de la distribution log-normale
pour la période d’incubation et de la distribution Gamma pour le temps
de génération.</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">epiparameter</span><span class="fu">::</span><span class="fu">epiparameter_db</span><span class="op">(</span></span>
<span>  disease <span class="op">=</span> <span class="st">"ebola"</span>,</span>
<span>  epi_name <span class="op">=</span> <span class="st">"incubation"</span></span>
<span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">epiparameter</span><span class="fu">::</span><span class="fu">parameter_tbl</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SORTIE<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># Parameter table:
# A data frame:    5 × 7
  disease           pathogen epi_name prob_distribution author  year sample_size
  &lt;chr&gt;             &lt;chr&gt;    &lt;chr&gt;    &lt;chr&gt;             &lt;chr&gt;  &lt;dbl&gt;       &lt;dbl&gt;
1 Ebola Virus Dise… Ebola V… incubat… lnorm             Eichn…  2011         196
2 Ebola Virus Dise… Ebola V… incubat… gamma             WHO E…  2015        1798
3 Ebola Virus Dise… Ebola V… incubat… gamma             WHO E…  2015          49
4 Ebola Virus Dise… Ebola V… incubat… gamma             WHO E…  2015         957
5 Ebola Virus Dise… Ebola V… incubat… gamma             WHO E…  2015         792</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ebola_eichner</span> <span class="op">&lt;-</span> <span class="fu">epiparameter</span><span class="fu">::</span><span class="fu">epiparameter_db</span><span class="op">(</span></span>
<span>  disease <span class="op">=</span> <span class="st">"ebola"</span>,</span>
<span>  epi_name <span class="op">=</span> <span class="st">"incubation"</span>,</span>
<span>  author <span class="op">=</span> <span class="st">"Eichner"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">ebola_eichner_parameters</span> <span class="op">&lt;-</span> <span class="fu">epiparameter</span><span class="fu">::</span><span class="fu">get_parameters</span><span class="op">(</span><span class="va">ebola_eichner</span><span class="op">)</span></span>
<span></span>
<span><span class="va">ebola_incubation_period</span> <span class="op">&lt;-</span> <span class="fu">EpiNow2</span><span class="fu">::</span><span class="fu">LogNormal</span><span class="op">(</span></span>
<span>  meanlog <span class="op">=</span> <span class="fu">EpiNow2</span><span class="fu">::</span><span class="fu">Normal</span><span class="op">(</span></span>
<span>    mean <span class="op">=</span> <span class="va">ebola_eichner_parameters</span><span class="op">[</span><span class="st">"meanlog"</span><span class="op">]</span>,</span>
<span>    sd <span class="op">=</span> <span class="fl">0.5</span></span>
<span>  <span class="op">)</span>,</span>
<span>  sdlog <span class="op">=</span> <span class="fu">EpiNow2</span><span class="fu">::</span><span class="fu">Normal</span><span class="op">(</span></span>
<span>    mean <span class="op">=</span> <span class="va">ebola_eichner_parameters</span><span class="op">[</span><span class="st">"sdlog"</span><span class="op">]</span>,</span>
<span>    sd <span class="op">=</span> <span class="fl">0.5</span></span>
<span>  <span class="op">)</span>,</span>
<span>  max <span class="op">=</span> <span class="fl">20</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">ebola_generation_time</span> <span class="op">&lt;-</span> <span class="fu">EpiNow2</span><span class="fu">::</span><span class="fu">Gamma</span><span class="op">(</span></span>
<span>  mean <span class="op">=</span> <span class="fu">EpiNow2</span><span class="fu">::</span><span class="fu">Normal</span><span class="op">(</span>mean <span class="op">=</span> <span class="fl">15.3</span>, sd <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span>,</span>
<span>  sd <span class="op">=</span> <span class="fu">EpiNow2</span><span class="fu">::</span><span class="fu">Normal</span><span class="op">(</span>mean <span class="op">=</span> <span class="fl">10.1</span>, sd <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span>,</span>
<span>  max <span class="op">=</span> <span class="fl">30</span></span>
<span><span class="op">)</span></span></code></pre>
</div>
<p>Nous lisons les données en utilisant <code>readr::read_csv()</code>.
Cette fonction reconnaît que la colonne <code>date</code> est une
<code>&lt;date&gt;</code> vecteur de classe.</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># read data</span></span>
<span><span class="co"># e.g.: if path to file is data/raw-data/ebola_cases.csv then:</span></span>
<span><span class="va">ebola_cases_raw</span> <span class="op">&lt;-</span> <span class="fu">readr</span><span class="fu">::</span><span class="fu">read_csv</span><span class="op">(</span></span>
<span>  <span class="fu">here</span><span class="fu">::</span><span class="fu">here</span><span class="op">(</span><span class="st">"data"</span>, <span class="st">"raw-data"</span>, <span class="st">"ebola_cases.csv"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre>
</div>
<p>Prétraiter et adapter les données brutes pour
<a href="https://epiforecasts.io/EpiNow2/" class="external-link">EpiNow2</a>:</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ebola_cases</span> <span class="op">&lt;-</span> <span class="va">ebola_cases_raw</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co"># use {tidyr} to preprocess missing values</span></span>
<span>  <span class="fu">tidyr</span><span class="fu">::</span><span class="fu">replace_na</span><span class="op">(</span><span class="fu">base</span><span class="fu">::</span><span class="fu">list</span><span class="op">(</span>confirm <span class="op">=</span> <span class="fl">0</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co"># use {incidence2} to compute the daily incidence</span></span>
<span>  <span class="fu">incidence2</span><span class="fu">::</span><span class="fu">incidence</span><span class="op">(</span></span>
<span>    date_index <span class="op">=</span> <span class="st">"date"</span>,</span>
<span>    counts <span class="op">=</span> <span class="st">"confirm"</span>,</span>
<span>    count_values_to <span class="op">=</span> <span class="st">"confirm"</span>,</span>
<span>    date_names_to <span class="op">=</span> <span class="st">"date"</span>,</span>
<span>    complete_dates <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>  <span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">select</span><span class="op">(</span><span class="op">-</span><span class="va">count_variable</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu">as_tibble</span><span class="op">(</span><span class="va">ebola_cases</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SORTIE<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 123 × 2
   date       confirm
   &lt;date&gt;       &lt;dbl&gt;
 1 2014-05-18       1
 2 2014-05-19       0
 3 2014-05-20       2
 4 2014-05-21       4
 5 2014-05-22       6
 6 2014-05-23       1
 7 2014-05-24       2
 8 2014-05-25       0
 9 2014-05-26      10
10 2014-05-27       8
# ℹ 113 more rows</code></pre>
</div>
<p>Nous définissons un modèle d’observation pour mettre à l’échelle le
nombre estimé et prévu de nouvelles infections :</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Define observation model</span></span>
<span><span class="co"># mean of 80% and standard deviation of 1%</span></span>
<span><span class="va">ebola_obs_scale</span> <span class="op">&lt;-</span> <span class="fu">EpiNow2</span><span class="fu">::</span><span class="fu">Normal</span><span class="op">(</span>mean <span class="op">=</span> <span class="fl">0.8</span>, sd <span class="op">=</span> <span class="fl">0.01</span><span class="op">)</span></span></code></pre>
</div>
<p>Comme nous voulons également créer une prévision sur deux semaines,
nous spécifions <code>horizon = 14</code> pour prévoir 14 jours au lieu
des 7 jours par défaut.</p>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ebola_estimates</span> <span class="op">&lt;-</span> <span class="fu">EpiNow2</span><span class="fu">::</span><span class="fu">epinow</span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">ebola_cases</span> <span class="op">%&gt;%</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">slice</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">120</span><span class="op">)</span>, <span class="co"># first 3 months of data only</span></span>
<span>  generation_time <span class="op">=</span> <span class="fu">EpiNow2</span><span class="fu">::</span><span class="fu">generation_time_opts</span><span class="op">(</span><span class="va">ebola_generation_time</span><span class="op">)</span>,</span>
<span>  delays <span class="op">=</span> <span class="fu">EpiNow2</span><span class="fu">::</span><span class="fu">delay_opts</span><span class="op">(</span><span class="va">ebola_incubation_period</span><span class="op">)</span>,</span>
<span>  <span class="co"># Add observation model</span></span>
<span>  obs <span class="op">=</span> <span class="fu">EpiNow2</span><span class="fu">::</span><span class="fu">obs_opts</span><span class="op">(</span>scale <span class="op">=</span> <span class="va">ebola_obs_scale</span><span class="op">)</span>,</span>
<span>  <span class="co"># horizon needs to be 14 days to create two week forecast (default is 7 days)</span></span>
<span>  forecast <span class="op">=</span> <span class="fu">EpiNow2</span><span class="fu">::</span><span class="fu">forecast_opts</span><span class="op">(</span>horizon <span class="op">=</span> <span class="fl">14</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">summary</span><span class="op">(</span><span class="va">ebola_estimates</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SORTIE<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>                        measure               estimate
                         &lt;char&gt;                 &lt;char&gt;
1:       New infections per day         92 (49 -- 186)
2:   Expected change in reports             Increasing
3:   Effective reproduction no.       1.6 (1.1 -- 2.4)
4:               Rate of growth 0.04 (0.0014 -- 0.084)
5: Doubling/halving time (days)        17 (8.2 -- 490)</code></pre>
</div>
<p>Le numéro de reproduction effectif <span class="math inline">\(R_t\)</span> (à la dernière date des données) est
de 1.6 (1.1 – 2.4). Le taux de croissance exponentiel du nombre de cas
est de 0.04 (0.0014 – 0.084).</p>
<p>Visualisez les estimations :</p>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">plot</span><span class="op">(</span><span class="va">ebola_estimates</span><span class="op">)</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="prévision-avec-des-estimations-de-r_t" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="prévision-avec-des-estimations-de-r_t" class="callout-inner">
<h3 class="callout-title">Prévision avec des estimations de <span class="math inline">\(R_t\)</span>
</h3>
<div class="callout-content">
<p>Par défaut, les prévisions à court terme sont créées en utilisant la
dernière estimation du nombre de reproductions <span class="math inline">\(R_t\)</span>. Cette estimation étant basée sur des
données partielles, elle présente une grande incertitude.</p>
<p>Le nombre de reproductions projeté dans le futur peut être remplacé
par une estimation moins récente, basée sur des données plus nombreuses,
à l’aide de <code>rt_opts()</code>:</p>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">EpiNow2</span><span class="fu">::</span><span class="fu">rt_opts</span><span class="op">(</span>future <span class="op">=</span> <span class="st">"estimate"</span><span class="op">)</span></span></code></pre>
</div>
<p>Il en résultera des prévisions moins incertaines (puisqu’elles sont
basées sur les données de l <span class="math inline">\(R_t\)</span>
avec un intervalle d’incertitude plus étroit), mais les prévisions
seront basées sur des estimations moins récentes de <span class="math inline">\(R_t\)</span> et supposeront qu’il n’y a pas eu de
changement depuis lors.</p>
<p>En outre, il est possible de <a href="reference.html#projection">projeter</a> la valeur de <span class="math inline">\(R_t\)</span> dans le futur à l’aide d’un modèle
générique en fixant <code>future = "project"</code>. Comme cette option
utilise un modèle pour prévoir la valeur de <span class="math inline">\(R_t\)</span> il en résultera des prévisions plus
incertaines que la valeur de <code>estimate</code> pour un exemple <a href="https://epiforecasts.io/EpiNow2/dev/articles/estimate_infections_options.html#projecting-the-reproduction-number-with-the-gaussian-process" class="external-link">voir
ici</a>.</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="résumé">Résumé<a class="anchor" aria-label="anchor" href="#r%C3%A9sum%C3%A9"></a>
</h2>
<hr class="half-width">
<p><code>EpiNow2</code> peut être utilisé pour créer des prévisions à
court terme et pour estimer la relation entre différents résultats. Il
existe une série d’options de modèle qui peuvent être mises en œuvre
pour différentes analyses, y compris l’ajout d’un processus
d’observation pour tenir compte des déclarations incomplètes. Voir le
site web de l’Agence européenne pour la sécurité et la santé au travail.
<a href="https://epiforecasts.io/EpiNow2/dev/articles/estimate_infections_options.html" class="external-link">vignette</a>
pour plus de détails sur les différentes options de modèle dans
<code>EpiNow2</code> qui ne sont pas abordées dans ces tutoriels.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Points clés</h3>
<div class="callout-content">
<ul>
<li>Nous pouvons créer des prévisions à court terme en faisant des
hypothèses sur le comportement futur du nombre de reproduction.</li>
<li>Les estimations peuvent tenir compte des déclarations de cas
incomplètes.</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-severity-static"><p>Content from <a href="severity-static.html">Estimation de la gravité d'une épidémie</a></p>
<hr>
<p>Dernière mise à jour le 2025-10-13 |

        <a href="https://github.com/epiverse-trace/tutorials-middle-fr/edit/main/episodes/severity-static.Rmd" class="external-link">Modifier cette page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Afficher toutes les solutions " data-collapse="Cacher toutes les solutions "> Afficher toutes les solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Vue d'ensemble</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li><p>Pourquoi estime-t-on la gravité clinique d’une épidémie
?</p></li>
<li><p>Comment peut-on estimer le risque de létalité (RL) au début d’une
épidémie en cours ?</p></li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectifs</h3>
<ul>
<li><p>Estimer le risque de létalité (RL) à partir de données
épidémiologiques agrégées en utilisant la librairie
<a href="https://github.com/epiverse-trace/cfr" class="external-link">cfr</a>.</p></li>
<li><p>Estimer le RL ajusté au délai épidémiologique à l’aide des
librairies <a href="https://github.com/epiverse-trace/epiparameter/" class="external-link">epiparameter</a> et <a href="https://github.com/epiverse-trace/cfr" class="external-link">cfr</a>.</p></li>
<li><p>Estimer la sévérité ajustée au délai épidémiologique pour une
série chronologique en expansion en utilisant le package
<a href="https://github.com/epiverse-trace/cfr" class="external-link">cfr</a>.</p></li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div id="prereq1" class="callout prereq">
<div class="callout-square">
<i class="callout-icon" data-feather="check"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Pré-requis</h3>
<div class="callout-content">
<p>Les concepts abordés dans cet épisode supposent que vous êtes
familiers avec :</p>
<p><strong>Science des données</strong>: Programmation de base avec
R.</p>
<p><strong>Théorie des épidémies</strong>: <a href="reference.html#delaydist">Distributions des délais</a>.</p>
<p><strong>R packages installés</strong>: <a href="https://github.com/epiverse-trace/cfr" class="external-link">cfr</a>,
<a href="https://github.com/epiverse-trace/epiparameter/" class="external-link">epiparameter</a>, <a href="https://github.com/reconhub/outbreaks" class="external-link">outbreaks</a>,
<a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a>.</p>
</div>
</div>
</div>
<div id="accordionSpoiler1" class="accordion spoiler-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button spoiler-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSpoiler1" aria-expanded="false" aria-controls="collapseSpoiler1">
  <h3 class="accordion-header" id="headingSpoiler1">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="eye"></i></div> Afficher les détails </h3>
</button>
<div id="collapseSpoiler1" class="accordion-collapse collapse" aria-labelledby="headingSpoiler1" data-bs-parent="#accordionSpoiler1">
<div class="accordion-body">
<p>Installer les packages si elles ne le sont pas déjà:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># si {pak} n'est pas disponible, exécutez : install.packages("pak")</span></span>
<span><span class="fu">pak</span><span class="fu">::</span><span class="fu">pak</span><span class="op">(</span><span class="st">"cfr"</span><span class="op">)</span></span>
<span><span class="fu">pak</span><span class="fu">::</span><span class="fu">pak</span><span class="op">(</span><span class="st">"epiparameter"</span><span class="op">)</span></span>
<span><span class="fu">pak</span><span class="fu">::</span><span class="fu">pak</span><span class="op">(</span><span class="st">"tidyverse"</span><span class="op">)</span></span>
<span><span class="fu">pak</span><span class="fu">::</span><span class="fu">pak</span><span class="op">(</span><span class="st">"outbreaks"</span><span class="op">)</span></span></code></pre>
</div>
<p>Si vous recevez un message d’erreur, rendez-vous sur la <a href="index.html#configuration-des-logiciels">page principale de
configuration</a>.</p>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<hr class="half-width">
<p>Les questions les plus fréquentes au début d’une épidémie sont:</p>
<ul>
<li>Quel est l’impact probable de l’épidémie sur la santé publique en
termes de gravité clinique ?</li>
<li>Quels sont les groupes les plus gravement touchés ?</li>
<li>L’épidémie risque-t-elle de provoquer une pandémie très grave ?</li>
</ul>
<p>Nous pouvons évaluer le potentiel pandémique d’une épidémie à l’aide
de deux mesures essentielles : la transmissibilité et la gravité
clinique. (<a href="https://www.science.org/doi/full/10.1126/science.1176062" class="external-link">Fraser
et al. 2009</a>, <a href="https://www.cdc.gov/flu/pandemic-resources/national-strategy/severity-assessment-framework-508.html" class="external-link">CDC,
2016</a>).</p>
<p><img src="fig/cfr-hhs-scenarios-psaf.png" alt="Scénarios de planification pandémique du HHS basés sur le cadre d’évaluation de la gravité de la pandémie. Ce cadre utilise une mesure combinant la gravité clinique et la transmissibilité pour caractériser les scénarios de pandémie de grippe. HHS: United States Department of Health and Human Services (CDC, 2016)" class="figure">{alt=‘L’axe
horizontal représente la mesure de la gravité clinique, échelonnée de 1
à 7, où 1 correspond à faible, 4 à modérée et 7 à très grave. L’axe
vertical représente la mesure de la transmissibilité, échelonnée de 1 à
5, où 1 correspond à faible, 3 à modérée et 5 à forte transmissibilité.
Sur le graphique, les scénarios de planification d’une pandémie sont
présentés en quatre quadrants (A, B, C et D). De gauche à droite, les
scénarios sont: “variation saisonnière”, “pandémie modérée”, “pandémie
grave” et “pandémie très grave”. À mesure que la gravité clinique
augmente sur l’axe horizontal, ou que la transmissibilité augmente sur
l’axe vertical, la gravité du scénario de planification de la pandémie
augmente également.’}</p>
<p>Une approche épidémiologique pour estimer la gravité clinique
consiste à quantifier le risque de létalité (RL). Le risque de létalité
est la probabilité conditionnelle de décès en cas de diagnostic
confirmé, calculée comme le rapport entre le nombre cumulé de décès dus
à une maladie infectieuse et le nombre de cas diagnostiqués confirmés.
Toutefois, le calcule de ce paramètre de cette façon au cours d’une
épidémie tend à aboutir à un RL naïf ou biaisé, compte tenu du <a href="../../learners/reference.html#delaydist">délai</a> entre
l’apparition de la maladie et le décès, qui varie considérablement au
fur et à mesure que l’épidémie progresse et se stabilise aux derniers
stades de l’épidémie (<a href="https://academic.oup.com/aje/article/162/5/479/82647?login=false#620743" class="external-link">Ghani
et al. 2005</a>).</p>
<figure><img src="fig/cfr-pone.0006852.g003-fig_c.png" fig-alt="Les périodes sont pertinentes : Période 1 -- 15 jours où le RL est nul, ce qui indique qu'aucun décès n'a été signalé ; Période du 15 mars au 26 avril où le RL semble augmenter ; Période du 30 avril au 30 mai où l'estimation du RL se stabilise." alt="Estimations du risque de létalité (RL) observé biaisé confirmé en fonction du temps (ligne épaisse), calculé comme le rapport entre le nombre cumulé de décès et de cas confirmés à un instant t. La valeur atteinte à la fin d’une épidémie (~30 mai) est le risque de létalité observé à la fin de l’épidémie. La ligne horizontale continue et les lignes pointillées indiquent la valeur du RL prédit et leurs intervalles de confiance à 95% (IC 95%) des valeurs prédites du taux de mortalité ajusté au délai en utilisant uniquement les données observées jusqu’au 27 mars 2003. (Nishiura et al., 2009)" class="figure mx-auto d-block"><div class="figcaption">Estimations du risque de létalité (RL) observé
biaisé confirmé en fonction du temps (ligne épaisse), calculé comme le
rapport entre le nombre cumulé de décès et de cas confirmés à un instant
<span class="math inline">\(t\)</span>. La valeur atteinte à la fin
d’une épidémie (~30 mai) est le risque de létalité observé à la fin de
l’épidémie. La ligne horizontale continue et les lignes pointillées
indiquent la valeur du RL prédit et leurs intervalles de confiance à 95%
(IC <span class="math inline">\(95%\)</span>) des valeurs prédites du
taux de mortalité ajusté au délai en utilisant uniquement les données
observées jusqu’au 27 mars 2003. (<a href="https://journals.plos.org/plosone/article?id=10.1371/journal.pone.0006852" class="external-link">Nishiura
et al., 2009</a>)</div>
</figure><p>Généralement, l’estimation de la gravité clinique d’une maladie peut
être utile même en dehors d’un scénario de planification d’une pandémie
et dans le contexte de la santé publique courante. Le fait de savoir si
une épidémie a ou a eu une gravité différente de celle observée dans le
passé peut motiver des recherches pour identifier les causes. Celles-ci
peuvent être intrinsèques à l’agent infectieux (par exemple, une
nouvelle souche plus grave) ou liées à des facteurs sous-jacents dans la
population (par exemple, une immunité réduite ou des facteurs de
morbidité) (<a href="https://journals.plos.org/plosntds/article?id=10.1371/journal.pntd.0003846" class="external-link">Lipsitch
et al., 2015</a>).</p>
<p>Dans ce tutoriel, nous allons apprendre à utiliser la librairie
<a href="https://github.com/epiverse-trace/cfr" class="external-link">cfr</a> pour calculer et ajuster le risque de gravité
clinique en utilisant <a href="reference.html#delaydist">la distribution
des délais</a> obtenue de la librairie <a href="https://github.com/epiverse-trace/epiparameter/" class="external-link">epiparameter</a> ou de
d’autres sources, sur la base des méthodes développées par <a href="https://journals.plos.org/plosone/article?id=10.1371/journal.pone.0006852" class="external-link">Nishiura
et al. 2009</a>. Nous allons aussi explorer la libraire
<a href="https://github.com/epiverse-trace/cfr" class="external-link">cfr</a> pour determiner comment l’utiliser pour calculer
d’autres mesures de sévérité clinique.</p>
<p>Nous utiliserons l’opérateur pipe (<code>%&gt;%</code>) de la
librairie <a href="https://magrittr.tidyverse.org" class="external-link">magrittr</a> pour relier facilement certaines
fonctions de la librairie <a href="https://github.com/epiverse-trace/cfr" class="external-link">cfr</a>, y compris les fonctions de
la librairie de formatage de données <a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a>. Nous
chargerons donc la librairie <a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a>, qui comprend à la
fois les librairies <a href="https://magrittr.tidyverse.org" class="external-link">magrittr</a> et <a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a>.</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># charger les packages</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">cfr</span><span class="op">)</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">epiparameter</span><span class="op">)</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">tidyverse</span><span class="op">)</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">outbreaks</span><span class="op">)</span></span></code></pre>
</div>
<div id="lopérateur-double-deux-points" class="callout checklist">
<div class="callout-square">
<i class="callout-icon" data-feather="check-square"></i>
</div>
<div id="lopérateur-double-deux-points" class="callout-inner">
<h3 class="callout-title">L’opérateur double deux-points
(<code>::</code>)</h3>
<div class="callout-content">
<p>L’opérateur <code>::</code> de R permet d’accéder aux fonctions ou
aux objets d’un package spécifique sans attacher l’intégralité du
package (sans faire appel à la function <code>libray()</code>). Il offre
plusieurs avantages, notamment :</p>
<ul>
<li>Indiquer explicitement le package d’origine d’une fonction,
réduisant ainsi les ambiguïtés et les conflits potentiels lorsque
plusieurs packages possèdent des fonctions portant le même nom.</li>
<li>Permettre d’appeler une fonction depuis un package sans charger
l’intégralité du package avec un appel à la fonction
<code>library()</code>.</li>
</ul>
<p>Par exemple, la commande <code>dplyr::filter(data, condition)</code>
signifie que nous appelons la fonction <code>filter()</code> depuis la
librairie <a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a>.</p>
</div>
</div>
</div>
<div id="discussion1" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Discussion</h3>
<div class="callout-content">
<p>Etiez-vous membre d’une équipe chargée de de concevoir des stratégies
de réponse à une épidémie? Si oui:</p>
<ul>
<li>Comment évaluez-vous la gravité clinique de l’épidémie ?</li>
<li>Quelles étaient les principales sources de biais ?</li>
<li>Qu’aviez-vous fait pour prendre en compte les biais identifiés
?</li>
<li>Quelle analyse complémentaire feriez-vous pour résoudre le biais
?</li>
</ul>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="sources-de-données-pour-la-gravité-clinique">Sources de données pour la gravité clinique<a class="anchor" aria-label="anchor" href="#sources-de-donn%C3%A9es-pour-la-gravit%C3%A9-clinique"></a>
</h2>
<hr class="half-width">
<p>Quelles sont les sources de données qu’on peut utiliser pour estimer
la gravité clinique d’une épidémie? <a href="https://www.thelancet.com/journals/laninf/article/PIIS1473-3099(20)30243-7/fulltext" class="external-link">Verity
et al, 2020</a> résume le spectre des cas de COVID-19 :</p>
<figure><img src="fig/cfr-spectrum-cases-covid19.jpg" alt="Spectre des cas de COVID-19. Le CFR vise à estimer la proportion de décès parmi les cas confirmés d’une épidémie. (Verity et al., 2020)" class="figure mx-auto d-block"><div class="figcaption">Spectre des cas de COVID-19. Le CFR vise à
estimer la proportion de décès parmi les cas confirmés d’une épidémie.
(<a href="https://www.thelancet.com/journals/laninf/article/PIIS1473-3099(20)30243-7/fulltext#gr1" class="external-link">Verity
et al., 2020</a>)</div>
</figure><ul>
<li>Au sommet de la pyramide, les cas définis comme
<strong>grave</strong> ou <strong>critiques</strong> selon les critères
établis par l’OMS. Ces cas auraient probablement été identifiés en
milieu hospitalier, présentant une pneumonie virale atypique. Ils
auraient été identifiés en Chine continentale et parmi ceux classés au
niveau international comme émanants d’une transmission locale.</li>
<li>Beaucoup d’autres sont probablement <strong>symptomatiques</strong>
(c’est-à-dire avec de la fièvre, de la toux ou des myalgies), mais ne
nécessiteront peut-être pas d’hospitalisation. Ces cas auraient été
identifiés grâce à leurs liens avec des voyageurs internationaux dans
des zones à haut risque et grâce à la recherche des personnes en contact
avec les cas confirmés. Ils pourraient être identifiés grâce à la
surveillance de la population, par exemple en cas de syndrome
grippal.</li>
<li>La partie inférieure de la pyramide représente les cas
<strong>bénins</strong> (et éventuellement
<strong>asymptomatiques</strong>). Ces cas pourraient être identifiés
par la recherche de cas contacts et, puis par des tests
sérologiques.</li>
</ul></section><section><h2 class="section-heading" id="estimation-du-risque-de-létalité-rl-naïf">Estimation du risque de létalité (RL) naïf<a class="anchor" aria-label="anchor" href="#estimation-du-risque-de-l%C3%A9talit%C3%A9-rl-na%C3%AFf"></a>
</h2>
<hr class="half-width">
<p>Nous mesurons la gravité d’une maladie en termes de risque de
létalité (RL). Le RL est interprété comme la probabilité conditionnelle
de décès en cas de diagnostic confirmé, calculée comme le ratio du
nombre cumulé de décès <span class="math inline">\(D_{t}\)</span> sur le
nombre cumulé de cas confirmés <span class="math inline">\(C_{t}\)</span> à un moment donné <span class="math inline">\(t\)</span>. Nous pouvons le référer au <em>RL
naïf</em> (également RL brut ou biaisé, <span class="math inline">\(b_{t}\)</span>) :</p>
<p><span class="math display">\[ b_{t} =  \frac{D_{t}}{C_{t}}
\]</span></p>
<p>Cette formule est considérée comme <em>naïve</em> parce qu’elle tend
à produire un RL biaisé et largement sous-estimé en raison du délai
entre l’apparition de la maladie et le décès, qui ne se stabilise que
vers la fin de l’épidémie.</p>
<p>Pour calculer le RL naïf à l’aide de la librairie <a href="https://github.com/epiverse-trace/cfr" class="external-link">cfr</a>,
on a besoin d’un tableau de données comportant au minimum trois colonnes
nommées :</p>
<ul>
<li><code>date</code></li>
<li><code>cases</code></li>
<li><code>deaths</code></li>
</ul>
<p>Explorons le tableau de données <code>ebola1976</code> inclus dans le
package <a href="https://github.com/epiverse-trace/cfr" class="external-link">cfr</a>, et qui contient les données provenant de la
première épidémie d’Ebola au Zaïre (actuelle la République Démocratique
du Congo) en 1976, comme l’ont analysé Camacho et al. (2014).</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># charger le tableau de donnees ebola1976 du package {cfr}</span></span>
<span><span class="fu">data</span><span class="op">(</span><span class="st">"ebola1976"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Visualiser l'incidence du nombre de cas et de deces repertorie</span></span>
<span><span class="va">ebola1976</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">incidence2</span><span class="fu">::</span><span class="fu">incidence</span><span class="op">(</span></span>
<span>    date_index <span class="op">=</span> <span class="st">"date"</span>,</span>
<span>    counts <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="st">"cases"</span>, <span class="st">"deaths"</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">plot</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/severity-static-rendered-unnamed-chunk-3-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>Nous supposerons que nous sommes dans le contexte d’une
<strong>épidémie d’Ebola en cours</strong> où nous disposons que des
données collectées durant les <strong>30 premiers jours</strong> de
l’épidémie.</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># supposons que nous disposons des donnees des 30 premiers jours de l'epidemie</span></span>
<span><span class="va">ebola_30days</span> <span class="op">&lt;-</span> <span class="va">ebola1976</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">slice_head</span><span class="op">(</span>n <span class="op">=</span> <span class="fl">30</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">as_tibble</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">ebola_30days</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SORTIE<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 30 × 3
   date       cases deaths
   &lt;date&gt;     &lt;int&gt;  &lt;int&gt;
 1 1976-08-25     1      0
 2 1976-08-26     0      0
 3 1976-08-27     0      0
 4 1976-08-28     0      0
 5 1976-08-29     0      0
 6 1976-08-30     0      0
 7 1976-08-31     0      0
 8 1976-09-01     1      0
 9 1976-09-02     1      0
10 1976-09-03     1      0
# ℹ 20 more rows</code></pre>
</div>
<div id="nous-avons-besoin-de-données-dincidence-agrégées" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="nous-avons-besoin-de-données-dincidence-agrégées" class="callout-inner">
<h3 class="callout-title">Nous avons besoin de données d’incidence agrégées</h3>
<div class="callout-content">
<p>Les données d’entrée des fonctions de la <a href="https://github.com/epiverse-trace/cfr" class="external-link">cfr</a> sont des
données d’incidence, qui sont ont été <strong>agrégées</strong> à partir
des données de cas individuels.</p>
<!-- Similaire à `{EpiNow2}`, mais `{cfr}` prend une colonne supplémentaire nommée `deaths`. -->
<p>Ces données doivent être <strong>agrégées</strong> par “unité de
temps”, c’est-à-dire une observation par unité de temps, contenant le
nombre de cas et de décès signalés en un temps donné. Les observations
avec des valeurs nulles ou manquantes doivent également être incluses,
comme pour les données de séries temporelles.</p>
<p>Cependant, il faut noter que la version actuelle de
<a href="https://github.com/epiverse-trace/cfr" class="external-link">cfr</a> requière des données agrégées <em>journaliers</em>.
Les autres unités temporelles d’agrégation de données telles que les
semaines, mois, etc ne sont pour le moment pas pris en charge.</p>
<!-- Proposez des moyens de traiter les données d'incidences hebdomadaires -->
<!-- https://github.com/epiverse-trace/cfr/issues/117 -->
</div>
</div>
</div>
<p>La fonction <code>cfr::cfr_static()</code> permet de calculer le RL
naïf.</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Calculer le RL naïf durant les 30 premiers jours</span></span>
<span><span class="fu">cfr</span><span class="fu">::</span><span class="fu">cfr_static</span><span class="op">(</span>data <span class="op">=</span> <span class="va">ebola_30days</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SORTIE<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  severity_estimate severity_low severity_high
1         0.4740741    0.3875497     0.5617606</code></pre>
</div>
<div id="challenge1" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Défi</h3>
<div class="callout-content">
<p>Téléchargez le fichier <a href="data/sarscov2_cases_deaths.csv">sarscov2_cases_deaths.csv</a> et
importez-le dans R. Puis estimez le RL naïf.</p>
</div>
</div>
</div>
<div id="accordionHint1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button hint-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseHint1" aria-expanded="false" aria-controls="collapseHint1">
  <h4 class="accordion-header" id="headingHint1"> Donner un indice </h4>
</button>
<div id="collapseHint1" class="accordion-collapse collapse" aria-labelledby="headingHint1" data-bs-parent="#accordionHint1">
<div class="accordion-body">
<p>Vérifier le format des données d’entrée en répondant aux questions
suivantes:</p>
<ul>
<li>Contient-il des données d’incidences quotidiennes ?</li>
<li>Les noms des colonnes sont-ils conformes aux exigences de la
fonction <code>cfr_static()</code> ?</li>
<li>Comment renommer les noms de colonnes d’un tableau de données ?</li>
</ul>
</div>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Montrer la solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<p>Importez les données téléchargées à l’aide de la fonction
<code>readr::read_csv()</code>. Cette fonction reconnaît que la colonne
<code>date</code> est de type <code>&lt;Date&gt;</code>.</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># importer les données dans R</span></span>
<span><span class="co"># supposons que le chemin d'accès au fichier est data/raw-data/ebola_cases.csv</span></span>
<span><span class="va">sarscov2_input</span> <span class="op">&lt;-</span> <span class="fu">readr</span><span class="fu">::</span><span class="fu">read_csv</span><span class="op">(</span></span>
<span>  file <span class="op">=</span> <span class="fu">here</span><span class="fu">::</span><span class="fu">here</span><span class="op">(</span><span class="st">"data"</span>, <span class="st">"raw-data"</span>, <span class="st">"sarscov2_cases_deaths.csv"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># voir un aperçu des données</span></span>
<span><span class="va">sarscov2_input</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SORTIE<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 93 × 3
   date       cases_jpn deaths_jpn
   &lt;date&gt;         &lt;dbl&gt;      &lt;dbl&gt;
 1 2020-01-20         1          0
 2 2020-01-21         1          0
 3 2020-01-22         0          0
 4 2020-01-23         1          0
 5 2020-01-24         1          0
 6 2020-01-25         3          0
 7 2020-01-26         3          0
 8 2020-01-27         4          0
 9 2020-01-28         6          0
10 2020-01-29         7          0
# ℹ 83 more rows</code></pre>
</div>
<p>Nous pouvons utiliser la fonction
<code>cleanepi::standardize_column_names()</code> pour renommer les noms
des colonnes de sorte qu’elles soient conforment aux exigences de la
fonction <code>cfr::cfr_static()</code>.</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># renommer les noms des colonnes</span></span>
<span><span class="va">sarscov2_input</span> <span class="op">&lt;-</span> <span class="va">sarscov2_input</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">cleanepi</span><span class="fu">::</span><span class="fu">standardize_column_names</span><span class="op">(</span></span>
<span>    rename <span class="op">=</span> <span class="fu">c</span><span class="op">(</span>cases <span class="op">=</span> <span class="st">"cases_jpn"</span>, deaths <span class="op">=</span> <span class="st">"deaths_jpn"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co"># estimer le RL naïf</span></span>
<span><span class="fu">cfr</span><span class="fu">::</span><span class="fu">cfr_static</span><span class="op">(</span><span class="va">sarscov2_input</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SORTIE<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  severity_estimate severity_low severity_high
1        0.01895208   0.01828832    0.01963342</code></pre>
</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="biais-affectant-lestimation-du-cfr">Biais affectant l’estimation du CFR<a class="anchor" aria-label="anchor" href="#biais-affectant-lestimation-du-cfr"></a>
</h2>
<hr class="half-width">
<div id="deux-biais-qui-affectent-lestimation-du-rl" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="deux-biais-qui-affectent-lestimation-du-rl" class="callout-inner">
<h3 class="callout-title">Deux biais qui affectent l’estimation du RL</h3>
<div class="callout-content">
<p><a href="https://journals.plos.org/plosntds/article?id=10.1371/journal.pntd.0003846" class="external-link">Lipsitch
et al, 2015</a> ont décrit deux biais potentiels qui peuvent affecter
l’estimation du RL (et comment y remédier) :</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> 1. Études préférentielle des cas graves </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<p>Pour les maladies ayant un <em>spectre</em> de présentations
cliniques, les cas qui sont portés à l’attention des autorités de santé
publique et enregistrés dans les bases de données de surveillance sont
généralement des personnes présentant les symptômes les plus graves, qui
consultent un médecin, admises à l’hôpital ou décèdent.</p>
<p>Par conséquent, le RL sera généralement plus élevé chez les <em>cas
confirmés</em> que dans l’ensemble de la population des cas, étant donné
que cette dernière peut inclure des personnes présentant des symptômes
légers, subcliniques et (selon certaines définitions de “cas”)
asymptomatiques.</p>
</div>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3"> 2. Biais dû à une déclaration tardive du décès </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" aria-labelledby="headingSolution3" data-bs-parent="#accordionSolution3">
<div class="accordion-body">
<p>Lors d’une épidémie <em>en cours</em>, il y a un délai entre le
moment où une personne décède et le moment où son décès est signalé. Par
conséquent, à tout moment, la liste des cas contient des individus qui
vont mourir et dont le décès n’est pas encore survenu ou qui est survenu
mais n’a pas encore été signalé. Ainsi, la division du nombre cumulé de
décès déclarés par le nombre cumulé de cas déclarés en un moment donné
d’une épidémie sous-évaluera le véritable RL.</p>
<p>Les principaux facteurs déterminants de l’ampleur du biais sont, le
<em>taux de croissance de l’épidémie</em> et la <em>distribution des
délais</em> entre la déclaration des cas et la déclaration des décès ;
plus les délais sont longs, plus le taux de croissance est rapide, et
plus le biais est important.</p>
<p>Dans les sections suivantes de cet épisode du tutoriel, nous allons
nous concentrer sur les solutions concernant spécifiquement ce biais en
utilisant la librairie <a href="https://github.com/epiverse-trace/cfr" class="external-link">cfr</a>.</p>
</div>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4"> Étude de cas : Grippe A (H1N1), Mexique, 2009 </h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" aria-labelledby="headingSolution4" data-bs-parent="#accordionSolution4">
<div class="accordion-body">
<p>Il est crucial d’améliorer l’estimation du RL ajusté au délais au
début d’une épidémie pour déterminer sa virulence, mais aussi le niveau
et les choix des interventions de santé publique et fournir des conseils
au grand public.</p>
<p>En 2009, lors de l’épidémie de grippe porcine A (H1N1), le Mexique a
effectué une estimation précoce biaisée du RL. Les premiers rapports du
gouvernement mexicain faisaient état d’une infection virulente, alors
que dans d’autres pays, le même virus était perçu comme bénin (<a href="https://content.time.com/time/health/article/0,8599,1894534,00.html" class="external-link">TIME,
2009</a>).</p>
<p>Aux États-Unis et au Canada, aucun décès n’a été attribué au virus
durant les dix jours qui ont suivi la déclaration d’urgence de santé
publique par l’OMS. Même dans des circonstances similaires, au début
d’une pandémie mondiale, les responsables de la santé publique, les
décideurs et le grand public veulent connaître la virulence d’un agent
infectieux émergent.</p>
<p><a href="https://www.bmj.com/content/339/bmj.b2840" class="external-link">Garske et al,
2009</a> évaluer les défis afin d’estimer la gravité de cette pandémie,
en soulignant que le fait de recenser avec précision les cas pour le
dénominateur peut améliorer la capacité à obtenir des estimations
informatives du taux de létalité.</p>
</div>
</div>
</div>
</div>

</section><section><h2 class="section-heading" id="rl-ajusté-au-délai">RL ajusté au délai<a class="anchor" aria-label="anchor" href="#rl-ajust%C3%A9-au-d%C3%A9lai"></a>
</h2>
<hr class="half-width">
<p><a href="https://journals.plos.org/plosone/article?id=10.1371/journal.pone.0006852" class="external-link">Nishiura
et al, 2009</a> ont développé une méthode de calcul du RL qui prend en
compte les <strong>délais</strong> entre l’apparition des symptômes et
le décès.</p>
<p>Durant certaines phases d’une épidémie en cours, il peut arriver que
le nombre de décès soit insuffisant pour déterminer la distribution du
temps entre l’apparition des symptômes et le décès. Par conséquent, nous
pouvons obtenir une estimation de la <em>distribution de ce délai</em> à
partir d’épidémies antérieures ou en réutilisant celles qui sont
accessibles via des librairies R tels que <a href="https://github.com/epiverse-trace/epiparameter/" class="external-link">epiparameter</a> ou
<code>{epireview}</code> qui les collectent à partir de la littérature
scientifique publiée. Lisez l’épisode <a href="https://epiverse-trace.github.io/tutorials-early/delays-reuse.html" class="external-link">accéder
aux délais épidémiologiques</a> de ce tutoriel pour de plus amples
informations.</p>
<p>Obtenons la distribution du délai entre la date d’apparition des
symptômes et la date de décès via la librairie
<a href="https://github.com/epiverse-trace/epiparameter/" class="external-link">epiparameter</a>.</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># obtenir la distribution du délai</span></span>
<span><span class="va">onset_to_death_ebola</span> <span class="op">&lt;-</span> <span class="fu">epiparameter</span><span class="fu">::</span><span class="fu">epiparameter_db</span><span class="op">(</span></span>
<span>  disease <span class="op">=</span> <span class="st">"Ebola"</span>,</span>
<span>  epi_name <span class="op">=</span> <span class="st">"onset_to_death"</span>,</span>
<span>  single_epiparameter <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># visualiser la distribution du délai</span></span>
<span><span class="fu">plot</span><span class="op">(</span><span class="va">onset_to_death_ebola</span>, day_range <span class="op">=</span> <span class="fl">0</span><span class="op">:</span><span class="fl">40</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/severity-static-rendered-unnamed-chunk-11-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>Pour prendre en compte la distribution du délai lors du calcul le RL
ajusté au délai, nous devons fournir à l’arguemt
<code>delay_density</code> de la fonction <code>cfr::cfr_static()</code>
la valeur correspondante.</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># calculer le RL ajusté au délai pour les 30 premiers jours</span></span>
<span><span class="fu">cfr</span><span class="fu">::</span><span class="fu">cfr_static</span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">ebola_30days</span>,</span>
<span>  delay_density <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu">density</span><span class="op">(</span><span class="va">onset_to_death_ebola</span>, <span class="va">x</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SORTIE<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  severity_estimate severity_low severity_high
1            0.9502        0.881        0.9861</code></pre>
</div>
<p>Le RL ajusté au délai indique que la gravité globale de la maladie
<em>à la fin de l’épidémie</em> ou selon les <em>récentes données
disponibles à ce moment-là</em> est 0.9502 avec un intervalle de
confiance de 95% entre 0.881 et 0.9861, légèrement supérieure à la
valeur naïve.</p>
<div id="utilisation-des-objets-de-la-classe-epiparameter" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="utilisation-des-objets-de-la-classe-epiparameter" class="callout-inner">
<h3 class="callout-title">Utilisation des objets de la classe epiparameter</h3>
<div class="callout-content">
<p>Lorsque vous utilisez un object de la classe
<code>&lt;epiparameter&gt;</code>, vous pouvez utiliser cette expression
comme modèle :</p>
<p><code>function(x) density(&lt;NOM_OBJECT_EPIPARAMETER&gt;, x)</code></p>
<p>Pour les fonctions de distribution dont les paramètres ne sont pas
disponibles dans <a href="https://github.com/epiverse-trace/epiparameter/" class="external-link">epiparameter</a> nous vous proposons deux
alternatives :</p>
<ul>
<li><p>Créer un objet de la classe <code>&lt;epiparameter&gt;</code>
pour l’intégrer dans d’autres packages R d’un pipeline d’analyse
épidémiologique. Lisez l’article <a href="https://epiverse-trace.github.io/epiparameter/reference/epiparameter.html" class="external-link">document
de référence de <code>epiparameter::epiparameter()</code></a> pour plus
de clarifications.</p></li>
<li><p>Liser la vignette de <a href="https://github.com/epiverse-trace/cfr" class="external-link">cfr</a> portant sur <a href="https://epiverse-trace.github.io/cfr/articles/delay_distributions.html" class="external-link">l’utilisation
des distributions des délais</a>.</p></li>
</ul>
</div>
</div>
</div>
<div id="challenge2" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Défi</h3>
<div class="callout-content">
<p>Utilisez le même fichier (<a href="data/sarscov2_cases_deaths.csv">sarscov2_cases_deaths.csv</a>) que
celui du défi précédent pour:</p>
<ul>
<li>Estimer le RL ajusté au délai en utilisant la distribution de délai
adéquate.</li>
<li>Comparer les résultats du RL naïf et du RL ajusté au délai.</li>
</ul>
</div>
</div>
</div>
<div id="accordionHint2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button hint-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseHint2" aria-expanded="false" aria-controls="collapseHint2">
  <h4 class="accordion-header" id="headingHint2"> Donner un indice </h4>
</button>
<div id="collapseHint2" class="accordion-collapse collapse" aria-labelledby="headingHint2" data-bs-parent="#accordionHint2">
<div class="accordion-body">
<ul>
<li>Trouver l’objet de la classe <code>&lt;epiparameter&gt;</code>
approprié pour ces données.</li>
</ul>
</div>
</div>
</div>
</div>
<div id="accordionSolution5" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution5" aria-expanded="false" aria-controls="collapseSolution5">
  <h4 class="accordion-header" id="headingSolution5"> Montrer la solution </h4>
</button>
<div id="collapseSolution5" class="accordion-collapse collapse" aria-labelledby="headingSolution5" data-bs-parent="#accordionSolution5">
<div class="accordion-body">
<p>Nous utiliserons la librairie <a href="https://github.com/epiverse-trace/epiparameter/" class="external-link">epiparameter</a> pour
accéder à une distribution des délais pour les données d’incidence du
SARS-CoV-2.</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">epiparameter</span><span class="op">)</span></span>
<span></span>
<span><span class="va">sarscov2_delay</span> <span class="op">&lt;-</span> <span class="fu">epiparameter</span><span class="fu">::</span><span class="fu">epiparameter_db</span><span class="op">(</span></span>
<span>  disease <span class="op">=</span> <span class="st">"covid"</span>,</span>
<span>  epi_name <span class="op">=</span> <span class="st">"onset to death"</span>,</span>
<span>  single_epiparameter <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre>
</div>
<p>Les données seront importées dans R à l’aide de la fonction
<code>readr::read_csv()</code>. Cette fonction reconnaît que la colonne
<code>date</code> est de type <code>&lt;Date&gt;</code>.</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># importer les donnees</span></span>
<span><span class="co"># supposons que le chemin d'accès au fichier est: data/raw-data/ebola_cases.csv</span></span>
<span><span class="va">sarscov2_input</span> <span class="op">&lt;-</span> <span class="fu">readr</span><span class="fu">::</span><span class="fu">read_csv</span><span class="op">(</span></span>
<span>  file <span class="op">=</span> <span class="fu">here</span><span class="fu">::</span><span class="fu">here</span><span class="op">(</span><span class="st">"data"</span>, <span class="st">"raw-data"</span>, <span class="st">"sarscov2_cases_deaths.csv"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># voir un apperçu des donnees</span></span>
<span><span class="va">sarscov2_input</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SORTIE<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 93 × 3
   date       cases_jpn deaths_jpn
   &lt;date&gt;         &lt;dbl&gt;      &lt;dbl&gt;
 1 2020-01-20         1          0
 2 2020-01-21         1          0
 3 2020-01-22         0          0
 4 2020-01-23         1          0
 5 2020-01-24         1          0
 6 2020-01-25         3          0
 7 2020-01-26         3          0
 8 2020-01-27         4          0
 9 2020-01-28         6          0
10 2020-01-29         7          0
# ℹ 83 more rows</code></pre>
</div>
<p>Nous pouvons utiliser la fonction
<code>cleanepi::standardize_column_names()</code> pour renommer les noms
des colonnes de sorte qu’elles soient conforment à la fonction
<code>cfr::cfr_static()</code>.</p>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># renommer les noms des colonnes avant d'estimer le RL ajusté au délai</span></span>
<span><span class="va">sarscov2_input</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">cleanepi</span><span class="fu">::</span><span class="fu">standardize_column_names</span><span class="op">(</span></span>
<span>    rename <span class="op">=</span> <span class="fu">c</span><span class="op">(</span>cases <span class="op">=</span> <span class="st">"cases_jpn"</span>, deaths <span class="op">=</span> <span class="st">"deaths_jpn"</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">cfr</span><span class="fu">::</span><span class="fu">cfr_static</span><span class="op">(</span></span>
<span>    delay_density <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu">density</span><span class="op">(</span><span class="va">sarscov2_delay</span>, <span class="va">x</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SORTIE<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  severity_estimate severity_low severity_high
1            0.0734        0.071        0.0759</code></pre>
</div>
<p>Comparer et interpréter les estimations du RL naïfs et ajusté au
délais.</p>
</div>
</div>
</div>
</div>
<div id="accordionSpoiler2" class="accordion spoiler-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button spoiler-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSpoiler2" aria-expanded="false" aria-controls="collapseSpoiler2">
  <h3 class="accordion-header" id="headingSpoiler2">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="eye"></i></div> Quand doit-on utiliser les distributions discrètes ? </h3>
</button>
<div id="collapseSpoiler2" class="accordion-collapse collapse" aria-labelledby="headingSpoiler2" data-bs-parent="#accordionSpoiler2">
<div class="accordion-body">
<p>Pour la fonction <code>cfr_static()</code> et les autres de la
famille <code>cfr_*()</code>, les distributions les plus appropriées
sont les <strong>distributions discrets</strong>. Ceci en raison du fait
que nous travaillerons avec des données d’incidence quotidiennes sur le
nombre de cas et de décès.</p>
<p>Nous pouvons supposer que l’évaluation de la fonction de distribution
de probabilité (FDP) d’une distribution <em>continue</em> est
équivalente à la fonction de masse de probabilité (FMP) de la
distribution <em>discrète</em> correspondante.</p>
<p>Toutefois, cette hypothèse pourrait être inappropriée en présence de
distributions présentant des pics énormes. C’est le cas, par exemple,
des maladies dont la distribution du délai entre la date d’apparition
des symptômes et la date du décès présente un pic très élevé et une
faible variance. Dans ce cas, la disparité moyenne entre la FDP et la
FMP devrait être plus prononcée que pour les distributions avec de
larges variances. Une façon d’y remédier est de discrétiser la
distribution continue en appliquant la fonction
<code>epiparameter::discretise()</code> à un objet de la classe
<code>&lt;epiparameter&gt;</code>.</p>
</div>
</div>
</div>
</div>
<div id="accordionSpoiler3" class="accordion spoiler-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button spoiler-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSpoiler3" aria-expanded="false" aria-controls="collapseSpoiler3">
  <h3 class="accordion-header" id="headingSpoiler3">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="eye"></i></div> Comment fonctionne la librairie {cfr} ? </h3>
</button>
<div id="collapseSpoiler3" class="accordion-collapse collapse" aria-labelledby="headingSpoiler3" data-bs-parent="#accordionSpoiler3">
<div class="accordion-body">
<p>Pour ajuster le RL, <a href="https://journals.plos.org/plosone/article?id=10.1371/journal.pone.0006852" class="external-link">Nishiura
et al. 2009</a> ont utilisé les incidences des cas et des décès pour
estimer le nombre de cas dont les pronostiques vitaux sont connus :</p>
<p><span class="math display">\[
u_t = \dfrac{\sum_{i = 0}^t
\sum_{j = 0}^\infty c_{i - j} f_{j}}{\sum_{i = 0} c_i},
\]</span></p>
<p>où :</p>
<ul>
<li>
<span class="math inline">\(c_{t}\)</span> est l’incidence
quotidienne des cas à l’instant <span class="math inline">\(t\)</span>,</li>
<li>
<span class="math inline">\(f_{t}\)</span> est la valeur de la
fonction de masse de probabilité (FMP) de la <strong>distribution des
délais</strong> entre l’apparition des symptômes et le décès, et</li>
<li>
<span class="math inline">\(u_{t}\)</span> représente le facteur de
sous-estimation des statuts vitals connus.</li>
</ul>
<p><span class="math inline">\(u_{t}\)</span> est utilisé pour
<strong>ajuster l’échelle</strong> du nombre cumulé de cas au niveau du
dénominateur dans le calcul du RL. Ce calcul est effectué en interne à
l’aide de la fonction <a href="https://epiverse-trace.github.io/cfr/reference/estimate_outcomes.html" class="external-link"><code>estimate_outcomes()</code></a>.</p>
<p>L’estimateur du RL peut être écrit comme suit :</p>
<p><span class="math display">\[p_{t} = \frac{b_{t}}{u_{t}}\]</span></p>
<p>où <span class="math inline">\(p_{t}\)</span> est la proportion
réelle de cas confirmés qui meurent de l’infection (ou le RL non
biaisé), et <span class="math inline">\(b_{t}\)</span> est l’estimation
brute et biaisée du RL (ou RL naïf).</p>
<p>D’après cette dernière équation, nous observons que le RL non biaisé
<span class="math inline">\(p_{t}\)</span> est plus élevé que le RL
biaisé <span class="math inline">\(b_{t}\)</span>, car le numérateur
dans <span class="math inline">\(u_{t}\)</span> est plus petit que le
dénominateur (notez que <span class="math inline">\(f_{t}\)</span> est
la distribution de probabilité de la <em>distribution des délais</em>
entre l’apparition des symptômes et le décès). Par conséquent, <span class="math inline">\(b_{t}\)</span> est considérer comme l’estimateur
biaisé du RL.</p>
<p>Lorsque nous observons toute l’évolution d’une épidémie (de <span class="math inline">\(t \rightarrow \infty\)</span>), <span class="math inline">\(u_{t}\)</span> tend vers 1, ce qui fait que <span class="math inline">\(b_{t}\)</span> tend à <span class="math inline">\(p_{t}\)</span> et devient un estimateur sans biais
(<a href="https://journals.plos.org/plosone/article?id=10.1371/journal.pone.0006852" class="external-link">Nishiura
et al., 2009</a>).</p>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="estimation-du-rl-au-début-dune-épidémie">Estimation du RL au début d’une épidémie<a class="anchor" aria-label="anchor" href="#estimation-du-rl-au-d%C3%A9but-dune-%C3%A9pid%C3%A9mie"></a>
</h2>
<hr class="half-width">
<p>L’estimation du RL <strong>naïf</strong> est utile pour obtenir une
estimation globale de la gravité d’une épidémie (jusqu’au moment <span class="math inline">\(t\)</span>). À la fin de l’épidémie ou lorsqu’on
atteint un niveau où on a de plus en plus de décès sont signalés, le RL
estimé sera alors plus proche du “véritable” RL non biaisé.</p>
<p>Par ailleurs, la valeur RL <strong>ajusté au délai</strong> estimée
au début d’une épidémie refléte mieux la gravité d’une maladie
infectieuse émergente que le RL biaisé ou naïf obtenu au cours de
l’épidémie.</p>
<p>Nous pouvons calculer le <em>RL ajusté au délai</em> au début d’une
épidémie à l’aide de la fonction <code>cfr::cfr_rolling()</code>.</p>
<div id="callout3" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">À noter</h3>
<div class="callout-content">
<p><code>cfr::cfr_rolling()</code> est une fonction utilitaire qui
calcule automatiquement le RL à chaque jour de l’épidémie à l’aide des
données disponibles au jour de l’estimation, permettant ainsi à
l’utilisateur de gagner du temps.</p>
</div>
</div>
</div>
<p><code>cfr::cfr_rolling()</code> montre le RL estimé à chaque jour de
l’épidémie, étant donné que les données futures sur les nombres de cas
et de décès ne sont pas disponibles à ce moment-là. Pour un même jeu de
données, la valeur finale de <code>cfr::cfr_rolling()</code> est
identique à celle de <code>cfr::cfr_static()</code>.</p>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Calculer le RL naïf quotidien à chacun des 73 jours dans un jeu de donnees</span></span>
<span><span class="co"># d'Ebola</span></span>
<span><span class="va">rolling_cfr_naive</span> <span class="op">&lt;-</span> <span class="fu">cfr</span><span class="fu">::</span><span class="fu">cfr_rolling</span><span class="op">(</span>data <span class="op">=</span> <span class="va">ebola1976</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SORTIE<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>`cfr_rolling()` is a convenience function to help understand how additional data influences the overall (static) severity. Use `cfr_time_varying()` instead to estimate severity changes over the course of the outbreak.</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb24">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Calculer le RL quotidien ajusté au délai à chacun des 73 jours dans un jeu de</span></span>
<span><span class="co"># donnees d'Ebola</span></span>
<span><span class="va">rolling_cfr_adjusted</span> <span class="op">&lt;-</span> <span class="fu">cfr</span><span class="fu">::</span><span class="fu">cfr_rolling</span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">ebola1976</span>,</span>
<span>  delay_density <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu">density</span><span class="op">(</span><span class="va">onset_to_death_ebola</span>, <span class="va">x</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SORTIE<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>`cfr_rolling()` is a convenience function to help understand how additional data influences the overall (static) severity. Use `cfr_time_varying()` instead to estimate severity changes over the course of the outbreak.</code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SORTIE<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Some daily ratios of total deaths to total cases with known outcome are below 0.01%: some CFR estimates may be unreliable.FALSE</code></pre>
</div>
<p>Avec la fonction <code>utils::tail()</code> nous pouvons monter les
dernières estimations du RL. On voit que les intervalles de confiance à
95% des valeurs naïves et corrigées se chevauchent.</p>
<div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># voir un aperçu des dernieres valeurs du RL</span></span>
<span><span class="fu">utils</span><span class="fu">::</span><span class="fu">tail</span><span class="op">(</span><span class="va">rolling_cfr_naive</span><span class="op">)</span></span>
<span><span class="fu">utils</span><span class="fu">::</span><span class="fu">tail</span><span class="op">(</span><span class="va">rolling_cfr_adjusted</span><span class="op">)</span></span></code></pre>
</div>
<p>Visualisons maintenant les deux résultats dans une série
chronologique. Quelle serait la performance des estimations naïves et
ajustées au délai en temps réel ?</p>
<div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># concatener les deux resultats</span></span>
<span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu">bind_rows</span><span class="op">(</span></span>
<span>  <span class="fu">list</span><span class="op">(</span></span>
<span>    naive <span class="op">=</span> <span class="va">rolling_cfr_naive</span>,</span>
<span>    adjusted <span class="op">=</span> <span class="va">rolling_cfr_adjusted</span></span>
<span>  <span class="op">)</span>,</span>
<span>  .id <span class="op">=</span> <span class="st">"method"</span></span>
<span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co"># visualiser les valeurs journalieres du RL naif et corrige</span></span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_ribbon</span><span class="op">(</span></span>
<span>    <span class="fu">aes</span><span class="op">(</span></span>
<span>      <span class="va">date</span>,</span>
<span>      ymin <span class="op">=</span> <span class="va">severity_low</span>,</span>
<span>      ymax <span class="op">=</span> <span class="va">severity_high</span>,</span>
<span>      fill <span class="op">=</span> <span class="va">method</span></span>
<span>    <span class="op">)</span>,</span>
<span>    alpha <span class="op">=</span> <span class="fl">0.2</span>, show.legend <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_line</span><span class="op">(</span></span>
<span>    <span class="fu">aes</span><span class="op">(</span><span class="va">date</span>, <span class="va">severity_estimate</span>, colour <span class="op">=</span> <span class="va">method</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/severity-static-rendered-unnamed-chunk-22-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>Les lignes rouges et bleues représentent respectivement le RL
journalier ajusté au délai et naïf tout au long de l’épidémie. Les
bandes autour d’elles représentent les intervalles de confiance à 95%
(IC 95%).</p>
<p><strong>Notez</strong> que le calcul du RL ajusté au délai est
particulièrement utile lorsqu’une <em>courbe épidémique de cas
confirmés</em> est la seule donnée disponible (c’est-à-dire lorsque les
données concernant le temps entre l’apparition des symptômes jusqu’au
décès ne sont pas disponibles, comme c’est le cas au début de
l’épidémie). Lorsqu’il y a peu ou pas de décès, une hypothèse sur la
<em>distribution des délais</em> entre l’apparition des symptômes et le
décès doit être formulée, par exemple à partir de la littérature basée
sur les épidémies précédentes. <a href="https://journals.plos.org/plosone/article?id=10.1371/journal.pone.0006852" class="external-link">Nishiura
et al. 2009</a> illustrent ce phénomène dans les figures à l’aide de
données relatives à l’épidémie de SARS survenue à Hong Kong en 2003.</p>
<div id="accordionSpoiler4" class="accordion spoiler-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button spoiler-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSpoiler4" aria-expanded="false" aria-controls="collapseSpoiler4">
  <h3 class="accordion-header" id="headingSpoiler4">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="eye"></i></div> Étude de cas : Épidémie de SARS, Hong Kong, 2003 </h3>
</button>
<div id="collapseSpoiler4" class="accordion-collapse collapse" aria-labelledby="headingSpoiler4" data-bs-parent="#accordionSpoiler4">
<div class="accordion-body">
<p>Les figures A et B montrent les nombres cumulés de cas et de décès
dus au SARS, et la figure C montre les estimations observées (biaisées)
du RL en fonction du temps, c’est-à-dire le nombre cumulé de décès par
rapport au nombre de cas à l’instant <span class="math inline">\(t\)</span>. En raison du délai entre l’apparition
des symptômes et le décès, l’estimation biaisée du RL au temps <span class="math inline">\(t\)</span> est inférieure au RL obtenu à la fin de
l’épidémie (302/1755 = 17,2 %).</p>
<figure><img src="fig/cfr-pone.0006852.g003-fig_abc.png" alt="Risque observé (biaisé) de létalité des cas confirmés du syndrome respiratoire aigu sévère (SARS) à Hong Kong, 2003. (Nishiura et al, 2009)" class="figure mx-auto d-block"><div class="figcaption">Risque observé (biaisé) de létalité des cas
confirmés du syndrome respiratoire aigu sévère (SARS) à Hong Kong, 2003.
(<a href="https://journals.plos.org/plosone/article?id=10.1371/journal.pone.0006852" class="external-link">Nishiura
et al, 2009</a>)</div>
</figure><p>Néanmoins, même en n’utilisant que les données observées sur la
période du 19 mars au 2 avril, <code>cfr::cfr_static()</code> peut
produire une prédiction appropriée (figure D), par exemple le RL ajusté
au délai au 27 mars est de 18,1% (IC 95% : 10,5 - 28,1). Une
surestimation est notée au tout début de l’épidémie, mais les limites de
l’intervalle de confiance à 95% pour les phases ultérieures incluent le
RL réel (c’est-à-dire 17,2 %).</p>
<figure><img src="fig/cfr-pone.0006852.g003-fig_d.png" alt="Détermination précoce du risque de létalité confirmé, ajusté au délai, du syndrome respiratoire aigu sévère (SARS) à Hong Kong, 2003. (Nishiura et al, 2009)" class="figure mx-auto d-block"><div class="figcaption">Détermination précoce du risque de létalité
confirmé, ajusté au délai, du syndrome respiratoire aigu sévère (SARS) à
Hong Kong, 2003. (<a href="https://journals.plos.org/plosone/article?id=10.1371/journal.pone.0006852" class="external-link">Nishiura
et al, 2009</a>)</div>
</figure>
</div>
</div>
</div>
</div>
<div id="interpréter-lestimation-du-rl-au-début-de-lépidémie" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="interpréter-lestimation-du-rl-au-début-de-lépidémie" class="callout-inner">
<h3 class="callout-title">Interpréter l’estimation du RL au début de l’épidémie</h3>
<div class="callout-content">
<p>Sur la base de la figure ci-dessus :</p>
<ul>
<li>Quelle est la différence, en jours, entre la date à laquelle l’IC à
95% du <em>RL ajusté aux délais</em> et du <em>RL naïf</em> se croisent
avec le RL estimé à la fin de l’épidémie ?</li>
</ul>
<p>Discutez-en :</p>
<ul>
<li>En quoi le fait de disposer d’un RL <em>ajusté aux délai</em>
peut-il influer sur les stratégies de santé publique ?</li>
</ul>
</div>
</div>
</div>
<div id="accordionHint3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button hint-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseHint3" aria-expanded="false" aria-controls="collapseHint3">
  <h4 class="accordion-header" id="headingHint3"> Donner un indice </h4>
</button>
<div id="collapseHint3" class="accordion-collapse collapse" aria-labelledby="headingHint3" data-bs-parent="#accordionHint3">
<div class="accordion-body">
<p>Nous pouvons soit inspecter visuellement ou analyser les tableaux des
données de sortie.</p>
</div>
</div>
</div>
</div>
<div id="accordionSolution6" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution6" aria-expanded="false" aria-controls="collapseSolution6">
  <h4 class="accordion-header" id="headingSolution6"> Montrer la solution </h4>
</button>
<div id="collapseSolution6" class="accordion-collapse collapse" aria-labelledby="headingSolution6" data-bs-parent="#accordionSolution6">
<div class="accordion-body">
<p>Il y a presque un mois de différence.</p>
<p>Notez que l’estimation présente une incertitude considérable au début
de la série chronologique. Après deux semaines, le RL corrigé au délai
se rapproche de l’estimation globale du RL à la fin de l’épidémie.</p>
<p>Ce schéma est-il similaire à celui d’autres épidémies ? Nous vous
invitons à utiliser les ensembles de données dans les défis de cet
épisode pour le découvrir.</p>
</div>
</div>
</div>
</div>
<div id="checklist" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="checklist" class="callout-inner">
<h3 class="callout-title">Liste de vérification</h3>
<div class="callout-content">
<p>Avec <a href="https://github.com/epiverse-trace/cfr" class="external-link">cfr</a> nous estimons le RL comme la proportion de
décès parmi les cas <strong>confirmés</strong>.</p>
<p>En n’utilisant que les cas <strong>confirmés</strong> il est clair
que tous les cas qui ne cherchent pas de traitement médical ou qui ne
sont pas notifiés ne sont pas pris en compte, de même que tous les cas
asymptomatiques. Cela signifie que le RL estimé est plus élevé que la
proportion de décès parmi l’ensemble des personnes infectées.</p>
</div>
</div>
</div>
<div id="accordionSolution7" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution7" aria-expanded="false" aria-controls="collapseSolution7">
  <h4 class="accordion-header" id="headingSolution7"> Pourquoi les estimations naïves et ajustées aux délais diffèrent-elles ? </h4>
</button>
<div id="collapseSolution7" class="accordion-collapse collapse" aria-labelledby="headingSolution7" data-bs-parent="#accordionSolution7">
<div class="accordion-body">
<p>La méthode de la librairie <a href="https://github.com/epiverse-trace/cfr" class="external-link">cfr</a> vise à obtenir un
estimateur non biaisé “bien avant” d’observer toute l’évolution de
l’épidémie. Pour ce faire, <a href="https://github.com/epiverse-trace/cfr" class="external-link">cfr</a> utilise le facteur de
sous-estimation <span class="math inline">\(u_{t}\)</span> pour estimer
le RL non biaisé <span class="math inline">\(p_{t}\)</span> à l’aide de
la méthode du maximum de vraisemblance, étant donné le <em>processus
d’échantillonnage</em> défini par <a href="https://journals.plos.org/plosone/article?id=10.1371/journal.pone.0006852" class="external-link">Nishiura
et al, 2009</a>.</p>
</div>
</div>
</div>
</div>
<div id="accordionSolution8" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution8" aria-expanded="false" aria-controls="collapseSolution8">
  <h4 class="accordion-header" id="headingSolution8"> Quel est le processus d’échantillonnage ? </h4>
</button>
<div id="collapseSolution8" class="accordion-collapse collapse" aria-labelledby="headingSolution8" data-bs-parent="#accordionSolution8">
<div class="accordion-body">
<figure><img src="fig/cfr-pone.0006852.g001.png" alt="La population des cas confirmés et le processus d’échantillonnage pour l’estimation du RL non biaisé au cours d’une épidémie selon Nishiura et al. 2009" class="figure mx-auto d-block"><div class="figcaption">La population des cas confirmés et le processus
d’échantillonnage pour l’estimation du RL non biaisé au cours d’une
épidémie selon <a href="https://doi.org/10.1371/journal.pone.0006852.g001" class="external-link">Nishiura et
al. 2009</a>
</div>
</figure><p>Nous connaissons le nombre cumulé de cas confirmés et de décès <span class="math inline">\(C_{t}\)</span> et <span class="math inline">\(D_{t}\)</span> à l’instant <span class="math inline">\(t\)</span> à partir des <em>données d’incidence
agrégées</em> et souhaitons estimer le RL non biaisé <span class="math inline">\(\pi\)</span> au moyen du facteur de
sous-estimation <span class="math inline">\(u_{t}\)</span>.</p>
<p>Si nous connaissions le facteur de sous-estimation <span class="math inline">\(u_{t}\)</span> nous pourrions préciser la taille
de la population des cas confirmés qui ne sont plus à risque (<span class="math inline">\(u_{t}C_{t}\)</span>, <strong>ombré</strong>), bien
que nous ne sachions pas quels individus survivants appartiennent à ce
groupe. Une proportion <span class="math inline">\(\pi\)</span> de ceux
qui font partie du groupe de cas encore à risque (taille <span class="math inline">\((1- u_{t})C_{t}\)</span>, <strong>non
ombré</strong>) devrait mourir.</p>
<p>Parce que chaque cas qui n’est plus à risque avait une probabilité
indépendante de mourir, <span class="math inline">\(\pi\)</span> le
nombre de décès, <span class="math inline">\(D_{t}\)</span> est un
échantillon d’une distribution binomiale avec une taille d’échantillon
de <span class="math inline">\(u_{t}C_{t}\)</span> et la probabilité de
décès <span class="math inline">\(p_{t}\)</span> = <span class="math inline">\(\pi\)</span>.</p>
<p>Ceci est représenté par la fonction de vraisemblance suivante
permettant d’obtenir l’estimation du maximum de vraisemblance du RL non
biaisé <span class="math inline">\(p_{t}\)</span> = <span class="math inline">\(\pi\)</span>:</p>
<p><span class="math display">\[
{\sf L}(\pi | C_{t},D_{t},u_{t}) = \log{\dbinom{u_{t}C_{t}}{D_{t}}} +
D_{t} \log{\pi} +
(u_{t}C_{t} - D_{t})\log{(1 - \pi)},
\]</span></p>
<p>Ce calcule est réalisé par la fonction interne
<code>?cfr:::estimate_severity()</code>.</p>
</div>
</div>
</div>
</div>
<div id="accordionSolution9" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution9" aria-expanded="false" aria-controls="collapseSolution9">
  <h4 class="accordion-header" id="headingSolution9"> Limitations </h4>
</button>
<div id="collapseSolution9" class="accordion-collapse collapse" aria-labelledby="headingSolution9" data-bs-parent="#accordionSolution9">
<div class="accordion-body">
<ul>
<li>Le RL ajusté aux délais ne prend pas en charge toutes les sources
d’erreur dans les données, telle que la non-détection de toutes les
personnes infectées.</li>
</ul>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="challenges">Challenges<a class="anchor" aria-label="anchor" href="#challenges"></a>
</h2>
<hr class="half-width">
<div id="autres-mesures-de-sévérité" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="autres-mesures-de-sévérité" class="callout-inner">
<h3 class="callout-title">Autres mesures de sévérité</h3>
<div class="callout-content">
<p>Supposons que nous ayons besoin d’évaluer la gravité clinique de
l’épidémie dans un contexte autre aue la surveillance épidémiologique,
comme la gravité parmi les cas qui arrivent à l’hôpital ou les cas que
vous avez recueillis lors d’une enquête sérologique représentative.</p>
<p>En utilisant <a href="https://github.com/epiverse-trace/cfr" class="external-link">cfr</a> nous pouvons modifier les valeurs du
numérateur (<code>cases</code>) et du dénominateur (<code>deaths</code>)
pour estimer des mesures plus sévères comme le risque d’infection
mortelle (RIM) ou le risque d’hospitalisation mortelle (RHM). Nous
pouvons suivre analogie ci-après :</p>
</div>
</div>
</div>
<div id="accordionSolution10" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution10" aria-expanded="false" aria-controls="collapseSolution10">
  <h4 class="accordion-header" id="headingSolution10"> Risque de létalité lié à l’infection et à l’hospitalisation </h4>
</button>
<div id="collapseSolution10" class="accordion-collapse collapse" aria-labelledby="headingSolution10" data-bs-parent="#accordionSolution10">
<div class="accordion-body">
<p>Si pour le risque de décès (RL) d’un <em>cas</em>, nous exigeons
:</p>
<ul>
<li>les données sur l’incidence des cas et des décès, avec une</li>
<li>distribution des délais entre les cas et les décès (ou une
approximation proche, comme le délai entre l’apparition des symptômes et
le décès).</li>
</ul>
<p>Dans ce cas, le <em>risque d’infection mortelle (RIM)</em> nécessite
:</p>
<ul>
<li>les données sur l’incidence des infections et des décès, avec
une</li>
<li>distribution des délais entre l’exposition et le décès (ou une
approximation proche).</li>
</ul>
<p>De la même manière, le <em>risque d’hospitalisation mortelle</em>
requière :</p>
<ul>
<li>les données d’incidence des cas d’hospitalisation et de décès, ainsi
qu’une</li>
<li>distribution des délais entre l’hospitalisation et le décès.</li>
</ul>
</div>
</div>
</div>
</div>
<div id="accordionSolution11" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution11" aria-expanded="false" aria-controls="collapseSolution11">
  <h4 class="accordion-header" id="headingSolution11"> Sources de données pour d’autres mesures de la gravité </h4>
</button>
<div id="collapseSolution11" class="accordion-collapse collapse" aria-labelledby="headingSolution11" data-bs-parent="#accordionSolution11">
<div class="accordion-body">
<p><a href="https://www.nature.com/articles/s41467-020-19238-2/figures/1" class="external-link">Yang
et al, 2020</a> résume les différentes définitions et sources de données
:</p>
<figure><img src="fig/cfr-s41467-020-19238-2-fig_a.png" alt="Niveaux de gravité des infections par le SARS-CoV-2 et les paramètres d’intérêt. Chaque niveau est supposé être un sous-ensemble du niveau inférieur." class="figure mx-auto d-block"><div class="figcaption">Niveaux de gravité des infections par le
SARS-CoV-2 et les paramètres d’intérêt. Chaque niveau est supposé être
un sous-ensemble du niveau inférieur.</div>
</figure><ul>
<li>sCFR risque de létalité des cas symptomatiques (sRL),</li>
<li>sCHR risque d’hospitalisation des cas symptomatiques (sRH),</li>
<li>mCFR risque de létalité des cas médicalement pris en charge
(mRL),</li>
<li>mCHR risque d’hospitalisation d’un cas médicalement pris en charge
(mRH),</li>
<li>HFR risque d’hospitalisation mortelle (RHM).</li>
</ul>
<figure><img src="fig/cfr-s41467-020-19238-2-fig_b.png" fig-alt="Source des données sur les cas de COVID-19 à Wuhan : D1) 32 583 cas de COVID-19 confirmés en laboratoire en mars 84, D2) 17 365 cas de COVID-19 diagnostiqués cliniquement entre le 9 février et le 24 avril, D3) nombre quotidien de cas confirmés en laboratoire entre le 9 mars et le 24 avril, D4) nombre total de décès dus au COVID-19 en date du 24 avril, obtenus auprès de la Commission de la santé du Hubei3, D5) 325 cas confirmés en laboratoire et D6) 1 290 décès ont été ajoutés au 16 avril grâce à une vérification complète et systématique effectuée par les autorités de Wuhan3, et D7) 16 781 cas confirmés en laboratoire identifiés par le biais d'un dépistage universel10,11. Pse : sensibilité de la RT-PCR12. Pmed.care : proportion de patients souffrant d'infections respiratoires aiguës qui demandent une assistance médicale13." alt="Schéma des analyses de base. Les flèches rouges, bleues et vertes indiquent le flux de données provenant des cas confirmés en laboratoire dans le cadre de la surveillance passive, des cas diagnostiqués cliniquement et des cas confirmés en laboratoire dans le cadre des dépistages actifs." class="figure mx-auto d-block"><div class="figcaption">Schéma des analyses de base. Les flèches rouges,
bleues et vertes indiquent le flux de données provenant des cas
confirmés en laboratoire dans le cadre de la surveillance passive, des
cas diagnostiqués cliniquement et des cas confirmés en laboratoire dans
le cadre des dépistages actifs.</div>
</figure>
</div>
</div>
</div>
</div>
<div id="les-données-agrégées-diffèrent-des-données-de-cas-individuels-linelist" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="les-données-agrégées-diffèrent-des-données-de-cas-individuels-linelist" class="callout-inner">
<h3 class="callout-title">Les données agrégées diffèrent des données de cas individuels (linelist)</h3>
<div class="callout-content">
<p>Les données d’incidence <strong>agrégées</strong> diffèrent des
<strong>linelist</strong> où chaque observation contient des données
concernant un cas individuel.</p>
<div class="codewrapper sourceCode" id="cb29">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">outbreaks</span><span class="fu">::</span><span class="va">ebola_sierraleone_2014</span> <span class="op">%&gt;%</span> <span class="fu">as_tibble</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SORTIE<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 11,903 × 8
      id   age sex   status    date_of_onset date_of_sample district chiefdom
   &lt;int&gt; &lt;dbl&gt; &lt;fct&gt; &lt;fct&gt;     &lt;date&gt;        &lt;date&gt;         &lt;fct&gt;    &lt;fct&gt;
 1     1    20 F     confirmed 2014-05-18    2014-05-23     Kailahun Kissi Teng
 2     2    42 F     confirmed 2014-05-20    2014-05-25     Kailahun Kissi Teng
 3     3    45 F     confirmed 2014-05-20    2014-05-25     Kailahun Kissi Tonge
 4     4    15 F     confirmed 2014-05-21    2014-05-26     Kailahun Kissi Teng
 5     5    19 F     confirmed 2014-05-21    2014-05-26     Kailahun Kissi Teng
 6     6    55 F     confirmed 2014-05-21    2014-05-26     Kailahun Kissi Teng
 7     7    50 F     confirmed 2014-05-21    2014-05-26     Kailahun Kissi Teng
 8     8     8 F     confirmed 2014-05-22    2014-05-27     Kailahun Kissi Teng
 9     9    54 F     confirmed 2014-05-22    2014-05-27     Kailahun Kissi Teng
10    10    57 F     confirmed 2014-05-22    2014-05-27     Kailahun Kissi Teng
# ℹ 11,893 more rows</code></pre>
</div>
</div>
</div>
</div>
<div id="utilisez-incidence2-pour-réorganiser-vos-données" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="utilisez-incidence2-pour-réorganiser-vos-données" class="callout-inner">
<h3 class="callout-title">Utilisez {incidence2} pour réorganiser vos données</h3>
<div class="callout-content">
<p>Utilisez la librairie <a href="https://github.com/reconhub/outbreaks" class="external-link">outbreaks</a> pour chargez le
linelist des cas de MERS issues de l’objet <code>mers_korea_2015</code>
.</p>
<p>Réorganisez cet objet linelist de sorte qu’il soit utilisable par les
fonctions de la librairie <a href="https://github.com/epiverse-trace/cfr" class="external-link">cfr</a>.</p>
<p>Estimez le RL ajusté au délai en utilisant la distribution de délai
correspondante.</p>
</div>
</div>
</div>
<div id="accordionHint4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button hint-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseHint4" aria-expanded="false" aria-controls="collapseHint4">
  <h4 class="accordion-header" id="headingHint4"> Donner un indice </h4>
</button>
<div id="collapseHint4" class="accordion-collapse collapse" aria-labelledby="headingHint4" data-bs-parent="#accordionHint4">
<div class="accordion-body">
<p><strong>Comment réorganiser les données d’entrée ?</strong></p>
<p>Le réorganisation des données d’entrée durant le processus d’analyse
des données peut prendre beaucoup de temps. Pour obtenir des <em>données
d’incidence agrégées</em> prêtes à être analysées nous vous encourageons
à utiliser le package <a href="https://www.reconverse.org/incidence2/" class="external-link">incidence2</a>.</p>
<p>Tout d’abord, consultez la vignette <a href="https://www.reconverse.org/incidence2/articles/incidence2.html" class="external-link">Get
started</a> de la librairie <a href="https://www.reconverse.org/incidence2/" class="external-link">incidence2</a> pour savoir
comment utiliser l’argument <code>date_index</code> lors de la lecture
d’un linelist contenant plusieurs colonnes de type <date>.</date></p>
<p>Ensuite, référez-vous <a href="https://epiverse-trace.github.io/cfr/reference/prepare_data.html" class="external-link">au
manuel de référence</a> sur la façon d’utiliser la fonction
<code>cfr::prepare_data()</code> sur les objets de classe
<incidence2>.</incidence2></p>
<!-- cite howto entry one lineslist + incidence2 + cfr connection -->
</div>
</div>
</div>
</div>
<div id="accordionSolution12" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution12" aria-expanded="false" aria-controls="collapseSolution12">
  <h4 class="accordion-header" id="headingSolution12"> Montrer la solution </h4>
</button>
<div id="collapseSolution12" class="accordion-collapse collapse" aria-labelledby="headingSolution12" data-bs-parent="#accordionSolution12">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb31">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># charger les packages</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">cfr</span><span class="op">)</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">epiparameter</span><span class="op">)</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">incidence2</span><span class="op">)</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">outbreaks</span><span class="op">)</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">tidyverse</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Acceder a la distribution des delais</span></span>
<span><span class="va">mers_delay</span> <span class="op">&lt;-</span> <span class="fu">epiparameter</span><span class="fu">::</span><span class="fu">epiparameter_db</span><span class="op">(</span></span>
<span>  disease <span class="op">=</span> <span class="st">"mers"</span>,</span>
<span>  epi_name <span class="op">=</span> <span class="st">"onset to death"</span>,</span>
<span>  single_epiparameter <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># lire le linelist</span></span>
<span><span class="va">mers_korea_2015</span><span class="op">$</span><span class="va">linelist</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">as_tibble</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="fu">starts_with</span><span class="op">(</span><span class="st">"dt_"</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SORTIE<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 162 × 6
   dt_onset   dt_report  dt_start_exp dt_end_exp dt_diag    dt_death
   &lt;date&gt;     &lt;date&gt;     &lt;date&gt;       &lt;date&gt;     &lt;date&gt;     &lt;date&gt;
 1 2015-05-11 2015-05-19 2015-04-18   2015-05-04 2015-05-20 NA
 2 2015-05-18 2015-05-20 2015-05-15   2015-05-20 2015-05-20 NA
 3 2015-05-20 2015-05-20 2015-05-16   2015-05-16 2015-05-21 2015-06-04
 4 2015-05-25 2015-05-26 2015-05-16   2015-05-20 2015-05-26 NA
 5 2015-05-25 2015-05-27 2015-05-17   2015-05-17 2015-05-26 NA
 6 2015-05-24 2015-05-28 2015-05-15   2015-05-17 2015-05-28 2015-06-01
 7 2015-05-21 2015-05-28 2015-05-16   2015-05-17 2015-05-28 NA
 8 2015-05-26 2015-05-29 2015-05-15   2015-05-15 2015-05-29 NA
 9 NA         2015-05-29 2015-05-15   2015-05-17 2015-05-29 NA
10 2015-05-21 2015-05-29 2015-05-16   2015-05-16 2015-05-29 NA
# ℹ 152 more rows</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb33">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># utiliser {incidence2} pour determiner les incidences journalieres</span></span>
<span><span class="va">mers_incidence</span> <span class="op">&lt;-</span> <span class="va">mers_korea_2015</span><span class="op">$</span><span class="va">linelist</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co"># convertir en objet incidence2</span></span>
<span>  <span class="fu">incidence2</span><span class="fu">::</span><span class="fu">incidence</span><span class="op">(</span>date_index <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="st">"dt_onset"</span>, <span class="st">"dt_death"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co"># completer les dates du début a la fin</span></span>
<span>  <span class="fu">incidence2</span><span class="fu">::</span><span class="fu">complete_dates</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># voir un aperçu des donnees d'incidence</span></span>
<span><span class="va">mers_incidence</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SORTIE<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># incidence:  72 x 3
# count vars: dt_death, dt_onset
   date_index count_variable count
   &lt;date&gt;     &lt;chr&gt;          &lt;int&gt;
 1 2015-05-11 dt_death           0
 2 2015-05-11 dt_onset           1
 3 2015-05-12 dt_death           0
 4 2015-05-12 dt_onset           0
 5 2015-05-13 dt_death           0
 6 2015-05-13 dt_onset           0
 7 2015-05-14 dt_death           0
 8 2015-05-14 dt_onset           0
 9 2015-05-15 dt_death           0
10 2015-05-15 dt_onset           0
# ℹ 62 more rows</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb35">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Preparer les donnees d'incidence pour utilisation dans {cfr}</span></span>
<span><span class="va">mers_incidence</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">cfr</span><span class="fu">::</span><span class="fu">prepare_data</span><span class="op">(</span></span>
<span>    cases_variable <span class="op">=</span> <span class="st">"dt_onset"</span>,</span>
<span>    deaths_variable <span class="op">=</span> <span class="st">"dt_death"</span></span>
<span>  <span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SORTIE<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>         date deaths cases
1  2015-05-11      0     1
2  2015-05-12      0     0
3  2015-05-13      0     0
4  2015-05-14      0     0
5  2015-05-15      0     0
6  2015-05-16      0     0
7  2015-05-17      0     1
8  2015-05-18      0     1
9  2015-05-19      0     0
10 2015-05-20      0     5
11 2015-05-21      0     6
12 2015-05-22      0     2
13 2015-05-23      0     4
14 2015-05-24      0     2
15 2015-05-25      0     3
16 2015-05-26      0     1
17 2015-05-27      0     2
18 2015-05-28      0     1
19 2015-05-29      0     3
20 2015-05-30      0     5
21 2015-05-31      0    10
22 2015-06-01      2    16
23 2015-06-02      0    11
24 2015-06-03      1     7
25 2015-06-04      1    12
26 2015-06-05      1     9
27 2015-06-06      0     7
28 2015-06-07      0     7
29 2015-06-08      2     6
30 2015-06-09      0     1
31 2015-06-10      2     6
32 2015-06-11      1     3
33 2015-06-12      0     0
34 2015-06-13      0     2
35 2015-06-14      0     0
36 2015-06-15      0     1</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb37">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Estimer le RL ajuste au delai</span></span>
<span><span class="va">mers_incidence</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">cfr</span><span class="fu">::</span><span class="fu">prepare_data</span><span class="op">(</span></span>
<span>    cases_variable <span class="op">=</span> <span class="st">"dt_onset"</span>,</span>
<span>    deaths_variable <span class="op">=</span> <span class="st">"dt_death"</span></span>
<span>  <span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">cfr</span><span class="fu">::</span><span class="fu">cfr_static</span><span class="op">(</span>delay_density <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu">density</span><span class="op">(</span><span class="va">mers_delay</span>, <span class="va">x</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SORTIE<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  severity_estimate severity_low severity_high
1            0.1377       0.0716        0.2288</code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="hétérogénéité-de-la-gravité" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="hétérogénéité-de-la-gravité" class="callout-inner">
<h3 class="callout-title">Hétérogénéité de la gravité</h3>
<div class="callout-content">
<p>Le RL peut varier d’une population à l’autre (par exemple en fonction
de l’âge, l’espace géographique, du traitement, etc) ; la quantification
de ces hétérogénéités peut aider à mobiliser les ressources de manière
appropriée et à comparer différents régimes de soins (<a href="https://royalsocietypublishing.org/doi/10.1098/rstb.2016.0371" class="external-link">Cori
et al., 2017</a>).</p>
<p>Utilisez le tableau de données <code>cfr::covid_data</code> pour
estimer un RL ajusté aux délais, stratifié par pays.</p>
</div>
</div>
</div>
<div id="accordionHint5" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button hint-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseHint5" aria-expanded="false" aria-controls="collapseHint5">
  <h4 class="accordion-header" id="headingHint5"> Donner un indice </h4>
</button>
<div id="collapseHint5" class="accordion-collapse collapse" aria-labelledby="headingHint5" data-bs-parent="#accordionHint5">
<div class="accordion-body">
<p>Une façon d’effectuer une <em>analyse stratifiée</em> consiste à
appliquer un modèle à des données imbriquées. Cette <a href="https://tidyr.tidyverse.org/articles/nest.html#nested-data-and-models" class="external-link">vignette
de la librairie <code>{tidyr}</code> vignette</a> vous montre comment
appliquer la méthode <code>dplyr::group_by()</code> +
<code>tidyr::nest()</code> aux données de imbriquées, puis
<code>dplyr::mutate()</code> + <code>purrr::map()</code> pour appliquer
le modèle.</p>
</div>
</div>
</div>
</div>
<div id="accordionSolution13" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution13" aria-expanded="false" aria-controls="collapseSolution13">
  <h4 class="accordion-header" id="headingSolution13"> Montrer la solution </h4>
</button>
<div id="collapseSolution13" class="accordion-collapse collapse" aria-labelledby="headingSolution13" data-bs-parent="#accordionSolution13">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb39">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">cfr</span><span class="op">)</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">epiparameter</span><span class="op">)</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">tidyverse</span><span class="op">)</span></span>
<span></span>
<span><span class="va">covid_data</span> <span class="op">%&gt;%</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">glimpse</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SORTIE<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Rows: 20,786
Columns: 4
$ date    &lt;date&gt; 2020-01-03, 2020-01-03, 2020-01-03, 2020-01-03, 2020-01-03, 2…
$ country &lt;chr&gt; "Argentina", "Brazil", "Colombia", "France", "Germany", "India…
$ cases   &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…
$ deaths  &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb41">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">delay_onset_death</span> <span class="op">&lt;-</span> <span class="fu">epiparameter</span><span class="fu">::</span><span class="fu">epiparameter_db</span><span class="op">(</span></span>
<span>  disease <span class="op">=</span> <span class="st">"covid"</span>,</span>
<span>  epi_name <span class="op">=</span> <span class="st">"onset to death"</span>,</span>
<span>  single_epiparameter <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">covid_data</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">group_by</span><span class="op">(</span><span class="va">country</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">tidyr</span><span class="fu">::</span><span class="fu">nest</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">mutate</span><span class="op">(</span></span>
<span>    temp <span class="op">=</span> <span class="fu">purrr</span><span class="fu">::</span><span class="fu">map</span><span class="op">(</span></span>
<span>      .x <span class="op">=</span> <span class="va">data</span>,</span>
<span>      .f <span class="op">=</span> <span class="fu">cfr</span><span class="fu">::</span><span class="va">cfr_static</span>,</span>
<span>      delay_density <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu">density</span><span class="op">(</span><span class="va">delay_onset_death</span>, <span class="va">x</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">tidyr</span><span class="fu">::</span><span class="fu">unnest</span><span class="op">(</span>cols <span class="op">=</span> <span class="va">temp</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SORTIE<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 19 × 5
# Groups:   country [19]
   country        data     severity_estimate severity_low severity_high
   &lt;chr&gt;          &lt;list&gt;               &lt;dbl&gt;        &lt;dbl&gt;         &lt;dbl&gt;
 1 Argentina      &lt;tibble&gt;            0.0133       0.0133        0.0133
 2 Brazil         &lt;tibble&gt;            0.0195       0.0195        0.0195
 3 Colombia       &lt;tibble&gt;            0.0225       0.0224        0.0226
 4 France         &lt;tibble&gt;            0.0044       0.0044        0.0044
 5 Germany        &lt;tibble&gt;            0.0045       0.0045        0.0045
 6 India          &lt;tibble&gt;            0.0119       0.0119        0.0119
 7 Indonesia      &lt;tibble&gt;            0.024        0.0239        0.0241
 8 Iran           &lt;tibble&gt;            0.0191       0.0191        0.0192
 9 Italy          &lt;tibble&gt;            0.0075       0.0075        0.0075
10 Mexico         &lt;tibble&gt;            0.0461       0.046         0.0462
11 Peru           &lt;tibble&gt;            0.0502       0.0501        0.0504
12 Poland         &lt;tibble&gt;            0.0186       0.0186        0.0187
13 Russia         &lt;tibble&gt;            0.0182       0.0182        0.0182
14 South Africa   &lt;tibble&gt;            0.0254       0.0253        0.0255
15 Spain          &lt;tibble&gt;            0.0087       0.0087        0.0087
16 Turkey         &lt;tibble&gt;            0.006        0.006         0.006
17 Ukraine        &lt;tibble&gt;            0.0204       0.0203        0.0205
18 United Kingdom &lt;tibble&gt;            0.009        0.009         0.009
19 United States  &lt;tibble&gt;            0.0111       0.0111        0.0111</code></pre>
</div>
<p>C’est génial ! Vous pouvez maintenant utiliser un code similaire pour
stratifier vos analyses en fonction de l’âge, des régions ou autres
facteurs utiles.</p>
<p>Mais comment interpréter le fait qu’on ait une variabilité nationale
de la gravité clinique pour un même agent pathogène diagnostiqué ?</p>
<p>Des facteurs locaux tels que la capacité de test, la définition de
cas et le régime d’échantillonnage peuvent influer sur la déclaration
des cas et des décès, et donc sur la détermination de la grvité
clinique. Jetez un coup d’œil à la vignette de <a href="https://github.com/epiverse-trace/cfr" class="external-link">cfr</a> sur <a href="https://epiverse-trace.github.io/cfr/articles/estimate_ascertainment.html" class="external-link">Estimation
de la proportion de cas confirmés au cours d’une épidémie</a>.</p>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="annexe">Annexe<a class="anchor" aria-label="anchor" href="#annexe"></a>
</h2>
<hr class="half-width">
<p>La librairie <a href="https://github.com/epiverse-trace/cfr" class="external-link">cfr</a> possède une fonction appelée
<code>cfr_time_varying()</code> dont la fonctionnalité diffère de celle
de <code>cfr_rolling()</code>.</p>
<div id="quand-doit-on-utiliser-cfr_rolling" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="quand-doit-on-utiliser-cfr_rolling" class="callout-inner">
<h3 class="callout-title">Quand doit-on utiliser cfr_rolling() ?</h3>
<div class="callout-content">
<p><code>cfr::cfr_rolling()</code> calcule le RL estimé à chaque jour de
l’épidémie, vue que les données futures sur les cas et les décès ne sont
pas disponibles à ce moment-là. La valeur finale de
<code>cfr_rolling()</code> est identique à celle de
<code>cfr_static()</code> pour les mêmes données.</p>
<p>Rappelez-vous, comme indiqué ci-dessus, <code>cfr_rolling()</code>
est utile pour obtenir des estimations du RL à un stade précoce de
l’épidémie et vérifier si l’estimation du RL d’une épidémie s’est
stabilisée. C’est pourquoi, <code>cfr_rolling()</code> n’est pas
sensible à la durée ou à la taille de l’épidémie.</p>
</div>
</div>
</div>
<div id="quand-doit-on-utiliser-cfr_time_varying" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="quand-doit-on-utiliser-cfr_time_varying" class="callout-inner">
<h3 class="callout-title">Quand doit-on utiliser
<code>cfr_time_varying()</code> ?</h3>
<div class="callout-content">
<p>D’autre part, <code>cfr::cfr_time_varying()</code>, utilisée pour
calculer le RL mobile (RL par intervalle de temps régulier), aide à
comprendre les variations du RL dues à des changements durant
l’épidémie, comme par exemple en raison d’un nouveau variant du
pathogène ou d’une immunité accrue due à la vaccination.</p>
<p>Cependant, <code>cfr_time_varying()</code> est sensible à
l’incertitude de l’échantillonnage. Son résultat est donc sensible à la
taille de l’épidémie. Plus le nombre de cas dont on connaitra le
pronostique au moment de l’estimation est élevé, plus nous obtiendrons
des estimations raisonnables du RL variable par intervalle de temps
consécutif.</p>
<p>Par exemple, avec 100 cas, le taux de létalité estimé aura, grosso
modo, un intervalle de confiance de 95% ± 10% de la valeur moyenne (IC
binomial). Donc, si le nombre de cas dont on connaitra le pronostique à
<em>un jour donné</em> est supérieur 100, nous pouvons obtenir des
estimations raisonnables du RL mobile. Mais si nous disposons que de
&gt;100 cas <em>sur toute la durée de l’épidémie</em> nous devrons
probablement nous appuyer sur la fonction <code>cfr_rolling()</code> qui
utilise les données cumulées.</p>
<p>Nous vous invitons à lire la <a href="https://epiverse-trace.github.io/cfr/articles/estimate_time_varying_severity.html" class="external-link">vignette
sur la fonction <code>cfr_time_varying()</code></a>.</p>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Points clés</h3>
<div class="callout-content">
<ul>
<li><p>Utilisez la librairie <a href="https://github.com/epiverse-trace/cfr" class="external-link">cfr</a> pour estimer la gravité
clinique</p></li>
<li><p>Utilisez la fonction <code>cfr::cfr_static()</code> pour estimer
le RL global à l’aide des plus récentes données disponibles.</p></li>
<li><p>Utilisez la fonction <code>cfr::cfr_rolling()</code> pour obtenir
les estimations du RL durant chaque jour de l’épidémie.</p></li>
<li><p>Utiliser l’argument <code>delay_density</code> pour ajuster les
valeurs du RL au délai épidémiologique en fonction de la distribution
des délais correspondants.</p></li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section>
</div>
    </main>
</div>
<!-- END  : inst/pkgdown/templates/content-extra.html -->

      </div>
<!--/div.row-->
      		<footer class="row footer mx-md-3"><hr>
<div class="col-md-6">
        <p>Cette leçon est soumise au <a href="CODE_OF_CONDUCT.html">Code de Conduite</a></p>
        <p>

        <a href="https://github.com/epiverse-trace/tutorials-middle-fr/edit/main/README.md" class="external-link">Modifier sur GitHub</a>

	
        | <a href="https://github.com/epiverse-trace/tutorials-middle-fr/blob/main/CONTRIBUTING.md" class="external-link">Contribuer</a>
        | <a href="https://github.com/epiverse-trace/tutorials-middle-fr/" class="external-link">Code Source</a></p>
				<p><a href="https://github.com/epiverse-trace/tutorials-middle-fr/blob/main/CITATION.cff" class="external-link">Citer</a> | <a href="mailto:andree.valle-campos@lshtm.ac.uk">Contact</a> | <a href="https://carpentries.org/about/" class="external-link">À propos</a></p>
			</div>
			<div class="col-md-6">

        <p>Materials licensed under <a href="LICENSE.html">CC-BY 4.0</a> by the authors</p>

        <p>Modèle publié sous licence <a href="https://creativecommons.org/licenses/by-sa/4.0/" class="external-link">CC-BY 4.0</a> par <a href="https://carpentries.org/" class="external-link">The Carpentries</a></p>
        <p>Construit avec <a href="https://github.com/epiverse-trace/sandpaper/tree/patch-renv-github-bug" class="external-link">sandpaper (0.16.13.9000)</a>, <a href="https://github.com/carpentries/pegboard/tree/7dc6acfdd6233c0d124a0ecf288325edc40dd96d" class="external-link">pegboard (0.7.9)</a>, et <a href="https://github.com/epiverse-trace/varnish/tree/epiversetheme" class="external-link">varnish (1.0.7.9000)</a></p>
			</div>
		</footer>
</div> <!-- / div.container -->
	<div id="to-top">
		<a href="#top">
      <i class="search-icon" data-feather="arrow-up" role="img" aria-label="Retour En Haut"></i><br><!-- <span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top --><span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Retour</span> En Haut
		</a>
	</div>
  <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "LearningResource",
  "@id": "https://epiverse-trace.github.io/tutorials-middle-fr/aio.html",
  "inLanguage": "fr",
  "dct:conformsTo": "https://bioschemas.org/profiles/LearningResource/1.0-RELEASE",
  "description": "A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide",
  "keywords": "forecasts, epidemic models, interventions",
  "name": "Tout sur une seule page",
  "creativeWorkStatus": "active",
  "url": "https://epiverse-trace.github.io/tutorials-middle-fr/aio.html",
  "identifier": "https://epiverse-trace.github.io/tutorials-middle-fr/aio.html",
  "dateCreated": "2025-10-14",
  "dateModified": "2025-10-14",
  "datePublished": "2025-10-14"
}

  </script><script>
		feather.replace();
	</script>
</body>
</html><!-- END:   inst/pkgdown/templates/layout.html-->

